(()=>{var e={};e.id=517,e.ids=[517],e.modules={336:(e,s,a)=>{Promise.resolve().then(a.bind(a,9173))},608:(e,s,a)=>{Promise.resolve().then(a.bind(a,1555))},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1555:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});let r=(0,a(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"E:\\\\programming\\\\aphrodite\\\\frontend\\\\src\\\\app\\\\preview\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"E:\\programming\\aphrodite\\frontend\\src\\app\\preview\\page.tsx","default")},1651:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>d});var r=a(5239),t=a(8088),i=a(8170),l=a.n(i),n=a(893),c={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);a.d(s,c);let d={children:["",{children:["preview",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,1555)),"E:\\programming\\aphrodite\\frontend\\src\\app\\preview\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,4431)),"E:\\programming\\aphrodite\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,o=["E:\\programming\\aphrodite\\frontend\\src\\app\\preview\\page.tsx"],m={require:a,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/preview/page",pathname:"/preview",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2953:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(2688).A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3649:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(2688).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},3873:e=>{"use strict";e.exports=require("path")},6023:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(2688).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},8233:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(2688).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9173:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>D});var r=a(687),t=a(3210),i=a.n(t),l=a(5763);let n={availableBadgeTypes:[{id:"audio",name:"Audio",description:"Audio codec badges (DTS-X, Atmos, etc.)"},{id:"resolution",name:"Resolution",description:"Resolution badges (4K, 1080p, etc.)"},{id:"review",name:"Review",description:"Review/rating badges (IMDb, TMDb, etc.)"},{id:"awards",name:"Awards",description:"Awards badges (Oscars, Emmys, etc.)"}],selectedBadgeTypes:["audio","resolution"],currentPreview:{isGenerating:!1},libraries:[],mediaItems:[],configuration:{selectedBadgeTypes:["audio","resolution"],previewOptions:{useExamplePoster:!0,overlayOpacity:.8,showBeforeAfter:!0}},processingQueue:{jobs:[],activeJobs:0,maxConcurrent:3,totalCompleted:0,totalFailed:0},isLoading:!1,activeTab:"simple"};var c=a(2581),d=a(4493),o=a(6896),m=a(9523),x=a(6834),p=a(4027),h=a(3943);function u({availableBadgeTypes:e,selectedBadgeTypes:s,onToggleBadgeType:a,onGeneratePreview:t,isGenerating:i,className:l=""}){return(0,r.jsxs)(d.Zp,{className:l,children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(p.A,{className:"h-5 w-5"}),"Badge Configuration"]}),(0,r.jsx)(d.BT,{children:"Select which badges to apply to the preview poster. Aphrodite will use an example poster to demonstrate how badges look."})]}),(0,r.jsxs)(d.Wu,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h4",{className:"text-sm font-medium",children:"Badge Types"}),(0,r.jsxs)(x.E,{variant:"secondary",className:"text-xs",children:[s.length," selected"]})]}),(0,r.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)(o.S,{id:`badge-${e.id}`,checked:s.includes(e.id),onCheckedChange:()=>a(e.id),className:"mt-0.5"}),(0,r.jsxs)("div",{className:"grid gap-1.5 leading-none",children:[(0,r.jsx)("label",{htmlFor:`badge-${e.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:e.name}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})]})]},e.id))})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(m.$,{onClick:t,disabled:i||0===s.length,className:"w-full",size:"lg",children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),"Generating Preview..."]}):"Generate Preview"}),(0,r.jsxs)(m.$,{variant:"outline",onClick:()=>{let e=["audio","resolution"];s.forEach(s=>{e.includes(s)||a(s)}),e.forEach(e=>{s.includes(e)||a(e)})},disabled:i,className:"w-full",size:"sm",children:[(0,r.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Reset to Defaults"]})]}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1",children:[(0,r.jsx)("p",{children:"• Preview uses realistic demo data for consistent results"}),(0,r.jsx)("p",{children:"• All badge settings from Settings page are applied"}),(0,r.jsx)("p",{children:"• Select at least one badge type to generate preview"})]})]})]})}var g=a(3613),j=a(9005),v=a(2688);let f=(0,v.A)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]);var y=a(1158),b=a(2953),w=a(1821),N=a(3503);function k({isGenerating:e,previewUrl:s,sourcePoster:a,selectedBadgeTypes:i,error:l,className:n=""}){let[c,o]=(0,t.useState)(!1),[p,h]=(0,t.useState)(!1),u=async()=>{if(s)try{let e=await fetch(s),a=await e.blob(),r=window.URL.createObjectURL(a),t=document.createElement("a");t.href=r,t.download=`aphrodite-preview-${Date.now()}.png`,document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(r),document.body.removeChild(t)}catch(e){console.error("Error downloading preview:",e)}};return(0,r.jsxs)(d.Zp,{className:n,children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(j.A,{className:"h-5 w-5"}),"Preview Poster"]}),(0,r.jsx)(d.BT,{children:"See how your selected badges will look on a poster"})]}),(0,r.jsx)(d.Wu,{children:l?(0,r.jsxs)(w.Fc,{variant:"destructive",children:[(0,r.jsx)(g.A,{className:"h-4 w-4"}),(0,r.jsx)(w.TN,{children:l})]}):e?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-muted border-t-primary"}),(0,r.jsx)(j.A,{className:"absolute top-1/2 left-1/2 h-6 w-6 -translate-x-1/2 -translate-y-1/2 text-muted-foreground"})]}),(0,r.jsxs)("div",{className:"text-center space-y-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:"Generating preview..."}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Applying ",i.length," badge type",1!==i.length?"s":""]})]})]}):s&&!c?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("img",{src:s,alt:"Preview Poster",className:"w-full h-auto rounded-lg shadow-md transition-transform group-hover:scale-[1.02]",style:{maxHeight:"500px",objectFit:"contain"},onError:()=>{o(!0)},onLoad:()=>{o(!1)}}),(0,r.jsxs)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity space-x-2",children:[(0,r.jsxs)(N.lG,{open:p,onOpenChange:h,children:[(0,r.jsx)(N.zM,{asChild:!0,children:(0,r.jsx)(m.$,{size:"sm",variant:"secondary",className:"backdrop-blur-sm",children:(0,r.jsx)(f,{className:"h-4 w-4"})})}),(0,r.jsxs)(N.Cf,{className:"max-w-4xl w-full h-[90vh]",children:[(0,r.jsxs)(N.c7,{children:[(0,r.jsx)(N.L3,{children:"Preview Poster - Full Size"}),(0,r.jsxs)(N.rr,{children:["Enhanced with ",i.join(", ")," badges",a&&` using "${a}"`]})]}),(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center overflow-auto",children:(0,r.jsx)("img",{src:s,alt:"Preview Poster - Full Size",className:"max-w-full max-h-full object-contain"})})]})]}),(0,r.jsx)(m.$,{size:"sm",variant:"secondary",onClick:u,className:"backdrop-blur-sm",children:(0,r.jsx)(y.A,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)("div",{className:"text-center space-y-2",children:[(0,r.jsx)("div",{className:"flex flex-wrap gap-1 justify-center",children:i.map(e=>(0,r.jsx)(x.E,{variant:"secondary",className:"text-xs",children:e},e))}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Preview generated with ",i.length," badge type",1!==i.length?"s":"",a&&(0,r.jsxs)("span",{className:"block text-xs mt-1",children:['Using "',a,'"']})]})]}),(0,r.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,r.jsxs)(m.$,{variant:"outline",size:"sm",onClick:u,children:[(0,r.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Download Preview"]}),(0,r.jsxs)(m.$,{variant:"outline",size:"sm",onClick:()=>h(!0),children:[(0,r.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"View Full Size"]})]})]}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 space-y-4",children:[(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)(j.A,{className:"h-16 w-16 text-muted-foreground/30"})}),(0,r.jsxs)("div",{className:"text-center space-y-2",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Your poster preview will appear here"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:'Select badge types and click "Generate Preview"'})]})]})})]})}var A=a(9667),P=a(5079),S=a(8440),E=a(3844);let T=(0,v.A)("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),C=(0,v.A)("book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);var R=a(1531),B=a(3649),_=a(9270);function M({libraries:e,selectedLibrary:s,mediaItems:a,selectedMedia:t,loading:l,onSelectLibrary:n,onSelectMedia:c,onLoadLibraries:o,onLoadMedia:p,className:h=""}){let[u,g]=i().useState(""),j=e=>{switch(e){case"movies":return(0,r.jsx)(S.A,{className:"h-4 w-4"});case"series":return(0,r.jsx)(E.A,{className:"h-4 w-4"});case"music":return(0,r.jsx)(T,{className:"h-4 w-4"});case"books":return(0,r.jsx)(C,{className:"h-4 w-4"});default:return(0,r.jsx)(R.A,{className:"h-4 w-4"})}},v=e=>({movie:"Movie",series:"TV Series",episode:"Episode",season:"Season"})[e]||e;return(0,r.jsxs)(d.Zp,{className:h,children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(R.A,{className:"h-5 w-5"}),"Media Library Browser"]}),(0,r.jsx)(d.BT,{children:"Browse your Jellyfin libraries and select media for preview (coming soon)"})]}),(0,r.jsxs)(d.Wu,{className:"space-y-6",children:[(0,r.jsxs)(w.Fc,{children:[(0,r.jsx)(B.A,{className:"h-4 w-4"}),(0,r.jsx)(w.TN,{children:"Library browsing is coming in a future update. Currently using example poster for consistent preview experience."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Select Library"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(P.l6,{value:s,onValueChange:n,disabled:l.libraries||0===e.length,children:[(0,r.jsx)(P.bq,{className:"flex-1",children:(0,r.jsx)(P.yv,{placeholder:"Choose a library..."})}),(0,r.jsx)(P.gC,{children:e.map(e=>(0,r.jsx)(P.eb,{value:e.id,children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[j(e.type),e.name,e.itemCount&&(0,r.jsx)(x.E,{variant:"secondary",className:"ml-auto text-xs",children:e.itemCount})]})},e.id))})]}),(0,r.jsx)(m.$,{variant:"outline",onClick:o,disabled:l.libraries,children:l.libraries?(0,r.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-background border-t-foreground"}):"Refresh"})]})]}),s&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Search Media"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p({search:u})},className:"flex gap-2",children:[(0,r.jsx)(A.p,{placeholder:"Search for movies, shows, etc...",value:u,onChange:e=>g(e.target.value),disabled:l.media}),(0,r.jsx)(m.$,{type:"submit",variant:"outline",disabled:l.media,children:(0,r.jsx)(_.A,{className:"h-4 w-4"})})]})]}),s&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Media Items"}),a.length>0&&(0,r.jsxs)(x.E,{variant:"secondary",className:"text-xs",children:[a.length," items"]})]}),l.media?(0,r.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,r.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-muted border-t-primary"})}):a.length>0?(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 max-h-64 overflow-y-auto",children:a.map(e=>(0,r.jsxs)("div",{className:`
                      cursor-pointer rounded-lg border p-2 transition-colors hover:bg-accent
                      ${t===e.id?"border-primary bg-accent":"border-muted"}
                    `,onClick:()=>c(e.id),children:[(0,r.jsx)("div",{className:"aspect-[2/3] bg-muted rounded mb-2 flex items-center justify-center",children:e.poster_url?(0,r.jsx)("img",{src:e.poster_url,alt:e.name,className:"w-full h-full object-cover rounded"}):(0,r.jsx)(S.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("p",{className:"text-xs font-medium truncate",title:e.name,children:e.name}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(x.E,{variant:"outline",className:"text-xs",children:v(e.type)}),e.year&&(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:e.year})]})]})]},e.id))}):s?(0,r.jsxs)("div",{className:"text-center py-8 text-sm text-muted-foreground",children:["No media items found",u&&(0,r.jsx)("span",{className:"block mt-1",children:"Try a different search term"})]}):null]}),t&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Selected Media"}),(()=>{let e=a.find(e=>e.id===t);return e?(0,r.jsxs)("div",{className:"flex items-center gap-3 p-3 border rounded-lg bg-accent/50",children:[(0,r.jsx)("div",{className:"w-12 h-16 bg-muted rounded flex items-center justify-center",children:e.poster_url?(0,r.jsx)("img",{src:e.poster_url,alt:e.name,className:"w-full h-full object-cover rounded"}):(0,r.jsx)(S.A,{className:"h-6 w-6 text-muted-foreground"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"font-medium truncate",children:e.name}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,r.jsx)(x.E,{variant:"outline",className:"text-xs",children:v(e.type)}),e.year&&(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:e.year})]}),e.overview&&(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:e.overview})]})]}):null})()]})]})]})}var $=a(3562),F=a(5950),L=a(7840),q=a(6023),z=a(3385),G=a(8233);function U({jobs:e,loading:s,onAddJob:a,onCancelJob:t,onLoadJobs:i,selectedMedia:l,selectedBadgeTypes:n,className:c=""}){let o=e.filter(e=>"running"===e.status),h=e.filter(e=>"pending"===e.status),u=e.filter(e=>"completed"===e.status),g=e.filter(e=>"failed"===e.status),j=async()=>{l&&0!==n.length&&a&&await a([l],n)},v=async()=>{0!==n.length&&a&&console.log("Batch processing not yet implemented")},f=e=>({preview:"Preview",apply:"Apply Changes",batch:"Batch Processing",badge_processing:"Badge Processing"})[e]||e,b=e=>{switch(e){case"pending":return"bg-yellow-500";case"running":return"bg-blue-500";case"completed":return"bg-green-500";case"failed":return"bg-red-500";default:return"bg-gray-500"}};return(0,r.jsxs)(d.Zp,{className:c,children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(L.A,{className:"h-5 w-5"}),"Processing Controls"]}),(0,r.jsx)(d.BT,{children:"Apply changes to Jellyfin and manage processing queue (coming soon)"})]}),(0,r.jsxs)(d.Wu,{className:"space-y-6",children:[(0,r.jsxs)(w.Fc,{children:[(0,r.jsx)(B.A,{className:"h-4 w-4"}),(0,r.jsx)(w.TN,{children:"Processing controls are coming in a future update. Currently focused on preview functionality."})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h4",{className:"text-sm font-medium",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)(m.$,{variant:"outline",onClick:j,disabled:!l||0===n.length,className:"h-auto py-3 flex-col gap-1",children:[(0,r.jsx)(q.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"text-xs",children:"Apply to Selected"})]}),(0,r.jsxs)(m.$,{variant:"outline",onClick:v,disabled:0===n.length,className:"h-auto py-3 flex-col gap-1",children:[(0,r.jsx)(p.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"text-xs",children:"Batch Process"})]})]})]}),(0,r.jsx)(F.w,{}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h4",{className:"text-sm font-medium",children:"Queue Status"}),(0,r.jsx)(m.$,{variant:"ghost",size:"sm",onClick:i,disabled:s,children:s?(0,r.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-background border-t-foreground"}):"Refresh"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:o.length}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"Active"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:h.length}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"Pending"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:u.length}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"Completed"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-red-600",children:g.length}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"Failed"})]})]})]}),o.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F.w,{}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h4",{className:"text-sm font-medium",children:"Active Jobs"}),(0,r.jsx)("div",{className:"space-y-2",children:o.map(e=>(0,r.jsxs)("div",{className:"p-3 border rounded-lg space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:`w-2 h-2 rounded-full ${b(e.status)}`}),(0,r.jsx)("span",{className:"text-sm font-medium",children:f(e.type)})]}),(0,r.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>t?.(e.id),children:(0,r.jsx)(z.A,{className:"h-4 w-4"})})]}),(0,r.jsx)($.k,{value:e.progress,className:"h-1"}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,r.jsxs)("span",{children:[e.progress,"% complete"]}),(0,r.jsxs)("span",{children:[e.media_ids.length," items"]})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:e.badge_types.map(e=>(0,r.jsx)(x.E,{variant:"secondary",className:"text-xs",children:e},e))})]},e.id))})]})]}),(u.length>0||g.length>0)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F.w,{}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h4",{className:"text-sm font-medium",children:"Recent Jobs"}),(0,r.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[...u,...g].sort((e,s)=>new Date(s.updated_at).getTime()-new Date(e.updated_at).getTime()).slice(0,5).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:`w-2 h-2 rounded-full ${b(e.status)}`}),(0,r.jsx)("span",{children:f(e.type)}),(0,r.jsxs)(x.E,{variant:"outline",className:"text-xs",children:[e.media_ids.length," items"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["completed"===e.status&&(0,r.jsx)(m.$,{variant:"ghost",size:"sm",children:(0,r.jsx)(y.A,{className:"h-4 w-4"})}),(0,r.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>t?.(e.id),children:(0,r.jsx)(G.A,{className:"h-4 w-4"})})]})]},e.id))})]})]}),0===e.length&&!s&&(0,r.jsx)("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No processing jobs found"})]})]})}var J=a(3861),O=a(5583);function D(){let{loading:e,data:s,loadPreviewData:a}=function(){let[e,s]=(0,t.useState)(!1),[a,r]=(0,t.useState)(n),i=async()=>{s(!0);try{console.log("Loading preview page data...");let e=await fetch("http://localhost:8000/api/v1/preview/badge-types"),s=await e.json();console.log("Loaded preview data:",{badgeTypesData:s}),r(e=>({...e,availableBadgeTypes:s.success?s.badgeTypes:n.availableBadgeTypes})),console.log("Preview page data loaded successfully")}catch(e){console.error("Error loading preview page data:",e),c.oR.error("Failed to load preview information",{description:e instanceof Error?e.message:"Unknown error occurred",duration:5e3})}finally{s(!1)}},l=async()=>{await i()};return{loading:e,data:a,loadPreviewData:i,refreshData:l,setData:r}}(),{selectedBadgeTypes:i,isGenerating:d,currentPreview:o,generatePreview:m,toggleBadgeType:x}=function(){let[e,s]=(0,t.useState)(["audio","resolution"]),[a,r]=(0,t.useState)(!1),[i,l]=(0,t.useState)({}),n=async()=>{if(0===e.length)return c.oR.error("Please select at least one badge type"),!1;r(!0),l({error:void 0,previewUrl:void 0});try{let s=await fetch("http://localhost:8000/api/v1/preview/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({badgeTypes:e})}),a=await s.json();if(!a.success)return l({error:a.message||"Failed to generate preview"}),c.oR.error(a.message||"Failed to generate preview"),!1;{l({previewUrl:a.posterUrl,sourcePoster:"Random Selection",error:void 0});let s=a.appliedBadges?.length||e.length,r=a.processingTime||0;return c.oR.success(`Preview generated with ${s} badges (${r.toFixed(2)}s)`),!0}}catch(s){console.error("Error generating preview:",s);let e=s instanceof Error?s.message:"Failed to generate preview";return l({error:e}),c.oR.error(e),!1}finally{r(!1)}};return{selectedBadgeTypes:e,isGenerating:a,currentPreview:i,generatePreview:n,toggleBadgeType:e=>{s(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},clearPreview:()=>{l({})},setSelectedBadgeTypes:s}}(),{libraries:p,selectedLibrary:h,mediaItems:g,selectedMedia:j,loading:v,loadLibraries:f,loadMedia:y,selectLibrary:b,selectMedia:w}=function(){let[e,s]=(0,t.useState)([]),[a,r]=(0,t.useState)(""),[i,l]=(0,t.useState)([]),[n,d]=(0,t.useState)(""),[o,m]=(0,t.useState)({libraries:!1,media:!1}),x=async(e={})=>{if(a||e.library_id){m(e=>({...e,media:!0}));try{let s=new URLSearchParams,r=e.library_id||a;r&&s.set("library_id",r),e.search&&s.set("search",e.search),e.page&&s.set("page",e.page.toString()),e.limit&&s.set("limit",e.limit.toString());let t=await fetch(`http://localhost:8000/api/v1/preview/media?${s}`),i=await t.json();i.success?l(i.media||[]):c.oR.error("Failed to load media items")}catch(e){console.error("Error loading media:",e),c.oR.error("Error loading media items")}finally{m(e=>({...e,media:!1}))}}};return{libraries:e,selectedLibrary:a,mediaItems:i,selectedMedia:n,loading:o,loadLibraries:async()=>{m(e=>({...e,libraries:!0}));try{let e=await fetch("http://localhost:8000/api/v1/preview/libraries"),a=await e.json();a.success?s(a.libraries||[]):c.oR.error("Failed to load libraries")}catch(e){console.error("Error loading libraries:",e),c.oR.error("Error loading libraries")}finally{m(e=>({...e,libraries:!1}))}},loadMedia:x,selectLibrary:e=>{r(e),d(""),l([]),e&&x({library_id:e})},selectMedia:e=>{d(e)}}}(),{jobs:N,loading:A,loadJobs:P,addJob:S,cancelJob:E}=function(){let[e,s]=(0,t.useState)([]),[a,r]=(0,t.useState)(!1),i=async()=>{r(!0);try{let e=await fetch("http://localhost:8000/api/v1/jobs?status=pending,running"),a=await e.json();a.success&&s(a.jobs||[])}catch(e){console.error("Error loading jobs:",e)}finally{r(!1)}},l=async(e,s)=>{try{let a=await fetch("http://localhost:8000/api/v1/jobs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({media_ids:e,job_type:"badge_processing",parameters:{badge_types:s}})}),r=await a.json();if(r.success)return c.oR.success("Job added to queue"),await i(),!0;return c.oR.error(r.message||"Failed to add job"),!1}catch(e){return console.error("Error adding job:",e),c.oR.error("Error adding job to queue"),!1}},n=async e=>{try{let s=await fetch(`http://localhost:8000/api/v1/jobs/${e}`,{method:"DELETE"}),a=await s.json();if(a.success)return c.oR.success("Job cancelled"),await i(),!0;return c.oR.error(a.message||"Failed to cancel job"),!1}catch(e){return console.error("Error cancelling job:",e),c.oR.error("Error cancelling job"),!1}};return{jobs:e,loading:a,loadJobs:i,addJob:l,cancelJob:n}}();return(0,r.jsxs)("div",{className:"container mx-auto py-6 space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Preview"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Generate poster previews with badges to see how they'll look before applying changes"})]}),(0,r.jsxs)(l.tU,{defaultValue:"simple",className:"space-y-6",children:[(0,r.jsxs)(l.j7,{className:"grid w-full grid-cols-2",children:[(0,r.jsxs)(l.Xi,{value:"simple",className:"flex items-center gap-2",children:[(0,r.jsx)(J.A,{className:"h-4 w-4"}),"Simple Preview"]}),(0,r.jsxs)(l.Xi,{value:"advanced",className:"flex items-center gap-2",children:[(0,r.jsx)(O.A,{className:"h-4 w-4"}),"Advanced Mode"]})]}),(0,r.jsx)(l.av,{value:"simple",className:"space-y-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsx)(u,{availableBadgeTypes:s.availableBadgeTypes,selectedBadgeTypes:i,onToggleBadgeType:x,onGeneratePreview:m,isGenerating:d})}),(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsx)(k,{isGenerating:d,previewUrl:o.previewUrl,sourcePoster:o.sourcePoster,selectedBadgeTypes:i,error:o.error})})]})}),(0,r.jsx)(l.av,{value:"advanced",className:"space-y-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(M,{libraries:p,selectedLibrary:h,mediaItems:g,selectedMedia:j,loading:v,onSelectLibrary:b,onSelectMedia:w,onLoadLibraries:f,onLoadMedia:y}),(0,r.jsx)(u,{availableBadgeTypes:s.availableBadgeTypes,selectedBadgeTypes:i,onToggleBadgeType:x,onGeneratePreview:m,isGenerating:d})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(k,{isGenerating:d,previewUrl:o.previewUrl,sourcePoster:o.sourcePoster,selectedBadgeTypes:i,error:o.error}),(0,r.jsx)(U,{jobs:N,loading:A,onAddJob:S,onCancelJob:E,onLoadJobs:P,selectedMedia:j,selectedBadgeTypes:i})]})]})})]})]})}},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[447,982,658,533,440,343,612],()=>a(1651));module.exports=r})();