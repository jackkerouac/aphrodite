(()=>{var e={};e.id=547,e.ids=[547],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1860:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2688).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2369:(e,s,t)=>{"use strict";t.d(s,{b:()=>d});var a=t(3210),r=t(4163),n=t(687),i="horizontal",l=["horizontal","vertical"],c=a.forwardRef((e,s)=>{var t;let{decorative:a,orientation:c=i,...d}=e,o=(t=c,l.includes(t))?c:i;return(0,n.jsx)(r.sG.div,{"data-orientation":o,...a?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"},...d,ref:s})});c.displayName="Separator";var d=c},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3503:(e,s,t)=>{"use strict";t.d(s,{Cf:()=>u,Es:()=>p,L3:()=>m,c7:()=>h,lG:()=>l,rr:()=>x,zM:()=>c});var a=t(687);t(3210);var r=t(6134),n=t(1860),i=t(4780);function l({...e}){return(0,a.jsx)(r.bL,{"data-slot":"dialog",...e})}function c({...e}){return(0,a.jsx)(r.l9,{"data-slot":"dialog-trigger",...e})}function d({...e}){return(0,a.jsx)(r.ZL,{"data-slot":"dialog-portal",...e})}function o({className:e,...s}){return(0,a.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...s})}function u({className:e,children:s,showCloseButton:t=!0,...l}){return(0,a.jsxs)(d,{"data-slot":"dialog-portal",children:[(0,a.jsx)(o,{}),(0,a.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...l,children:[s,t&&(0,a.jsxs)(r.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(n.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function h({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,i.cn)("flex flex-col gap-2 text-center sm:text-left",e),...s})}function p({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"dialog-footer",className:(0,i.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...s})}function m({className:e,...s}){return(0,a.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,i.cn)("text-lg leading-none font-semibold",e),...s})}function x({className:e,...s}){return(0,a.jsx)(r.VY,{"data-slot":"dialog-description",className:(0,i.cn)("text-muted-foreground text-sm",e),...s})}},3613:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2688).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3873:e=>{"use strict";e.exports=require("path")},4298:(e,s,t)=>{"use strict";t.d(s,{Ay:()=>l,Kp:()=>i});let a="http://localhost:8000";class r extends Error{constructor(e,s,t){super(e),this.status=s,this.response=t,this.name="ApiError"}}async function n(e){if(!e.ok){let s=`HTTP ${e.status}: ${e.statusText}`;try{let t=await e.json();s=t.error||t.message||s}catch{}throw new r(s,e.status)}try{return await e.json()}catch{return{}}}let i={getConfig:async e=>n(await fetch(`${a}/api/v1/config/${e}`)),updateConfig:async(e,s)=>n(await fetch(`${a}/api/v1/config/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})),getConfigFiles:async()=>n(await fetch(`${a}/api/v1/config/files`)),testJellyfinConnection:async e=>n(await fetch(`${a}/api/v1/config/test-jellyfin`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),testConnection:async(e,s)=>n(await fetch(`${a}/api/v1/config/test-${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})),getSystemStatus:async()=>n(await fetch(`${a}/health/detailed`)),getSystemConfig:async()=>n(await fetch(`${a}/api/v1/config/system`)),getPreviewBadgeTypes:async()=>n(await fetch(`${a}/api/v1/preview/badge-types`)),generatePreview:async e=>n(await fetch(`${a}/api/v1/preview/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),getPreviewLibraries:async()=>n(await fetch(`${a}/api/v1/preview/libraries`)),async getPreviewMedia(e){let s=new URLSearchParams;e?.library_id&&s.set("library_id",e.library_id),e?.search&&s.set("search",e.search),e?.page&&s.set("page",e.page.toString()),e?.limit&&s.set("limit",e.limit.toString());let t=`${a}/api/v1/preview/media${s.toString()?"?"+s.toString():""}`;return n(await fetch(t))},async getMedia(e){let s=new URLSearchParams;e?.page&&s.set("page",e.page.toString()),e?.per_page&&s.set("per_page",e.per_page.toString()),e?.search&&s.set("search",e.search),e?.media_type&&s.set("media_type",e.media_type);let t=`${a}/api/v1/media${s.toString()?"?"+s.toString():""}`;return n(await fetch(t))},getMediaItem:async e=>n(await fetch(`${a}/api/v1/media/${e}`)),scanLibrary:async()=>n(await fetch(`${a}/api/v1/media/scan`,{method:"POST"})),async getJobs(e){let s=new URLSearchParams;e?.page&&s.set("page",e.page.toString()),e?.per_page&&s.set("per_page",e.per_page.toString()),e?.status&&s.set("status",e.status);let t=`${a}/api/v1/jobs${s.toString()?"?"+s.toString():""}`;return n(await fetch(t))},createJob:async e=>n(await fetch(`${a}/api/v1/jobs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),getJob:async e=>n(await fetch(`${a}/api/v1/jobs/${e}`)),async getSchedules(e){let s=new URLSearchParams;e?.skip&&s.set("skip",e.skip.toString()),e?.limit&&s.set("limit",e.limit.toString());let t=`${a}/api/v1/schedules${s.toString()?"?"+s.toString():""}`;return n(await fetch(t))},createSchedule:async e=>n(await fetch(`${a}/api/v1/schedules`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),updateSchedule:async(e,s)=>n(await fetch(`${a}/api/v1/schedules/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})),deleteSchedule:async e=>n(await fetch(`${a}/api/v1/schedules/${e}`,{method:"DELETE"})),async getScheduleHistory(e){let s=new URLSearchParams;e?.skip&&s.set("skip",e.skip.toString()),e?.limit&&s.set("limit",e.limit.toString()),e?.schedule_id&&s.set("schedule_id",e.schedule_id),e?.status&&s.set("status",e.status);let t=`${a}/api/v1/schedules/executions/history${s.toString()?"?"+s.toString():""}`;return n(await fetch(t))},executeSchedule:async e=>n(await fetch(`${a}/api/v1/schedules/${e}/execute`,{method:"POST"})),getScheduleBadgeTypes:async()=>n(await fetch(`${a}/api/v1/schedules/config/badge-types`)),getScheduleCronPresets:async()=>n(await fetch(`${a}/api/v1/schedules/config/cron-presets`)),getScheduleLibraries:async()=>n(await fetch(`${a}/api/v1/schedules/config/libraries`)),getAnalyticsOverview:async()=>n(await fetch(`${a}/api/v1/analytics/overview`)),getJobStatusDistribution:async()=>n(await fetch(`${a}/api/v1/analytics/jobs/status-distribution`)),getProcessingTrends:async(e=30)=>n(await fetch(`${a}/api/v1/analytics/jobs/trends?days=${e}`)),getJobTypeDistribution:async()=>n(await fetch(`${a}/api/v1/analytics/jobs/types`)),getScheduleAnalytics:async()=>n(await fetch(`${a}/api/v1/analytics/schedules`)),getSystemPerformance:async()=>n(await fetch(`${a}/api/v1/analytics/performance`))},l=i},4661:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"E:\\\\programming\\\\aphrodite\\\\frontend\\\\src\\\\app\\\\schedules\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"E:\\programming\\aphrodite\\frontend\\src\\app\\schedules\\page.tsx","default")},5155:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>o,routeModule:()=>h,tree:()=>d});var a=t(5239),r=t(8088),n=t(8170),i=t.n(n),l=t(893),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d={children:["",{children:["schedules",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,4661)),"E:\\programming\\aphrodite\\frontend\\src\\app\\schedules\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,4431)),"E:\\programming\\aphrodite\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,o=["E:\\programming\\aphrodite\\frontend\\src\\app\\schedules\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/schedules/page",pathname:"/schedules",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5950:(e,s,t)=>{"use strict";t.d(s,{w:()=>i});var a=t(687);t(3210);var r=t(2369),n=t(4780);function i({className:e,orientation:s="horizontal",decorative:t=!0,...i}){return(0,a.jsx)(r.b,{"data-slot":"separator",decorative:t,orientation:s,className:(0,n.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...i})}},6134:(e,s,t)=>{"use strict";t.d(s,{UC:()=>et,VY:()=>er,ZL:()=>ee,bL:()=>Y,bm:()=>en,hE:()=>ea,hJ:()=>es,l9:()=>Q});var a=t(3210),r=t(569),n=t(8599),i=t(1273),l=t(6963),c=t(5551),d=t(1355),o=t(2547),u=t(5028),h=t(6059),p=t(4163),m=t(1359),x=t(2247),g=t(3376),f=t(8730),j=t(687),y="Dialog",[v,b]=(0,i.A)(y),[N,w]=v(y),S=e=>{let{__scopeDialog:s,children:t,open:r,defaultOpen:n,onOpenChange:i,modal:d=!0}=e,o=a.useRef(null),u=a.useRef(null),[h,p]=(0,c.i)({prop:r,defaultProp:n??!1,onChange:i,caller:y});return(0,j.jsx)(N,{scope:s,triggerRef:o,contentRef:u,contentId:(0,l.B)(),titleId:(0,l.B)(),descriptionId:(0,l.B)(),open:h,onOpenChange:p,onOpenToggle:a.useCallback(()=>p(e=>!e),[p]),modal:d,children:t})};S.displayName=y;var C="DialogTrigger",_=a.forwardRef((e,s)=>{let{__scopeDialog:t,...a}=e,i=w(C,t),l=(0,n.s)(s,i.triggerRef);return(0,j.jsx)(p.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":U(i.open),...a,ref:l,onClick:(0,r.m)(e.onClick,i.onOpenToggle)})});_.displayName=C;var A="DialogPortal",[k,$]=v(A,{forceMount:void 0}),P=e=>{let{__scopeDialog:s,forceMount:t,children:r,container:n}=e,i=w(A,s);return(0,j.jsx)(k,{scope:s,forceMount:t,children:a.Children.map(r,e=>(0,j.jsx)(h.C,{present:t||i.open,children:(0,j.jsx)(u.Z,{asChild:!0,container:n,children:e})}))})};P.displayName=A;var R="DialogOverlay",E=a.forwardRef((e,s)=>{let t=$(R,e.__scopeDialog),{forceMount:a=t.forceMount,...r}=e,n=w(R,e.__scopeDialog);return n.modal?(0,j.jsx)(h.C,{present:a||n.open,children:(0,j.jsx)(D,{...r,ref:s})}):null});E.displayName=R;var T=(0,f.TL)("DialogOverlay.RemoveScroll"),D=a.forwardRef((e,s)=>{let{__scopeDialog:t,...a}=e,r=w(R,t);return(0,j.jsx)(x.A,{as:T,allowPinchZoom:!0,shards:[r.contentRef],children:(0,j.jsx)(p.sG.div,{"data-state":U(r.open),...a,ref:s,style:{pointerEvents:"auto",...a.style}})})}),M="DialogContent",F=a.forwardRef((e,s)=>{let t=$(M,e.__scopeDialog),{forceMount:a=t.forceMount,...r}=e,n=w(M,e.__scopeDialog);return(0,j.jsx)(h.C,{present:a||n.open,children:n.modal?(0,j.jsx)(O,{...r,ref:s}):(0,j.jsx)(L,{...r,ref:s})})});F.displayName=M;var O=a.forwardRef((e,s)=>{let t=w(M,e.__scopeDialog),i=a.useRef(null),l=(0,n.s)(s,t.contentRef,i);return a.useEffect(()=>{let e=i.current;if(e)return(0,g.Eq)(e)},[]),(0,j.jsx)(z,{...e,ref:l,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,r.m)(e.onCloseAutoFocus,e=>{e.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:(0,r.m)(e.onPointerDownOutside,e=>{let s=e.detail.originalEvent,t=0===s.button&&!0===s.ctrlKey;(2===s.button||t)&&e.preventDefault()}),onFocusOutside:(0,r.m)(e.onFocusOutside,e=>e.preventDefault())})}),L=a.forwardRef((e,s)=>{let t=w(M,e.__scopeDialog),r=a.useRef(!1),n=a.useRef(!1);return(0,j.jsx)(z,{...e,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{e.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||t.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,n.current=!1},onInteractOutside:s=>{e.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,"pointerdown"===s.detail.originalEvent.type&&(n.current=!0));let a=s.target;t.triggerRef.current?.contains(a)&&s.preventDefault(),"focusin"===s.detail.originalEvent.type&&n.current&&s.preventDefault()}})}),z=a.forwardRef((e,s)=>{let{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:l,...c}=e,u=w(M,t),h=a.useRef(null),p=(0,n.s)(s,h);return(0,m.Oh)(),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(o.n,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:l,children:(0,j.jsx)(d.qW,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":U(u.open),...c,ref:p,onDismiss:()=>u.onOpenChange(!1)})}),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(V,{titleId:u.titleId}),(0,j.jsx)(X,{contentRef:h,descriptionId:u.descriptionId})]})]})}),J="DialogTitle",I=a.forwardRef((e,s)=>{let{__scopeDialog:t,...a}=e,r=w(J,t);return(0,j.jsx)(p.sG.h2,{id:r.titleId,...a,ref:s})});I.displayName=J;var q="DialogDescription",B=a.forwardRef((e,s)=>{let{__scopeDialog:t,...a}=e,r=w(q,t);return(0,j.jsx)(p.sG.p,{id:r.descriptionId,...a,ref:s})});B.displayName=q;var W="DialogClose",Z=a.forwardRef((e,s)=>{let{__scopeDialog:t,...a}=e,n=w(W,t);return(0,j.jsx)(p.sG.button,{type:"button",...a,ref:s,onClick:(0,r.m)(e.onClick,()=>n.onOpenChange(!1))})});function U(e){return e?"open":"closed"}Z.displayName=W;var G="DialogTitleWarning",[H,K]=(0,i.q)(G,{contentName:M,titleName:J,docsSlug:"dialog"}),V=({titleId:e})=>{let s=K(G),t=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return a.useEffect(()=>{e&&(document.getElementById(e)||console.error(t))},[t,e]),null},X=({contentRef:e,descriptionId:s})=>{let t=K("DialogDescriptionWarning"),r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${t.contentName}}.`;return a.useEffect(()=>{let t=e.current?.getAttribute("aria-describedby");s&&t&&(document.getElementById(s)||console.warn(r))},[r,e,s]),null},Y=S,Q=_,ee=P,es=E,et=F,ea=I,er=B,en=Z},7840:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2688).A)("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},8122:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2688).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},8346:(e,s,t)=>{Promise.resolve().then(t.bind(t,9180))},8434:(e,s,t)=>{Promise.resolve().then(t.bind(t,4661))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9180:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>F});var a=t(687),r=t(3210),n=t(5763),i=t(9523),l=t(4493),c=t(6834),d=t(7479),o=t(3503),u=t(6474),h=t(6349),p=t(7840),m=t(2688);let x=(0,m.A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var g=t(8233),f=t(4298),j=t(2581);function y({onCreateSchedule:e,onEditSchedule:s}){let[t,n]=(0,r.useState)([]),[m,y]=(0,r.useState)(!0),[v,b]=(0,r.useState)(!1),[N,w]=(0,r.useState)(null),[S,C]=(0,r.useState)(!1),_=async()=>{try{y(!0);let e=await f.Kp.getSchedules();n(e)}catch(e){console.error("Failed to fetch schedules:",e),j.oR.error("Failed to load schedules")}finally{y(!1)}},A=async e=>{try{await f.Kp.updateSchedule(e.id,{enabled:!e.enabled}),await _(),j.oR.success(`Schedule ${!e.enabled?"enabled":"disabled"}`)}catch(e){console.error("Failed to toggle schedule:",e),j.oR.error("Failed to update schedule")}},k=async e=>{w(e),b(!0)},$=async()=>{if(N)try{C(!0),await f.Kp.deleteSchedule(N.id),await _(),j.oR.success("Schedule deleted successfully")}catch(e){console.error("Failed to delete schedule:",e),j.oR.error("Failed to delete schedule")}finally{C(!1),b(!1),w(null)}},P=async e=>{try{await f.Kp.executeSchedule(e.id),j.oR.success("Schedule execution started")}catch(e){console.error("Failed to execute schedule:",e),j.oR.error("Failed to execute schedule")}},R=e=>({"0 * * * *":"Every hour","0 2 * * *":"Daily at 2:00 AM","0 2 * * 0":"Weekly (Sunday 2:00 AM)","0 2 1 * *":"Monthly (1st day 2:00 AM)","0 */6 * * *":"Every 6 hours","0 2 * * 1-5":"Weekdays at 2:00 AM","0 2 * * 6,0":"Weekends at 2:00 AM","0 2,14 * * *":"Twice daily (2:00 AM & 2:00 PM)"})[e]||e;return m?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Active Schedules"}),(0,a.jsxs)(i.$,{onClick:e,disabled:!0,children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Create Schedule"]})]}),(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(h.A,{className:"h-8 w-8 mx-auto mb-2 animate-spin"}),(0,a.jsx)("p",{children:"Loading schedules..."})]})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Active Schedules"}),(0,a.jsxs)(i.$,{onClick:e,children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Create Schedule"]})]}),0===t.length?(0,a.jsx)(l.Zp,{children:(0,a.jsxs)(l.Wu,{className:"text-center py-8",children:[(0,a.jsx)(h.A,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No schedules found"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"Create your first schedule to automate poster processing"}),(0,a.jsxs)(i.$,{onClick:e,children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Create Schedule"]})]})}):(0,a.jsx)("div",{className:"grid gap-4",children:t.map(e=>(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[e.name,(0,a.jsx)(c.E,{variant:e.enabled?"default":"secondary",children:e.enabled?"Enabled":"Disabled"})]}),(0,a.jsxs)(l.BT,{children:[R(e.cron_expression)," • ",e.timezone]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.d,{checked:e.enabled,onCheckedChange:()=>A(e)}),(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>P(e),disabled:!e.enabled,children:(0,a.jsx)(p.A,{className:"h-4 w-4"})}),(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>s(e),children:(0,a.jsx)(x,{className:"h-4 w-4"})}),(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>k(e),children:(0,a.jsx)(g.A,{className:"h-4 w-4"})})]})]})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Badge Types: "}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:e.badge_types.length>0?e.badge_types.join(", "):"None"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Target Libraries: "}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:e.target_libraries.length>0?`${e.target_libraries.length} selected`:"All libraries"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Reprocess All: "}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:e.reprocess_all?"Yes":"No"})]})]})})]},e.id))}),(0,a.jsx)(o.lG,{open:v,onOpenChange:b,children:(0,a.jsxs)(o.Cf,{children:[(0,a.jsxs)(o.c7,{children:[(0,a.jsx)(o.L3,{children:"Delete Schedule"}),(0,a.jsxs)(o.rr,{children:['Are you sure you want to delete "',N?.name,'"? This action cannot be undone.']})]}),(0,a.jsxs)(o.Es,{children:[(0,a.jsx)(i.$,{variant:"outline",onClick:()=>{b(!1),w(null)},children:"Cancel"}),(0,a.jsx)(i.$,{variant:"destructive",onClick:$,disabled:S,children:S?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete Schedule"})]})]})})]})}var v=t(5079),b=t(5336),N=t(5071),w=t(8122),S=t(3613);function C(){let[e,s]=(0,r.useState)([]),[t,n]=(0,r.useState)(!0),[d,o]=(0,r.useState)("all"),u=async()=>{try{n(!0);let e={limit:50};"all"!==d&&(e.status=d);let t=await f.Kp.getScheduleHistory(e);s(t)}catch(e){console.error("Failed to fetch schedule history:",e),j.oR.error("Failed to load schedule history")}finally{n(!1)}},p=e=>{switch(e){case"completed":return(0,a.jsx)(b.A,{className:"h-4 w-4 text-green-500"});case"failed":return(0,a.jsx)(N.A,{className:"h-4 w-4 text-red-500"});case"running":return(0,a.jsx)(w.A,{className:"h-4 w-4 text-blue-500 animate-spin"});case"pending":return(0,a.jsx)(h.A,{className:"h-4 w-4 text-yellow-500"});default:return(0,a.jsx)(S.A,{className:"h-4 w-4 text-gray-500"})}},m=e=>{switch(e){case"completed":return"default";case"failed":return"destructive";case"running":default:return"secondary";case"pending":return"outline"}},x=e=>new Date(e).toLocaleString(),g=(e,s)=>{let t=new Date(e),a=Math.round(((s?new Date(s):new Date).getTime()-t.getTime())/1e3);if(a<60)return`${a}s`;{if(a<3600)return`${Math.floor(a/60)}m ${a%60}s`;let e=Math.floor(a/3600),s=Math.floor(a%3600/60);return`${e}h ${s}m`}};return t?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex justify-between items-center",children:(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Schedule History"})}),(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(h.A,{className:"h-8 w-8 mx-auto mb-2 animate-spin"}),(0,a.jsx)("p",{children:"Loading history..."})]})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Schedule History"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(v.l6,{value:d,onValueChange:o,children:[(0,a.jsx)(v.bq,{className:"w-32",children:(0,a.jsx)(v.yv,{})}),(0,a.jsxs)(v.gC,{children:[(0,a.jsx)(v.eb,{value:"all",children:"All Status"}),(0,a.jsx)(v.eb,{value:"completed",children:"Completed"}),(0,a.jsx)(v.eb,{value:"failed",children:"Failed"}),(0,a.jsx)(v.eb,{value:"running",children:"Running"}),(0,a.jsx)(v.eb,{value:"pending",children:"Pending"})]})]}),(0,a.jsxs)(i.$,{variant:"outline",onClick:u,children:[(0,a.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),0===e.length?(0,a.jsx)(l.Zp,{children:(0,a.jsxs)(l.Wu,{className:"text-center py-8",children:[(0,a.jsx)(h.A,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No execution history"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Schedule executions will appear here once they start running"})]})}):(0,a.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2 text-base",children:[p(e.status),"Execution ",e.id.slice(0,8),(0,a.jsx)(c.E,{variant:m(e.status),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),(0,a.jsxs)(l.BT,{children:["Created: ",x(e.created_at)]})]}),(0,a.jsx)("div",{className:"text-right text-sm text-muted-foreground",children:e.started_at&&(0,a.jsxs)("div",{children:["Duration: ",g(e.started_at,e.completed_at)]})})]})}),(0,a.jsx)(l.Wu,{className:"pt-0",children:(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[e.started_at&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Started: "}),(0,a.jsx)("span",{className:"text-muted-foreground",children:x(e.started_at)})]}),e.completed_at&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Completed: "}),(0,a.jsx)("span",{className:"text-muted-foreground",children:x(e.completed_at)})]}),e.items_processed&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Items Processed: "}),(0,a.jsx)("span",{className:"text-muted-foreground",children:e.items_processed})]}),e.error_message&&(0,a.jsxs)("div",{className:"p-2 bg-destructive/10 rounded border",children:[(0,a.jsx)("span",{className:"font-medium text-destructive",children:"Error: "}),(0,a.jsx)("span",{className:"text-destructive text-xs",children:e.error_message})]})]})})]},e.id))})]})}var _=t(9667),A=t(4300),k=t(6896),$=t(5950),P=t(1860);let R=(0,m.A)("circle-help",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var E=t(8819);let T=["UTC","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","America/Toronto","Europe/London","Europe/Berlin","Asia/Tokyo","Australia/Sydney"],D={hourly:{label:"Every Hour",cron:"0 * * * *"},daily_2am:{label:"Daily at 2:00 AM",cron:"0 2 * * *"},weekly:{label:"Weekly (Sunday 2:00 AM)",cron:"0 2 * * 0"},monthly:{label:"Monthly (1st day 2:00 AM)",cron:"0 2 1 * *"},every_6_hours:{label:"Every 6 Hours",cron:"0 */6 * * *"},weekdays_2am:{label:"Weekdays at 2:00 AM",cron:"0 2 * * 1-5"},weekends_2am:{label:"Weekends at 2:00 AM",cron:"0 2 * * 6,0"},twice_daily:{label:"Twice Daily (2:00 AM & 2:00 PM)",cron:"0 2,14 * * *"}};function M({editingSchedule:e,onSave:s,onCancel:t}){let[n,o]=(0,r.useState)({name:"",timezone:"UTC",cron_expression:"0 2 * * *",badge_types:[],reprocess_all:!1,enabled:!0,target_libraries:[]}),[u,p]=(0,r.useState)([]),[m,x]=(0,r.useState)([]),[g,y]=(0,r.useState)("custom"),[b,N]=(0,r.useState)(!1),[w,S]=(0,r.useState)(!1),C=e=>{o(s=>({...s,badge_types:s.badge_types.includes(e)?s.badge_types.filter(s=>s!==e):[...s.badge_types,e]}))},M=e=>{o(s=>({...s,target_libraries:s.target_libraries.includes(e)?s.target_libraries.filter(s=>s!==e):[...s.target_libraries,e]}))},F=async t=>{if(t.preventDefault(),!n.name.trim())return void j.oR.error("Schedule name is required");if(!n.cron_expression.trim())return void j.oR.error("Cron expression is required");try{N(!0),e?(await f.Kp.updateSchedule(e.id,n),j.oR.success("Schedule updated successfully")):(await f.Kp.createSchedule(n),j.oR.success("Schedule created successfully")),s()}catch(e){console.error("Failed to save schedule:",e),j.oR.error("Failed to save schedule")}finally{N(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:e?"Edit Schedule":"Create New Schedule"}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)(i.$,{variant:"outline",onClick:t,children:[(0,a.jsx)(P.A,{className:"h-4 w-4 mr-2"}),"Cancel"]})})]}),(0,a.jsxs)("form",{onSubmit:F,className:"space-y-6",children:[(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Basic Information"}),(0,a.jsx)(l.BT,{children:"Configure the schedule name and timing"})]}),(0,a.jsxs)(l.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.J,{htmlFor:"name",children:"Schedule Name"}),(0,a.jsx)(_.p,{id:"name",placeholder:"Enter schedule name",value:n.name,onChange:e=>o(s=>({...s,name:e.target.value})),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.J,{htmlFor:"timezone",children:"Timezone"}),(0,a.jsxs)(v.l6,{value:n.timezone,onValueChange:e=>o(s=>({...s,timezone:e})),children:[(0,a.jsx)(v.bq,{children:(0,a.jsx)(v.yv,{})}),(0,a.jsx)(v.gC,{children:T.map(e=>(0,a.jsx)(v.eb,{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.J,{children:"Quick Presets"}),(0,a.jsxs)(v.l6,{value:g,onValueChange:e=>{y(e),"custom"!==e&&D[e]&&o(s=>({...s,cron_expression:D[e].cron}))},children:[(0,a.jsx)(v.bq,{children:(0,a.jsx)(v.yv,{})}),(0,a.jsxs)(v.gC,{children:[(0,a.jsx)(v.eb,{value:"custom",children:"Custom Expression"}),Object.entries(D).map(([e,s])=>(0,a.jsx)(v.eb,{value:e,children:s.label},e))]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.J,{htmlFor:"cron",children:"Cron Expression"}),(0,a.jsx)(i.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>S(!w),children:(0,a.jsx)(R,{className:"h-4 w-4"})})]}),(0,a.jsx)(_.p,{id:"cron",placeholder:"0 2 * * *",value:n.cron_expression,onChange:e=>{o(s=>({...s,cron_expression:e.target.value})),y("custom")},required:!0}),w&&(0,a.jsxs)("div",{className:"p-3 bg-muted rounded text-sm",children:[(0,a.jsx)("p",{className:"font-medium mb-2",children:"Cron Expression Format:"}),(0,a.jsx)("p",{className:"font-mono",children:"minute hour day month weekday"}),(0,a.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,a.jsxs)("p",{children:["• ",(0,a.jsx)("code",{children:"0 2 * * *"})," - Daily at 2:00 AM"]}),(0,a.jsxs)("p",{children:["• ",(0,a.jsx)("code",{children:"0 */6 * * *"})," - Every 6 hours"]}),(0,a.jsxs)("p",{children:["• ",(0,a.jsx)("code",{children:"0 2 * * 1-5"})," - Weekdays at 2:00 AM"]}),(0,a.jsxs)("p",{children:["• ",(0,a.jsx)("code",{children:"0 2 1 * *"})," - Monthly on 1st day at 2:00 AM"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.d,{id:"enabled",checked:n.enabled,onCheckedChange:e=>o(s=>({...s,enabled:e}))}),(0,a.jsx)(A.J,{htmlFor:"enabled",children:"Enable Schedule"})]})]})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Processing Options"}),(0,a.jsx)(l.BT,{children:"Configure what will be processed when the schedule runs"})]}),(0,a.jsxs)(l.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(A.J,{children:"Badge Types to Apply"}),0===u.length?(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)(h.A,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading badge types..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:u.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(k.S,{id:`badge-${e}`,checked:n.badge_types.includes(e),onCheckedChange:()=>C(e)}),(0,a.jsx)(A.J,{htmlFor:`badge-${e}`,className:"capitalize",children:e})]},e))}),0===n.badge_types.length&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No badge types selected. Schedule will not process any items."})]})]}),(0,a.jsx)($.w,{}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.d,{id:"reprocess_all",checked:n.reprocess_all,onCheckedChange:e=>o(s=>({...s,reprocess_all:e}))}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(A.J,{htmlFor:"reprocess_all",children:"Reprocess All Items"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"When enabled, processes all items regardless of existing 'aphrodite-overlay' metadata"})]})]})]})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Target Libraries"}),(0,a.jsx)(l.BT,{children:"Select which Jellyfin libraries to process (leave all unchecked to process all libraries)"})]}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[0===m.length?(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)(h.A,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading libraries..."}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"If this persists, check that Jellyfin is configured and running"})]}):(0,a.jsx)("div",{className:"space-y-2",children:m.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(k.S,{id:`library-${e.id}`,checked:n.target_libraries.includes(e.id),onCheckedChange:()=>M(e.id)}),(0,a.jsxs)(A.J,{htmlFor:`library-${e.id}`,className:"flex items-center gap-2",children:[e.name,(0,a.jsx)(c.E,{variant:"outline",className:"text-xs",children:e.type})]})]},e.id))}),0===n.target_libraries.length&&m.length>0&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"No libraries selected. Schedule will process all movie and TV show libraries."})]})})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(i.$,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),(0,a.jsx)(i.$,{type:"submit",disabled:b,children:b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.A,{className:"h-4 w-4 mr-2"}),e?"Update Schedule":"Create Schedule"]})})]})]})]})}function F(){let[e,s]=(0,r.useState)("schedules"),[t,i]=(0,r.useState)(null);return(0,a.jsxs)("div",{className:"container mx-auto p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Schedules"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"Manage automated poster processing schedules"})]}),(0,a.jsxs)(n.tU,{value:e,onValueChange:s,className:"space-y-6",children:[(0,a.jsxs)(n.j7,{children:[(0,a.jsx)(n.Xi,{value:"schedules",children:"Schedules"}),(0,a.jsx)(n.Xi,{value:"history",children:"History"}),(0,a.jsx)(n.Xi,{value:"editor",children:t?"Edit Schedule":"Create Schedule"})]}),(0,a.jsx)(n.av,{value:"schedules",children:(0,a.jsx)(y,{onCreateSchedule:()=>{i(null),s("editor")},onEditSchedule:e=>{i(e),s("editor")}})}),(0,a.jsx)(n.av,{value:"history",children:(0,a.jsx)(C,{})}),(0,a.jsx)(n.av,{value:"editor",children:(0,a.jsx)(M,{editingSchedule:t,onSave:()=>{i(null),s("schedules")},onCancel:()=>{i(null),s("schedules")}})})]})]})}},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[447,982,658,533,343,213],()=>t(5155));module.exports=a})();