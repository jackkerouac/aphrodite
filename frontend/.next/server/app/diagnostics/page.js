(()=>{var e={};e.id=149,e.ids=[149],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5336:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(62688).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12007:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"E:\\\\programming\\\\aphrodite\\\\frontend\\\\src\\\\app\\\\diagnostics\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"E:\\programming\\aphrodite\\frontend\\src\\app\\diagnostics\\page.tsx","default")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21228:(e,s,a)=>{Promise.resolve().then(a.bind(a,33334))},23385:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(62688).A)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29844:(e,s,a)=>{"use strict";a.d(s,{tU:()=>D,av:()=>S,j7:()=>E,Xi:()=>R});var t=a(60687),i=a(43210),r=a(70569),l=a(11273),n=a(72942),d=a(46059),c=a(14163),o=a(43),m=a(65551),u=a(96963),x="Tabs",[h,p]=(0,l.A)(x,[n.RG]),j=(0,n.RG)(),[f,g]=h(x),b=i.forwardRef((e,s)=>{let{__scopeTabs:a,value:i,onValueChange:r,defaultValue:l,orientation:n="horizontal",dir:d,activationMode:h="automatic",...p}=e,j=(0,o.jH)(d),[g,b]=(0,m.i)({prop:i,onChange:r,defaultProp:l??"",caller:x});return(0,t.jsx)(f,{scope:a,baseId:(0,u.B)(),value:g,onValueChange:b,orientation:n,dir:j,activationMode:h,children:(0,t.jsx)(c.sG.div,{dir:j,"data-orientation":n,...p,ref:s})})});b.displayName=x;var v="TabsList",y=i.forwardRef((e,s)=>{let{__scopeTabs:a,loop:i=!0,...r}=e,l=g(v,a),d=j(a);return(0,t.jsx)(n.bL,{asChild:!0,...d,orientation:l.orientation,dir:l.dir,loop:i,children:(0,t.jsx)(c.sG.div,{role:"tablist","aria-orientation":l.orientation,...r,ref:s})})});y.displayName=v;var N="TabsTrigger",w=i.forwardRef((e,s)=>{let{__scopeTabs:a,value:i,disabled:l=!1,...d}=e,o=g(N,a),m=j(a),u=A(o.baseId,i),x=T(o.baseId,i),h=i===o.value;return(0,t.jsx)(n.q7,{asChild:!0,...m,focusable:!l,active:h,children:(0,t.jsx)(c.sG.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":x,"data-state":h?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:u,...d,ref:s,onMouseDown:(0,r.m)(e.onMouseDown,e=>{l||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(i)}),onKeyDown:(0,r.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(i)}),onFocus:(0,r.m)(e.onFocus,()=>{let e="manual"!==o.activationMode;h||l||!e||o.onValueChange(i)})})})});w.displayName=N;var _="TabsContent",k=i.forwardRef((e,s)=>{let{__scopeTabs:a,value:r,forceMount:l,children:n,...o}=e,m=g(_,a),u=A(m.baseId,r),x=T(m.baseId,r),h=r===m.value,p=i.useRef(h);return i.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(d.C,{present:l||h,children:({present:a})=>(0,t.jsx)(c.sG.div,{"data-state":h?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":u,hidden:!a,id:x,tabIndex:0,...o,ref:s,style:{...e.style,animationDuration:p.current?"0s":void 0},children:a&&n})})});function A(e,s){return`${e}-trigger-${s}`}function T(e,s){return`${e}-content-${s}`}k.displayName=_;var C=a(4780);function D({className:e,...s}){return(0,t.jsx)(b,{"data-slot":"tabs",className:(0,C.cn)("flex flex-col gap-2",e),...s})}function E({className:e,...s}){return(0,t.jsx)(y,{"data-slot":"tabs-list",className:(0,C.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...s})}function R({className:e,...s}){return(0,t.jsx)(w,{"data-slot":"tabs-trigger",className:(0,C.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...s})}function S({className:e,...s}){return(0,t.jsx)(k,{"data-slot":"tabs-content",className:(0,C.cn)("flex-1 outline-none",e),...s})}},31158:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(62688).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},33334:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>N});var t=a(60687),i=a(43210),r=a(44493),l=a(29523),n=a(96834),d=a(91821),c=a(29844),o=a(89667),m=a(54300),u=a(43649),x=a(5336),h=a(35071),p=a(41862),j=a(78122),f=a(48210),g=a(23385),b=a(97840),v=a(31158);function y(){let[e,s]=(0,i.useState)(null),[a,c]=(0,i.useState)(30),[y,N]=(0,i.useState)(null),[w,_]=(0,i.useState)({}),k=async()=>{_(e=>({...e,status:!0}));try{let e=await fetch("/api/v1/batch-debug/status"),a=await e.json();s(a)}catch(e){console.error("Failed to load debug status:",e),s(null)}finally{_(e=>({...e,status:!1}))}},A=async()=>{_(e=>({...e,enable:!0}));try{(await fetch("/api/v1/batch-debug/enable",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({duration_minutes:a})})).ok?await k():console.error("Failed to enable debug mode")}catch(e){console.error("Error enabling debug mode:",e)}finally{_(e=>({...e,enable:!1}))}},T=async()=>{_(e=>({...e,disable:!0}));try{(await fetch("/api/v1/batch-debug/disable",{method:"POST"})).ok?await k():console.error("Failed to disable debug mode")}catch(e){console.error("Error disabling debug mode:",e)}finally{_(e=>({...e,disable:!1}))}},C=async e=>{_(s=>({...s,[`summary-${e}`]:!0}));try{let s=await fetch(`/api/v1/batch-debug/job/${e}/summary`),a=await s.json();N(a)}catch(s){console.error(`Failed to load debug summary for job ${e}:`,s),N({success:!1,error:"Failed to load debug summary"})}finally{_(s=>({...s,[`summary-${e}`]:!1}))}},D=async(e,s)=>{try{let a=await fetch(`/api/v1/batch-debug/job/${e}/full-log`);if(a.ok){let e=await a.blob(),t=window.URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download=s,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(t),document.body.removeChild(i)}else console.error("Failed to download debug log")}catch(e){console.error("Error downloading debug log:",e)}},E=async(e=7)=>{_(e=>({...e,cleanup:!0}));try{(await fetch(`/api/v1/batch-debug/cleanup?days=${e}`,{method:"DELETE"})).ok?await k():console.error("Failed to cleanup debug files")}catch(e){console.error("Error cleaning up debug files:",e)}finally{_(e=>({...e,cleanup:!1}))}},R=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]},S=e=>new Date(e).toLocaleString();return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{children:[(0,t.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(f.A,{className:"h-5 w-5"}),"Batch Processing Debug Mode"]}),(0,t.jsx)(r.BT,{children:"Enable comprehensive logging for batch processing jobs to diagnose connection issues"})]}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Debug Status"}),(0,t.jsx)("div",{className:"flex items-center gap-2 mt-1",children:e?.debug_enabled?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.E,{variant:"default",className:"bg-green-500",children:[(0,t.jsx)(x.A,{className:"h-3 w-3 mr-1"}),"ENABLED"]}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Debug logging is active for all new batch jobs"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.E,{variant:"secondary",children:[(0,t.jsx)(h.A,{className:"h-3 w-3 mr-1"}),"DISABLED"]}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"No debug logging for batch jobs"})]})})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)(l.$,{onClick:k,disabled:w.status,size:"sm",variant:"outline",children:[w.status?(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(j.A,{className:"h-4 w-4"}),"Refresh"]})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.J,{htmlFor:"debug-duration",children:"Duration (minutes):"}),(0,t.jsx)(o.p,{id:"debug-duration",type:"number",value:a,onChange:e=>c(Number(e.target.value)),min:5,max:120,className:"w-20"})]}),e?.debug_enabled?(0,t.jsxs)(l.$,{onClick:T,disabled:w.disable,variant:"destructive",size:"sm",children:[w.disable?(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,t.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Disable Debug Mode"]}):(0,t.jsxs)(l.$,{onClick:A,disabled:w.enable,size:"sm",children:[w.enable?(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,t.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"Enable Debug Mode"]})]}),(0,t.jsxs)(d.Fc,{children:[(0,t.jsx)(u.A,{className:"h-4 w-4"}),(0,t.jsxs)(d.TN,{children:[(0,t.jsx)("strong",{children:"How to use:"}),(0,t.jsx)("br",{}),"1. Enable debug mode before starting batch jobs that are failing",(0,t.jsx)("br",{}),"2. Run your batch job as normal",(0,t.jsx)("br",{}),"3. Review the debug summary and detailed logs below",(0,t.jsx)("br",{}),"4. Debug mode will automatically disable after the specified duration"]})]})]})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{children:[(0,t.jsx)(r.ZB,{children:"Recent Debug Sessions"}),(0,t.jsx)(r.BT,{children:"View and download debug information from recent batch processing jobs"})]}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e?.recent_debug_files?.length||0," debug files available"]}),(0,t.jsx)(l.$,{onClick:()=>E(7),disabled:w.cleanup,size:"sm",variant:"outline",children:w.cleanup?(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin mr-2"}):"Cleanup Old Files"})]}),e?.recent_debug_files&&e.recent_debug_files.length>0?(0,t.jsx)("div",{className:"space-y-3",children:e.recent_debug_files.map((e,s)=>(0,t.jsx)("div",{className:"border rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium",children:["Job ID: ",e.job_id]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Created: ",S(e.created_at)," • Size: ",R(e.size_bytes)]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(l.$,{onClick:()=>C(e.job_id),disabled:w[`summary-${e.job_id}`],size:"sm",variant:"outline",children:w[`summary-${e.job_id}`]?(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin"}):"View Summary"}),(0,t.jsxs)(l.$,{onClick:()=>D(e.job_id,e.filename),size:"sm",children:[(0,t.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Download Full Log"]})]})]})},s))}):(0,t.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No debug files available. Enable debug mode and run batch jobs to generate debug information."})]})]}),y&&(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[y.success?(0,t.jsx)(x.A,{className:"h-5 w-5 text-green-500"}):(0,t.jsx)(h.A,{className:"h-5 w-5 text-red-500"}),"Debug Summary",y.debug_summary&&(0,t.jsxs)("span",{className:"text-sm font-normal text-muted-foreground",children:["- Job ",y.debug_summary.job_id]})]})}),(0,t.jsx)(r.Wu,{className:"space-y-4",children:y.error?(0,t.jsx)(d.Fc,{variant:"destructive",children:(0,t.jsx)(d.TN,{children:y.error})}):y.debug_summary?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"text-center p-3 border rounded",children:[(0,t.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[y.debug_summary.success_rate_percent,"%"]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Success Rate"})]}),(0,t.jsxs)("div",{className:"text-center p-3 border rounded",children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:y.debug_summary.total_requests}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Requests"})]}),(0,t.jsxs)("div",{className:"text-center p-3 border rounded",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-red-600",children:y.debug_summary.failed_requests}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Failed Requests"})]}),(0,t.jsxs)("div",{className:"text-center p-3 border rounded",children:[(0,t.jsxs)("p",{className:"text-2xl font-bold",children:[Math.round(y.debug_summary.duration_seconds),"s"]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Duration"})]})]}),Object.keys(y.debug_summary.status_code_breakdown).length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"HTTP Status Codes"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(y.debug_summary.status_code_breakdown).map(([e,s])=>(0,t.jsxs)(n.E,{variant:e.startsWith("2")?"default":"destructive",children:[e,": ",s]},e))})]}),y.debug_summary.failure_patterns.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Failure Patterns"}),(0,t.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:y.debug_summary.failure_patterns.map((e,s)=>(0,t.jsxs)("div",{className:"border rounded p-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsxs)("span",{className:"font-mono",children:[e.poster_id.substring(0,8),"..."]}),(0,t.jsxs)(n.E,{variant:"destructive",children:["HTTP ",e.status_code]})]}),e.error_body&&(0,t.jsx)("p",{className:"text-muted-foreground text-xs",children:e.error_body})]},s))})]}),y.debug_summary.recommendations.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Recommendations"}),(0,t.jsx)("ul",{className:"space-y-1",children:y.debug_summary.recommendations.map((e,s)=>(0,t.jsxs)("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-blue-500 mt-1",children:"•"}),(0,t.jsx)("span",{children:e})]},s))})]})]}):null})]})]})}function N(){let[e,s]=(0,i.useState)(null),[a,f]=(0,i.useState)(null),[g,b]=(0,i.useState)([]),[v,N]=(0,i.useState)(null),[w,_]=(0,i.useState)(""),[k,A]=(0,i.useState)([]),[T,C]=(0,i.useState)(null),[D,E]=(0,i.useState)(null),[R,S]=(0,i.useState)(null),[B,$]=(0,i.useState)(null),[M,I]=(0,i.useState)(null),[F,P]=(0,i.useState)(null),[z,J]=(0,i.useState)({}),Z=async(e,s,a)=>{J(s=>({...s,[e]:!0}));try{let e=await fetch(`/api/v1/diagnostics/jellyfin/${s}`),t=await e.json();a(t)}catch(e){a({success:!1,message:`Failed to run test: ${e instanceof Error?e.message:"Unknown error"}`,details:{}})}finally{J(s=>({...s,[e]:!1}))}},L=async(e,s,a)=>{J(s=>({...s,[e]:!0}));try{let e=await fetch(`/api/v1/diagnostics/infrastructure/${s}`),t=await e.json();a(t)}catch(e){a({success:!1,message:`Failed to run test: ${e instanceof Error?e.message:"Unknown error"}`,details:{}})}finally{J(s=>({...s,[e]:!1}))}},W=async()=>{J(e=>({...e,overview:!0}));try{let e=await fetch("/api/v1/diagnostics/infrastructure/overview"),s=await e.json();E(s)}catch(e){E(null)}finally{J(e=>({...e,overview:!1}))}},q=async()=>{J(e=>({...e,media:!0}));try{let e=await fetch("/api/v1/diagnostics/jellyfin/media-sample"),s=await e.json();b(s)}catch(e){b([])}finally{J(e=>({...e,media:!1}))}},U=async()=>{if(w.trim()){J(e=>({...e,custom:!0}));try{let e=await fetch(`/api/v1/diagnostics/jellyfin/test-id/${encodeURIComponent(w.trim())}`,{method:"POST"}),s=await e.json();N(s)}catch(e){N({success:!1,message:`Failed to test ID: ${e instanceof Error?e.message:"Unknown error"}`,details:{}})}finally{J(e=>({...e,custom:!1}))}}},O=async()=>{J(e=>({...e,batch:!0}));try{let e=await fetch("/api/v1/diagnostics/jellyfin/batch-jobs/failed"),s=await e.json();A(s)}catch(e){A([])}finally{J(e=>({...e,batch:!1}))}},V=async e=>{J(s=>({...s,[`job-${e}`]:!0}));try{let s=await fetch(`/api/v1/diagnostics/jellyfin/batch-jobs/${e}/diagnose`,{method:"POST"}),a=await s.json();C(a)}catch(s){C({success:!1,message:`Failed to diagnose job: ${s instanceof Error?s.message:"Unknown error"}`,details:{job_info:{id:e,status:"unknown",total_posters:0,completed_posters:0,failed_posters:0,badge_types:[]},tested_poster_ids:[],poster_test_results:[],summary:{total_tested:0,successful:0,failed:0}}})}finally{J(s=>({...s,[`job-${e}`]:!1}))}},G=e=>null===e?(0,t.jsx)(u.A,{className:"h-4 w-4 text-yellow-500"}):e?(0,t.jsx)(x.A,{className:"h-4 w-4 text-green-500"}):(0,t.jsx)(h.A,{className:"h-4 w-4 text-red-500"}),X=e=>null===e?(0,t.jsx)(n.E,{variant:"secondary",children:"Unknown"}):e?(0,t.jsx)(n.E,{variant:"default",className:"bg-green-500",children:"Success"}):(0,t.jsx)(n.E,{variant:"destructive",children:"Failed"});return(0,t.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Jellyfin Diagnostics"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Diagnose Jellyfin connectivity and data issues"})]}),(0,t.jsxs)(d.Fc,{children:[(0,t.jsx)(u.A,{className:"h-4 w-4"}),(0,t.jsx)(d.TN,{children:"Use these diagnostics to troubleshoot issues with badge processing and Jellyfin connectivity. Common problems include invalid Jellyfin IDs, authentication issues, or configuration problems."})]}),(0,t.jsxs)(c.tU,{defaultValue:"overview",className:"space-y-6",children:[(0,t.jsxs)(c.j7,{className:"grid w-full grid-cols-8",children:[(0,t.jsx)(c.Xi,{value:"overview",children:"Overview"}),(0,t.jsx)(c.Xi,{value:"connection",children:"Connection"}),(0,t.jsx)(c.Xi,{value:"config",children:"Configuration"}),(0,t.jsx)(c.Xi,{value:"infrastructure",children:"Infrastructure"}),(0,t.jsx)(c.Xi,{value:"media",children:"Media Tests"}),(0,t.jsx)(c.Xi,{value:"batch",children:"Batch Jobs"}),(0,t.jsx)(c.Xi,{value:"debug",children:"Batch Debug"}),(0,t.jsx)(c.Xi,{value:"custom",children:"Custom ID Test"})]}),(0,t.jsx)(c.av,{value:"overview",className:"space-y-4",children:(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{children:[(0,t.jsx)(r.ZB,{children:"System Overview"}),(0,t.jsx)(r.BT,{children:"Get a high-level view of all infrastructure components"})]}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Overall System Status"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:D?`Last checked: ${new Date(D.timestamp).toLocaleString()}`:"Not checked yet"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[D&&(0,t.jsx)(n.E,{variant:"healthy"===D.overall_status?"default":"destructive",children:D.overall_status.toUpperCase()}),(0,t.jsxs)(l.$,{onClick:W,disabled:z.overview,size:"sm",children:[z.overview?(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(j.A,{className:"h-4 w-4"}),"Check All Systems"]})]})]}),D&&(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:D.components.map((e,s)=>(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:["healthy"===e.status?(0,t.jsx)(x.A,{className:"h-4 w-4 text-green-500"}):"degraded"===e.status?(0,t.jsx)(u.A,{className:"h-4 w-4 text-yellow-500"}):(0,t.jsx)(h.A,{className:"h-4 w-4 text-red-500"}),(0,t.jsx)("span",{className:"font-medium",children:e.name})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.message}),e.details?.worker_count&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Workers: ",e.details.worker_count]})]},s))})]})]})}),(0,t.jsxs)(c.av,{value:"infrastructure",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{children:[(0,t.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[G(R?.success||null),"Redis Infrastructure"]}),(0,t.jsx)(r.BT,{children:"Test Redis broker and result backend connectivity"})]}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Redis Status"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:R?.message||"Not tested yet"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[X(R?.success||null),(0,t.jsxs)(l.$,{onClick:()=>L("redis","redis",S),disabled:z.redis,size:"sm",children:[z.redis?(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(j.A,{className:"h-4 w-4"}),"Test Redis"]})]})]}),R?.details&&(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[R.details.broker&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Broker:"}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:[R.details.broker.ping_successful?"✓ Connected":"✗ Failed",R.details.broker.redis_version&&` (Redis ${R.details.broker.redis_version})`]})]}),R.details.performance&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Performance:"}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Write: ",R.details.performance.write_time_ms,"ms, Read: ",R.details.performance.read_time_ms,"ms"]})]})]})]})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{children:[(0,t.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[G(B?.success||null),"Celery Workers"]}),(0,t.jsx)(r.BT,{children:"Test Celery worker availability and task registration"})]}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Celery Status"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:B?.message||"Not tested yet"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[X(B?.success||null),(0,t.jsxs)(l.$,{onClick:()=>L("celery","celery",$),disabled:z.celery,size:"sm",children:[z.celery?(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(j.A,{className:"h-4 w-4"}),"Test Celery"]})]})]}),B?.details&&(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[B.details.workers&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Workers:"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:B.details.workers.workers_available?`${Object.keys(B.details.workers.active_workers||{}).length} active`:"No workers found"})]}),B.details.task_registration&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Tasks:"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:B.details.task_registration.target_task_registered?"✓ Batch task registered":"✗ Batch task missing"})]})]})]})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{children:[(0,t.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[G(M?.success||null),"Database"]}),(0,t.jsx)(r.BT,{children:"Test database connectivity and performance"})]}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Database Status"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:M?.message||"Not tested yet"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[X(M?.success||null),(0,t.jsxs)(l.$,{onClick:()=>L("database","database",I),disabled:z.database,size:"sm",children:[z.database?(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(j.A,{className:"h-4 w-4"}),"Test Database"]})]})]}),M?.details&&(0,t.jsx)("div",{className:"space-y-2 text-sm",children:M.details.performance&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Performance:"}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Query time: ",M.details.performance.query_time_ms,"ms"]}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Batch jobs: ",M.details.performance.batch_jobs_count]})]})})]})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{children:[(0,t.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[G(F?.success||null),"Batch Workflow"]}),(0,t.jsx)(r.BT,{children:"Test complete batch processing workflow"})]}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Workflow Status"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:F?.message||"Not tested yet"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[X(F?.success||null),(0,t.jsxs)(l.$,{onClick:()=>{z.workflow||(J(e=>({...e,workflow:!0})),fetch("/api/v1/diagnostics/infrastructure/test-batch-workflow",{method:"POST",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>P(e)).catch(e=>P({success:!1,message:`Failed to run test: ${e.message}`,details:{}})).finally(()=>J(e=>({...e,workflow:!1}))))},disabled:z.workflow,size:"sm",children:[z.workflow?(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(j.A,{className:"h-4 w-4"}),"Test Workflow"]})]})]}),F?.details&&(0,t.jsx)("div",{className:"space-y-2 text-sm",children:F.details.summary&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Components:"}),F.details.summary.successful_components.map(e=>(0,t.jsxs)("p",{className:"text-green-600",children:["✓ ",e.replace("_"," ")]},e)),F.details.summary.failed_components.map(e=>(0,t.jsxs)("p",{className:"text-red-600",children:["✗ ",e.replace("_"," ")]},e))]})})]})]})]}),(0,t.jsxs)(d.Fc,{children:[(0,t.jsx)(u.A,{className:"h-4 w-4"}),(0,t.jsxs)(d.TN,{children:[(0,t.jsx)("strong",{children:"Troubleshooting Tips:"}),(0,t.jsx)("br",{}),"• ",(0,t.jsx)("strong",{children:"Redis failures:"})," Check if Redis is running and accessible",(0,t.jsx)("br",{}),"• ",(0,t.jsx)("strong",{children:"Celery failures:"})," Ensure Celery workers are started with correct configuration",(0,t.jsx)("br",{}),"• ",(0,t.jsx)("strong",{children:"Database failures:"})," Verify PostgreSQL is running and connection settings are correct",(0,t.jsx)("br",{}),"• ",(0,t.jsx)("strong",{children:"Workflow failures:"})," Usually indicates a combination of the above issues"]})]})]}),(0,t.jsx)(c.av,{value:"connection",className:"space-y-4",children:(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{children:[(0,t.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[G(e?.success||null),"Jellyfin Connection Test"]}),(0,t.jsx)(r.BT,{children:"Test basic connectivity to your Jellyfin server"})]}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Connection Status"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e?.message||"Not tested yet"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[X(e?.success||null),(0,t.jsxs)(l.$,{onClick:()=>Z("connection","connection",s),disabled:z.connection,size:"sm",children:[z.connection?(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(j.A,{className:"h-4 w-4"}),"Test Connection"]})]})]}),e?.details&&(0,t.jsx)("div",{className:"space-y-2",children:e.details.libraries&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium",children:["Libraries Found: ",e.details.libraries.count]}),e.details.libraries.available?.map((e,s)=>(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["• ",e.name," ",e.id?`(ID: ${e.id})`:"(No ID field)"]},s))]})})]})]})}),(0,t.jsxs)(c.av,{value:"batch",className:"space-y-4",children:[(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{children:[(0,t.jsx)(r.ZB,{children:"Failed Batch Jobs Analysis"}),(0,t.jsx)(r.BT,{children:"Analyze recent failed batch jobs to identify poster download issues"})]}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:k.length>0?`Found ${k.length} jobs with failures`:"No failed jobs loaded"}),(0,t.jsxs)(l.$,{onClick:O,disabled:z.batch,size:"sm",children:[z.batch?(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(j.A,{className:"h-4 w-4"}),"Load Failed Jobs"]})]}),k.length>0&&(0,t.jsx)("div",{className:"space-y-3",children:k.map(e=>(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium",children:["Job ID: ",e.job_id]}),(0,t.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,t.jsx)(n.E,{variant:"COMPLETED"===e.status?"default":"destructive",children:e.status}),(0,t.jsxs)(n.E,{variant:"outline",children:[e.completed_posters,"/",e.total_posters," completed"]}),e.failed_posters>0&&(0,t.jsxs)(n.E,{variant:"destructive",children:[e.failed_posters," failed"]})]})]}),(0,t.jsx)(l.$,{onClick:()=>V(e.job_id),disabled:z[`job-${e.job_id}`],size:"sm",children:z[`job-${e.job_id}`]?(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin"}):"Diagnose"})]}),e.error_message&&(0,t.jsxs)("p",{className:"text-sm text-red-600 mb-2",children:["Error: ",e.error_message]}),e.sample_failed_ids.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium mb-1",children:"Sample Poster IDs:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:e.sample_failed_ids.map((e,s)=>(0,t.jsxs)("code",{className:"text-xs bg-gray-100 px-1 rounded",children:[e.substring(0,8),"..."]},s))})]})]},e.job_id))})]})]}),T&&(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{children:[(0,t.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[G(T.success),"Batch Job Diagnosis Results"]}),(0,t.jsx)(r.BT,{children:"Detailed analysis of poster download failures"})]}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[X(T.success),(0,t.jsx)("span",{className:"font-medium",children:T.message})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"text-center p-3 border rounded",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600",children:T.details.summary.successful}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Working"})]}),(0,t.jsxs)("div",{className:"text-center p-3 border rounded",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-red-600",children:T.details.summary.failed}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Failed"})]}),(0,t.jsxs)("div",{className:"text-center p-3 border rounded",children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:T.details.summary.total_tested}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Tested"})]})]}),T.details.poster_test_results.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Poster Test Results:"}),(0,t.jsx)("div",{className:"space-y-2",children:T.details.poster_test_results.map((e,s)=>(0,t.jsxs)("div",{className:"border rounded-lg p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.title}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["ID: ",e.jellyfin_id]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.E,{variant:e.metadata_available?"default":"destructive",children:e.metadata_available?"Metadata ✓":"Metadata ✗"}),(0,t.jsx)(n.E,{variant:e.poster_available?"default":"destructive",children:e.poster_available?"Poster ✓":"Poster ✗"})]})]}),e.error_message&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-2",children:e.error_message})]},s))})]}),(0,t.jsxs)(d.Fc,{children:[(0,t.jsx)(u.A,{className:"h-4 w-4"}),(0,t.jsxs)(d.TN,{children:[(0,t.jsx)("strong",{children:"Next Steps:"}),(0,t.jsx)("br",{}),"• If all tests fail: Check Jellyfin configuration and authentication",(0,t.jsx)("br",{}),"• If some tests fail: Verify that these specific poster IDs exist in Jellyfin",(0,t.jsx)("br",{}),"• If tests work but batch jobs fail: Check worker environment differences",(0,t.jsx)("br",{}),"• Use the Custom ID Test tab to test specific failing poster IDs"]})]})]})]})]}),(0,t.jsx)(c.av,{value:"config",className:"space-y-4",children:(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{children:[(0,t.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[G(a?.success||null),"Jellyfin Configuration Check"]}),(0,t.jsx)(r.BT,{children:"Verify your Jellyfin settings are properly configured"})]}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Configuration Status"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:a?.message||"Not checked yet"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[X(a?.success||null),(0,t.jsxs)(l.$,{onClick:()=>Z("config","config",f),disabled:z.config,size:"sm",children:[z.config?(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(j.A,{className:"h-4 w-4"}),"Check Config"]})]})]}),a?.details&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{children:"Base URL"}),(0,t.jsx)("p",{className:"text-sm",children:a.details.base_url})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{children:"API Key"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("p",{className:"text-sm",children:a.details.api_key}),void 0!==a.details.api_key_valid&&(0,t.jsx)(n.E,{variant:a.details.api_key_valid?"default":"destructive",children:a.details.api_key_valid?"Valid":"Invalid"})]}),a.details.api_key_error&&(0,t.jsx)("p",{className:"text-xs text-red-600",children:a.details.api_key_error}),a.details.connection_message&&(0,t.jsx)("p",{className:"text-xs text-green-600",children:a.details.connection_message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{children:"User ID"}),(0,t.jsx)("p",{className:"text-sm",children:a.details.user_id})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{children:"User ID Validation"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("p",{className:"text-sm",children:a.details.settings_loaded?"Yes":"No"}),void 0!==a.details.user_id_valid&&(0,t.jsx)(n.E,{variant:a.details.user_id_valid?"default":"destructive",children:a.details.user_id_valid?"Valid":"Invalid"})]}),a.details.user_id_error&&(0,t.jsx)("p",{className:"text-xs text-red-600",children:a.details.user_id_error}),void 0!==a.details.libraries_count&&(0,t.jsxs)("p",{className:"text-xs text-green-600",children:["Found ",a.details.libraries_count," libraries"]})]})]}),a?.details?.missing_settings?.length>0&&(0,t.jsx)(d.Fc,{variant:"destructive",children:(0,t.jsxs)(d.TN,{children:["Missing configuration: ",a.details.missing_settings.join(", ")]})})]})]})}),(0,t.jsx)(c.av,{value:"media",className:"space-y-4",children:(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{children:[(0,t.jsx)(r.ZB,{children:"Media Item Tests"}),(0,t.jsx)(r.BT,{children:"Test a sample of media items directly from your Jellyfin libraries to check API compatibility"})]}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:g.length>0?`Tested ${g.length} items`:"No tests run yet"}),(0,t.jsxs)(l.$,{onClick:q,disabled:z.media,size:"sm",children:[z.media?(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(j.A,{className:"h-4 w-4"}),"Test Media Items"]})]}),g.length>0&&(0,t.jsx)("div",{className:"space-y-2",children:g.map((e,s)=>(0,t.jsxs)("div",{className:"border rounded-lg p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.title}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["ID: ",e.jellyfin_id]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.E,{variant:e.metadata_available?"default":"destructive",children:e.metadata_available?"Metadata ✓":"Metadata ✗"}),(0,t.jsx)(n.E,{variant:e.poster_available?"default":"destructive",children:e.poster_available?"Poster ✓":"Poster ✗"})]})]}),e.error_message&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-2",children:e.error_message})]},s))})]})]})}),(0,t.jsx)(c.av,{value:"debug",className:"space-y-4",children:(0,t.jsx)(y,{})}),(0,t.jsxs)(c.av,{value:"custom",className:"space-y-4",children:[(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{children:[(0,t.jsx)(r.ZB,{children:"Test Specific Jellyfin ID"}),(0,t.jsx)(r.BT,{children:"Test a specific Jellyfin ID to diagnose issues (useful for debugging failed processing)"})]}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(m.J,{htmlFor:"custom-id",children:"Jellyfin Item ID"}),(0,t.jsx)(o.p,{id:"custom-id",value:w,onChange:e=>_(e.target.value),placeholder:"6ca81413a5022330ba7229693796c553"})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsx)(l.$,{onClick:U,disabled:z.custom||!w.trim(),children:z.custom?(0,t.jsx)(p.A,{className:"h-4 w-4 animate-spin"}):"Test ID"})})]}),v&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[G(v.success),(0,t.jsx)("span",{className:"font-medium",children:v.message})]}),v.details?.tests&&(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(v.details.tests).map(([e,s])=>(0,t.jsxs)("div",{className:"border rounded-lg p-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[G(s.success),(0,t.jsx)("span",{className:"font-medium capitalize",children:e})]}),s.item_name&&(0,t.jsxs)("p",{className:"text-sm",children:["Item: ",s.item_name]}),s.url&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground break-all",children:["URL: ",s.url]}),s.error&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:s.error})]},e))})]})]})]}),(0,t.jsxs)(d.Fc,{children:[(0,t.jsx)(u.A,{className:"h-4 w-4"}),(0,t.jsxs)(d.TN,{children:[(0,t.jsx)("strong",{children:"Common Issues:"}),(0,t.jsx)("br",{}),"• HTTP 400: Invalid or deleted Jellyfin item ID",(0,t.jsx)("br",{}),"• HTTP 401: Authentication failure (check API key)",(0,t.jsx)("br",{}),"• HTTP 404: Item not found in Jellyfin",(0,t.jsx)("br",{}),"• Network errors: Check Jellyfin URL and connectivity"]})]})]})]})]})}},33873:e=>{"use strict";e.exports=require("path")},35071:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(62688).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},41862:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(62688).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},43649:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(62688).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},44493:(e,s,a)=>{"use strict";a.d(s,{BT:()=>d,Wu:()=>c,ZB:()=>n,Zp:()=>r,aR:()=>l});var t=a(60687);a(43210);var i=a(4780);function r({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,i.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function l({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,i.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function n({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,i.cn)("leading-none font-semibold",e),...s})}function d({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,i.cn)("text-muted-foreground text-sm",e),...s})}function c({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,i.cn)("px-6",e),...s})}},48210:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(62688).A)("bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]])},54300:(e,s,a)=>{"use strict";a.d(s,{J:()=>d});var t=a(60687),i=a(43210),r=a(14163),l=i.forwardRef((e,s)=>(0,t.jsx)(r.sG.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));l.displayName="Label";var n=a(4780);function d({className:e,...s}){return(0,t.jsx)(l,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...s})}},57676:(e,s,a)=>{Promise.resolve().then(a.bind(a,12007))},61107:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c});var t=a(65239),i=a(48088),r=a(88170),l=a.n(r),n=a(30893),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(s,d);let c={children:["",{children:["diagnostics",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,12007)),"E:\\programming\\aphrodite\\frontend\\src\\app\\diagnostics\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,94431)),"E:\\programming\\aphrodite\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,o=["E:\\programming\\aphrodite\\frontend\\src\\app\\diagnostics\\page.tsx"],m={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/diagnostics/page",pathname:"/diagnostics",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70440:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>i});var t=a(31658);let i=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},78122:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(62688).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},79551:e=>{"use strict";e.exports=require("url")},89667:(e,s,a)=>{"use strict";a.d(s,{p:()=>r});var t=a(60687);a(43210);var i=a(4780);function r({className:e,type:s,...a}){return(0,t.jsx)("input",{type:s,"data-slot":"input",className:(0,i.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...a})}},91821:(e,s,a)=>{"use strict";a.d(s,{Fc:()=>n,TN:()=>c,XL:()=>d});var t=a(60687);a(43210);var i=a(24224),r=a(4780);let l=(0,i.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,...a}){return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,r.cn)(l({variant:s}),e),...a})}function d({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"alert-title",className:(0,r.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...s})}function c({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"alert-description",className:(0,r.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...s})}},96834:(e,s,a)=>{"use strict";a.d(s,{E:()=>d});var t=a(60687);a(43210);var i=a(8730),r=a(24224),l=a(4780);let n=(0,r.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d({className:e,variant:s,asChild:a=!1,...r}){let d=a?i.DX:"span";return(0,t.jsx)(d,{"data-slot":"badge",className:(0,l.cn)(n({variant:s}),e),...r})}},97840:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(62688).A)("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[447,264,658,343],()=>a(61107));module.exports=t})();