(()=>{var e={};e.id=494,e.ids=[494],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31158:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(62688).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},32272:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"E:\\\\programming\\\\aphrodite\\\\frontend\\\\src\\\\app\\\\maintenance\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"E:\\programming\\aphrodite\\frontend\\src\\app\\maintenance\\page.tsx","default")},33873:e=>{"use strict";e.exports=require("path")},35703:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>o});var t=a(65239),n=a(48088),r=a(88170),i=a.n(r),l=a(30893),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);a.d(s,c);let o={children:["",{children:["maintenance",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,32272)),"E:\\programming\\aphrodite\\frontend\\src\\app\\maintenance\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,94431)),"E:\\programming\\aphrodite\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["E:\\programming\\aphrodite\\frontend\\src\\app\\maintenance\\page.tsx"],m={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/maintenance/page",pathname:"/maintenance",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},40211:(e,s,a)=>{"use strict";a.d(s,{C1:()=>N,bL:()=>v});var t=a(43210),n=a(98599),r=a(11273),i=a(70569),l=a(65551),c=a(83721),o=a(18853),d=a(46059),m=a(14163),u=a(60687),h="Checkbox",[p,x]=(0,r.A)(h),[f,j]=p(h);function g(e){let{__scopeCheckbox:s,checked:a,children:n,defaultChecked:r,disabled:i,form:c,name:o,onCheckedChange:d,required:m,value:p="on",internal_do_not_use_render:x}=e,[j,g]=(0,l.i)({prop:a,defaultProp:r??!1,onChange:d,caller:h}),[b,y]=t.useState(null),[v,k]=t.useState(null),N=t.useRef(!1),w=!b||!!c||!!b.closest("form"),C={checked:j,disabled:i,setChecked:g,control:b,setControl:y,name:o,form:c,value:p,hasConsumerStoppedPropagationRef:N,required:m,defaultChecked:!A(r)&&r,isFormControl:w,bubbleInput:v,setBubbleInput:k};return(0,u.jsx)(f,{scope:s,...C,children:"function"==typeof x?x(C):n})}var b="CheckboxTrigger",y=t.forwardRef(({__scopeCheckbox:e,onKeyDown:s,onClick:a,...r},l)=>{let{control:c,value:o,disabled:d,checked:h,required:p,setControl:x,setChecked:f,hasConsumerStoppedPropagationRef:g,isFormControl:y,bubbleInput:v}=j(b,e),k=(0,n.s)(l,x),N=t.useRef(h);return t.useEffect(()=>{let e=c?.form;if(e){let s=()=>f(N.current);return e.addEventListener("reset",s),()=>e.removeEventListener("reset",s)}},[c,f]),(0,u.jsx)(m.sG.button,{type:"button",role:"checkbox","aria-checked":A(h)?"mixed":h,"aria-required":p,"data-state":_(h),"data-disabled":d?"":void 0,disabled:d,value:o,...r,ref:k,onKeyDown:(0,i.m)(s,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,i.m)(a,e=>{f(e=>!!A(e)||!e),v&&y&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})})});y.displayName=b;var v=t.forwardRef((e,s)=>{let{__scopeCheckbox:a,name:t,checked:n,defaultChecked:r,required:i,disabled:l,value:c,onCheckedChange:o,form:d,...m}=e;return(0,u.jsx)(g,{__scopeCheckbox:a,checked:n,defaultChecked:r,disabled:l,required:i,onCheckedChange:o,name:t,form:d,value:c,internal_do_not_use_render:({isFormControl:e})=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(y,{...m,ref:s,__scopeCheckbox:a}),e&&(0,u.jsx)(C,{__scopeCheckbox:a})]})})});v.displayName=h;var k="CheckboxIndicator",N=t.forwardRef((e,s)=>{let{__scopeCheckbox:a,forceMount:t,...n}=e,r=j(k,a);return(0,u.jsx)(d.C,{present:t||A(r.checked)||!0===r.checked,children:(0,u.jsx)(m.sG.span,{"data-state":_(r.checked),"data-disabled":r.disabled?"":void 0,...n,ref:s,style:{pointerEvents:"none",...e.style}})})});N.displayName=k;var w="CheckboxBubbleInput",C=t.forwardRef(({__scopeCheckbox:e,...s},a)=>{let{control:r,hasConsumerStoppedPropagationRef:i,checked:l,defaultChecked:d,required:h,disabled:p,name:x,value:f,form:g,bubbleInput:b,setBubbleInput:y}=j(w,e),v=(0,n.s)(a,y),k=(0,c.Z)(l),N=(0,o.X)(r);t.useEffect(()=>{if(!b)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,s=!i.current;if(k!==l&&e){let a=new Event("click",{bubbles:s});b.indeterminate=A(l),e.call(b,!A(l)&&l),b.dispatchEvent(a)}},[b,k,l,i]);let C=t.useRef(!A(l)&&l);return(0,u.jsx)(m.sG.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??C.current,required:h,disabled:p,name:x,value:f,form:g,...s,tabIndex:-1,ref:v,style:{...s.style,...N,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function A(e){return"indeterminate"===e}function _(e){return A(e)?"indeterminate":e?"checked":"unchecked"}C.displayName=w},43649:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(62688).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},48210:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(62688).A)("bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]])},54300:(e,s,a)=>{"use strict";a.d(s,{J:()=>c});var t=a(60687),n=a(43210),r=a(14163),i=n.forwardRef((e,s)=>(0,t.jsx)(r.sG.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));i.displayName="Label";var l=a(4780);function c({className:e,...s}){return(0,t.jsx)(i,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...s})}},56896:(e,s,a)=>{"use strict";a.d(s,{S:()=>l});var t=a(60687);a(43210);var n=a(40211),r=a(13964),i=a(4780);function l({className:e,...s}){return(0,t.jsx)(n.bL,{"data-slot":"checkbox",className:(0,i.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...s,children:(0,t.jsx)(n.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,t.jsx)(r.A,{className:"size-3.5"})})})}},60573:(e,s,a)=>{Promise.resolve().then(a.bind(a,32272))},61611:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(62688).A)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},77085:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>P});var t=a(60687),n=a(43210),r=a(29844),i=a(41862),l=a(82679),c=a(44493),o=a(29523),d=a(96834),m=a(5336),u=a(35071),h=a(78122),p=a(52581);let x={connectionTests:{jellyfin:!1,omdb:!1,tmdb:!1,mdblist:!1,anidb:!1,isTestingAll:!1},databaseInfo:null,integrityStatus:{checked:!1,ok:!1},backupOptions:{compress:!0},cleanupOptions:{keepCount:5},exportOptions:{includeSensitive:!1},logsData:{logs:[],fileInfo:null,availableLevels:[],selectedLevel:"",searchQuery:"",isLoading:!1,error:""}},f=[{name:"Jellyfin",description:"Check connection to Jellyfin server using configured API key",status:null},{name:"OMDB",description:"Check connection to OMDB API using configured API key",status:null},{name:"TMDB",description:"Check connection to TMDB API using configured API key",status:null},{name:"MDBList",description:"Check connection to MDBList API using configured API key",status:null},{name:"AniDB",description:"Check connection to AniDB using configured credentials",status:null}];function j(){let{services:e,isTestingAll:s,testConnection:a,testAllConnections:r}=function(){let[e,s]=(0,n.useState)(f.map(e=>({...e}))),[a,t]=(0,n.useState)(!1),r=async a=>{if(!e.find(e=>e.name===a))return{success:!1,message:"Service not found"};s(e=>e.map(e=>e.name===a?{...e,status:"checking",error:void 0}:e));try{let e="",t={},n=await fetch("/api/v1/config/settings.yaml"),r=(await n.json()).config;if(!r||!r.api_keys)throw Error("Configuration not found");switch(a){case"Jellyfin":if(!r.api_keys.Jellyfin?.[0])throw Error("Jellyfin configuration not found");e="/api/v1/config/test-jellyfin",t={url:r.api_keys.Jellyfin[0].url,api_key:r.api_keys.Jellyfin[0].api_key,user_id:r.api_keys.Jellyfin[0].user_id};break;case"OMDB":if(!r.api_keys.OMDB?.[0])throw Error("OMDB configuration not found");e="/api/v1/config/test-omdb",t={api_key:r.api_keys.OMDB[0].api_key};break;case"TMDB":if(!r.api_keys.TMDB?.[0])throw Error("TMDB configuration not found");e="/api/v1/config/test-tmdb",t={api_key:r.api_keys.TMDB[0].api_key};break;case"MDBList":if(!r.api_keys.MDBList?.[0])throw Error("MDBList configuration not found");e="/api/v1/config/test-mdblist",t={api_key:r.api_keys.MDBList[0].api_key};break;case"AniDB":if(!r.api_keys.aniDB)throw Error("AniDB configuration not found");let i="",l="",c="aphrodite",o=1;if(Array.isArray(r.api_keys.aniDB))for(let e of r.api_keys.aniDB)e&&"object"==typeof e&&(e.username&&(i=e.username),e.password&&(l=e.password),e.client_name&&(c=e.client_name),e.version&&(o=e.version));else"object"==typeof r.api_keys.aniDB&&(i=r.api_keys.aniDB.username||"",l=r.api_keys.aniDB.password||"",c=r.api_keys.aniDB.client_name||"aphrodite",o=r.api_keys.aniDB.version||1);if(!i||!l)throw Error("AniDB credentials incomplete");e="/api/v1/config/test-anidb",t={username:i,password:l,client_name:c,version:o};break;default:throw Error("Unknown service")}let d=await fetch(`${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),m=await d.json(),u={success:d.ok&&!1!==m.success,message:m.message||(d.ok?"Connection successful!":"Connection failed")};return s(e=>e.map(e=>e.name===a?{...e,status:u.success?"connected":"failed",error:u.success?void 0:u.message}:e)),u}catch(t){let e=t instanceof Error?t.message:"Connection failed";return s(s=>s.map(s=>s.name===a?{...s,status:"failed",error:e}:s)),{success:!1,message:e}}},i=async()=>{t(!0),console.log("Starting connection check for all services");try{for(let s of e){console.log(`Testing connection for ${s.name}...`);try{await r(s.name),console.log(`${s.name} connection check completed`)}catch(e){console.error(`Error during ${s.name} connection check:`,e)}}p.oR.success("Connection tests completed")}catch(e){console.error("Error during connection testing:",e),p.oR.error("Failed to complete connection tests")}finally{t(!1),console.log("All connection checks completed")}};return{services:e,isTestingAll:a,testConnection:r,testAllConnections:i,setServices:s}}();return(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsx)(c.ZB,{children:"API Connection Check"}),(0,t.jsx)(c.BT,{children:"Test connectivity to all configured external services and APIs."})]}),(0,t.jsxs)(c.Wu,{className:"space-y-6",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(e=>(0,t.jsx)(c.Zp,{className:"bg-muted/50",children:(0,t.jsxs)(c.Wu,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["checking"===e.status&&(0,t.jsx)(i.A,{className:"h-4 w-4 animate-spin"}),e.status&&"checking"!==e.status&&(0,t.jsxs)(d.E,{variant:"connected"===e.status?"default":"destructive",children:["connected"===e.status&&(0,t.jsx)(m.A,{className:"h-3 w-3 mr-1"}),"failed"===e.status&&(0,t.jsx)(u.A,{className:"h-3 w-3 mr-1"}),"connected"===e.status?"Connected":"Failed"]}),!e.status&&(0,t.jsx)(d.E,{variant:"outline",children:"Not tested"})]})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:e.description}),e.error&&(0,t.jsx)("p",{className:"text-sm text-destructive mb-3",children:e.error}),(0,t.jsx)(o.$,{variant:"outline",size:"sm",onClick:()=>a(e.name),disabled:"checking"===e.status||s,className:"w-full",children:"checking"===e.status?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.A,{className:"h-4 w-4 animate-spin mr-2"}),"Testing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Test Connection"]})})]})},e.name))}),(0,t.jsx)("div",{className:"flex justify-center pt-4 border-t",children:(0,t.jsx)(o.$,{onClick:r,disabled:s,size:"lg",className:"min-w-48",children:s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.A,{className:"h-5 w-5 animate-spin mr-2"}),"Testing All Connections..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.A,{className:"h-5 w-5 mr-2"}),"Test All Connections"]})})}),e.some(e=>e.status&&"checking"!==e.status)&&(0,t.jsxs)("div",{className:"mt-6 p-4 bg-muted rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Connection Test Results"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:e.filter(e=>e.status&&"checking"!==e.status).map(e=>(0,t.jsxs)(d.E,{variant:"connected"===e.status?"default":"destructive",className:"flex items-center gap-1",children:["connected"===e.status?(0,t.jsx)(m.A,{className:"h-3 w-3"}):(0,t.jsx)(u.A,{className:"h-3 w-3"}),e.name]},e.name))})]})]})]})}var g=a(89667),b=a(54300),y=a(56896),v=a(61611),k=a(62688);let N=(0,k.A)("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),w=(0,k.A)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var C=a(31158);let A=(0,k.A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var _=a(88233);let D=(0,k.A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);function S(){let{databaseInfo:e,loading:s,loadDatabaseInfo:a,createBackup:r,restoreBackup:l,exportDatabase:x,importDatabaseSettings:f}=function(){let[e,s]=(0,n.useState)(null),[a,t]=(0,n.useState)({info:!1,backup:!1,restore:!1,verify:!1,cleanup:!1,export:!1,integrity:!1}),r=async()=>{t(e=>({...e,info:!0}));try{console.log("Loading database info from:","/api/v1/maintenance/database/status");let e=await fetch("/api/v1/maintenance/database/status");if(console.log("Database info response status:",e.status),!e.ok)throw Error(`HTTP ${e.status}: ${e.statusText}`);let a=await e.json();console.log("Database info response data:",a),a.success?(s(a),console.log("Database info loaded successfully")):(console.error("Database info request failed:",a),p.oR.error(`Failed to load database information: ${a.error||"Unknown error"}`))}catch(e){console.error("Error loading database info:",e),p.oR.error(`Failed to load database information: ${e instanceof Error?e.message:"Unknown error"}`)}finally{t(e=>({...e,info:!1}))}},i=async e=>{t(e=>({...e,backup:!0}));try{let s=await fetch("/api/v1/maintenance/database/backup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await s.json();return a.success?(p.oR.success(`Backup created: ${a.backup_filename}`),await r()):p.oR.error(`Backup failed: ${a.error}`),{success:a.success,message:a.success?`Backup created: ${a.backup_filename}`:a.error,details:a}}catch(s){let e=s instanceof Error?s.message:"Backup failed";return p.oR.error(e),{success:!1,message:e}}finally{t(e=>({...e,backup:!1}))}},l=async e=>{t(e=>({...e,restore:!0}));try{let s=await fetch("/api/v1/maintenance/database/restore",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:e})}),a=await s.json();return a.success?(p.oR.success("Database restored successfully"),await r()):p.oR.error(`Restore failed: ${a.error}`),{success:a.success,message:a.success?"Database restored successfully":a.error,details:a}}catch(s){let e=s instanceof Error?s.message:"Restore failed";return p.oR.error(e),{success:!1,message:e}}finally{t(e=>({...e,restore:!1}))}},c=async e=>{t(e=>({...e,restore:!0}));try{let s=await fetch("/api/v1/maintenance/database/import-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonData:e,confirm_restore:!1})}),a=await s.json();if(!1===a.success&&a.requires_confirmation){console.log("Backend requires confirmation for import, proceeding with confirmed request");let s=await fetch("/api/v1/maintenance/database/import-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonData:e,confirm_restore:!0})}),a=await s.json();if(a.success)return p.oR.success(`Database settings imported successfully: ${a.tables_imported} tables imported, ${a.tables_failed} failed`,{duration:6e3}),await r(),{success:!0,message:`Database settings imported successfully: ${a.tables_imported} tables imported, ${a.tables_failed} failed`,details:a};return p.oR.error(`Import failed: ${a.detail||a.message||"Unknown error"}`),{success:!1,message:a.detail||a.message||"Import failed",details:a}}if(a.success)return p.oR.success(`Database settings imported successfully: ${a.tables_imported} tables imported, ${a.tables_failed} failed`,{duration:6e3}),await r(),{success:!0,message:`Database settings imported successfully: ${a.tables_imported} tables imported, ${a.tables_failed} failed`,details:a};return p.oR.error(`Import failed: ${a.detail||a.message||"Unknown error"}`),{success:!1,message:a.detail||a.message||"Import failed",details:a}}catch(s){let e=s instanceof Error?s.message:"Import failed";return p.oR.error(e),{success:!1,message:e}}finally{t(e=>({...e,restore:!1}))}};return{databaseInfo:e,loading:a,loadDatabaseInfo:r,createBackup:i,restoreBackup:l,exportDatabase:async e=>{t(e=>({...e,export:!0}));try{let s=await fetch("/api/v1/maintenance/database/export",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(s.ok){let e=await s.blob(),a=window.URL.createObjectURL(e),t=document.createElement("a");t.href=a;let n=s.headers.get("Content-Disposition"),r="database_export.json";if(n){let e=n.match(/filename="?([^"]+)"?/);e&&(r=e[1])}return t.download=r,document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(a),document.body.removeChild(t),p.oR.success("Database exported successfully"),{success:!0,message:`Database exported successfully: ${r}`}}{let e=await s.json();return p.oR.error(`Export failed: ${e.detail||"Unknown error"}`),{success:!1,message:e.detail||"Export failed"}}}catch(s){let e=s instanceof Error?s.message:"Export failed";return p.oR.error(e),{success:!1,message:e}}finally{t(e=>({...e,export:!1}))}},importDatabaseSettings:c,setDatabaseInfo:s}}(),[j,k]=(0,n.useState)({compress:!0}),[S,E]=(0,n.useState)({keepCount:5}),[M,R]=(0,n.useState)({includeSensitive:!1}),[B,$]=(0,n.useState)({show:!1,backup:null}),[L,T]=(0,n.useState)({show:!1,jsonData:null,filename:""}),[O,P]=(0,n.useState)({checked:!1,ok:!1}),J=async()=>{P({checked:!0,ok:!0,message:"Database integrity check passed"})},z=async()=>{await r(j)},I=e=>{$({show:!0,backup:e})},Z=async()=>{B.backup&&await l(B.backup.filename),$({show:!1,backup:null})},q=async()=>{await x(M)},F=async()=>{L.jsonData&&await f(L.jsonData),T({show:!1,jsonData:null,filename:""})},U=e=>new Date(e).toLocaleString();return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(v.A,{className:"h-5 w-5"}),"Database Information"]}),(0,t.jsx)(c.BT,{children:"View database status and perform integrity checks"})]}),(0,t.jsxs)(o.$,{variant:"outline",size:"sm",onClick:a,disabled:s.info,children:[s.info?(0,t.jsx)(i.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,t.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),(0,t.jsx)(c.Wu,{children:e?(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(c.Zp,{className:"bg-muted/50",children:(0,t.jsx)(c.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Database Status"}),(0,t.jsx)("p",{className:`text-2xl font-bold ${e.database.exists?"text-green-600":"text-red-600"}`,children:e.database.exists?"Active":"Not Found"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.database.path})]}),(0,t.jsx)(N,{className:`h-8 w-8 ${e.database.exists?"text-green-600":"text-red-600"}`})]})})}),(0,t.jsx)(c.Zp,{className:"bg-muted/50",children:(0,t.jsx)(c.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Database Size"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:e.database.size_formatted}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Schema ",e.schema_version]})]}),(0,t.jsx)(v.A,{className:"h-8 w-8 text-blue-600"})]})})}),(0,t.jsx)(c.Zp,{className:"bg-muted/50",children:(0,t.jsx)(c.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Available Backups"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:e.backups.length}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.backup_directory})]}),(0,t.jsx)(w,{className:"h-8 w-8 text-purple-600"})]})})}),(0,t.jsx)(c.Zp,{className:"bg-muted/50",children:(0,t.jsx)(c.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Integrity Status"}),(0,t.jsx)("p",{className:`text-2xl font-bold ${O.checked?O.ok?"text-green-600":"text-red-600":"text-yellow-600"}`,children:O.checked?O.ok?"OK":"Issues":"Not Checked"}),(0,t.jsxs)(o.$,{variant:"outline",size:"sm",onClick:J,disabled:s.integrity,className:"mt-1",children:[s.integrity?(0,t.jsx)(i.A,{className:"h-3 w-3 animate-spin mr-1"}):null,"Check Now"]})]}),O.checked?O.ok?(0,t.jsx)(m.A,{className:"h-8 w-8 text-green-600"}):(0,t.jsx)(u.A,{className:"h-8 w-8 text-red-600"}):(0,t.jsx)(h.A,{className:"h-8 w-8 text-yellow-600"})]})})})]}):(0,t.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,t.jsx)(i.A,{className:"h-8 w-8 animate-spin mr-2"}),(0,t.jsx)("span",{children:"Loading database information..."})]})})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(w,{className:"h-5 w-5"}),"Backup Operations"]}),(0,t.jsx)(c.BT,{children:"Create, restore, and manage database backups"})]}),(0,t.jsxs)(c.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(b.J,{className:"text-base font-semibold",children:"Create New Backup"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(y.S,{id:"compress-backup",checked:j.compress,onCheckedChange:e=>k(s=>({...s,compress:e}))}),(0,t.jsx)(b.J,{htmlFor:"compress-backup",className:"text-sm",children:"Compress backup"})]}),(0,t.jsxs)(o.$,{onClick:z,disabled:s.backup||!e?.database.exists,children:[s.backup?(0,t.jsx)(i.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,t.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"Create Backup"]})]})]}),e?.backups&&e.backups.length>0&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(b.J,{className:"text-base font-semibold",children:"Available Backups"}),(0,t.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,t.jsx)("div",{className:"max-h-96 overflow-y-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"bg-muted/50 border-b",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left p-3 font-medium",children:"Filename"}),(0,t.jsx)("th",{className:"text-left p-3 font-medium",children:"Size"}),(0,t.jsx)("th",{className:"text-left p-3 font-medium",children:"Created"}),(0,t.jsx)("th",{className:"text-left p-3 font-medium",children:"Type"}),(0,t.jsx)("th",{className:"text-left p-3 font-medium",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:e.backups.slice(0,10).map(e=>(0,t.jsxs)("tr",{className:"border-b last:border-b-0 hover:bg-muted/25",children:[(0,t.jsx)("td",{className:"p-3 font-mono text-xs",children:e.filename}),(0,t.jsx)("td",{className:"p-3",children:e.size_formatted}),(0,t.jsx)("td",{className:"p-3",children:U(e.created)}),(0,t.jsx)("td",{className:"p-3",children:(0,t.jsx)(d.E,{variant:e.compressed?"default":"outline",children:e.compressed?"Compressed":"Uncompressed"})}),(0,t.jsx)("td",{className:"p-3",children:(0,t.jsx)("div",{className:"flex gap-1",children:(0,t.jsx)(o.$,{variant:"outline",size:"sm",onClick:()=>I(e),disabled:s.restore,title:"Restore from this backup",children:(0,t.jsx)(A,{className:"h-3 w-3"})})})})]},e.filename))})]})})})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(b.J,{className:"text-base font-semibold",children:"Cleanup Old Backups"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("span",{className:"text-sm",children:"Keep"}),(0,t.jsx)(g.p,{type:"number",value:S.keepCount,onChange:e=>E(s=>({...s,keepCount:parseInt(e.target.value)||5})),min:1,max:50,className:"w-20"}),(0,t.jsx)("span",{className:"text-sm",children:"most recent backups"}),(0,t.jsxs)(o.$,{variant:"outline",size:"sm",disabled:s.cleanup||!e||e.backups.length<=S.keepCount,children:[s.cleanup?(0,t.jsx)(i.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,t.jsx)(_.A,{className:"h-4 w-4 mr-2"}),"Cleanup"]})]})]})]})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(D,{className:"h-5 w-5"}),"Export & Maintenance"]}),(0,t.jsx)(c.BT,{children:"Export database data and perform maintenance operations"})]}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(b.J,{className:"text-base font-semibold",children:"Export Database to JSON"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(y.S,{id:"include-sensitive",checked:M.includeSensitive,onCheckedChange:e=>R(s=>({...s,includeSensitive:e}))}),(0,t.jsx)(b.J,{htmlFor:"include-sensitive",className:"text-sm",children:"Include sensitive data"})]}),(0,t.jsxs)(o.$,{onClick:q,disabled:s.export||!e?.database.exists,children:[s.export?(0,t.jsx)(i.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,t.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"Export to JSON"]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"\uD83D\uDCBE The exported file will be automatically downloaded to your browser"})]}),(0,t.jsxs)("div",{className:"space-y-3 pt-4 border-t",children:[(0,t.jsx)(b.J,{className:"text-base font-semibold",children:"Restore Database Settings from JSON"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("input",{type:"file",accept:".json",onChange:e=>{let s=e.target.files?.[0];if(!s)return;if(!s.name.endsWith(".json"))return void p.oR.error("Please select a JSON file");let a=new FileReader;a.onload=e=>{try{let a=JSON.parse(e.target?.result);T({show:!0,jsonData:a,filename:s.name})}catch(e){p.oR.error("Invalid JSON file format")}},a.readAsText(s),e.target.value=""},style:{display:"none"},id:"json-import-input"}),(0,t.jsxs)(o.$,{variant:"outline",onClick:()=>document.getElementById("json-import-input")?.click(),disabled:s.restore||!e?.database.exists,children:[s.restore?(0,t.jsx)(i.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,t.jsx)(A,{className:"h-4 w-4 mr-2"}),"Select JSON File"]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"⚠️ This will replace current database settings with data from the JSON export file"})]})]})]}),B.show&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsxs)(c.Zp,{className:"w-full max-w-md mx-4",children:[(0,t.jsx)(c.aR,{children:(0,t.jsx)(c.ZB,{className:"text-yellow-600",children:"⚠️ Confirm Database Restore"})}),(0,t.jsxs)(c.Wu,{className:"space-y-4",children:[(0,t.jsxs)("p",{children:["This will ",(0,t.jsx)("strong",{children:"replace"})," your current database with the backup:"]}),(0,t.jsxs)("div",{className:"bg-muted p-3 rounded",children:[(0,t.jsx)("p",{className:"font-medium",children:B.backup?.filename}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Created: ",B.backup?U(B.backup.created):""]})]}),(0,t.jsxs)("p",{className:"text-destructive text-sm",children:[(0,t.jsx)("strong",{children:"This action cannot be undone!"})," Your current database will be backed up automatically before the restore."]}),(0,t.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,t.jsx)(o.$,{variant:"outline",onClick:()=>$({show:!1,backup:null}),children:"Cancel"}),(0,t.jsxs)(o.$,{variant:"destructive",onClick:Z,disabled:s.restore,children:[s.restore?(0,t.jsx)(i.A,{className:"h-4 w-4 animate-spin mr-2"}):null,"Restore Database"]})]})]})]})}),L.show&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsxs)(c.Zp,{className:"w-full max-w-md mx-4",children:[(0,t.jsx)(c.aR,{children:(0,t.jsx)(c.ZB,{className:"text-blue-600",children:"\uD83D\uDCC4 Confirm Database Settings Import"})}),(0,t.jsxs)(c.Wu,{className:"space-y-4",children:[(0,t.jsxs)("p",{children:["This will ",(0,t.jsx)("strong",{children:"restore database settings"})," from the JSON export:"]}),(0,t.jsxs)("div",{className:"bg-muted p-3 rounded",children:[(0,t.jsx)("p",{className:"font-medium",children:L.filename}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"JSON Export File"})]}),(0,t.jsxs)("p",{className:"text-yellow-600 text-sm",children:[(0,t.jsx)("strong",{children:"Warning:"})," This will replace your current database settings. Your current database will be backed up automatically before the import."]}),(0,t.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,t.jsx)(o.$,{variant:"outline",onClick:()=>T({show:!1,jsonData:null,filename:""}),children:"Cancel"}),(0,t.jsxs)(o.$,{onClick:F,disabled:s.restore,children:[s.restore?(0,t.jsx)(i.A,{className:"h-4 w-4 animate-spin mr-2"}):null,"Import Settings"]})]})]})]})})]})}var E=a(93613),M=a(43649),R=a(96882),B=a(48210),$=a(99270);let L=(0,k.A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var T=a(15079);function O(){let{logs:e,fileInfo:s,availableLevels:a,selectedLevel:r,searchQuery:l,isLoading:m,error:u,setSelectedLevel:x,setSearchQuery:f,fetchLogs:j,fetchLogLevels:y,clearLogs:v,copyLogs:k,downloadLogs:N}=function(){let[e,s]=(0,n.useState)([]),[a,t]=(0,n.useState)(null),[r,i]=(0,n.useState)([]),[l,c]=(0,n.useState)("all"),[o,d]=(0,n.useState)(""),[m,u]=(0,n.useState)(!1),[h,x]=(0,n.useState)(""),f=(0,n.useCallback)(async()=>{u(!0),x("");try{let e=new URLSearchParams;l&&"all"!==l&&e.append("level",l),o&&e.append("search",o),e.append("limit","1000");let a=await fetch(`/api/v1/maintenance/logs?${e}`),n=await a.json();n.success?(s(n.logs||[]),t({total_lines:n.total_lines||0,filtered_lines:n.filtered_lines||0,file_size:n.file_size||0,file_modified:n.file_modified||""})):x(n.message||"Failed to load logs")}catch(e){console.error("Error fetching logs:",e),x("Error loading logs")}finally{u(!1)}},[l,o]),j=async()=>{try{let e=await fetch("/api/v1/maintenance/logs/levels"),s=await e.json();s.success&&i(s.levels||[])}catch(e){console.error("Error fetching log levels:",e)}},g=(0,n.useCallback)(async()=>{try{let e=await fetch("/api/v1/maintenance/logs/clear",{method:"DELETE"}),s=await e.json();if(s.success)return await f(),p.oR.success("Logs cleared successfully"),!0;return p.oR.error(`Failed to clear logs: ${s.error||s.message||"Unknown error"}`),!1}catch(e){return console.error("Error clearing logs:",e),p.oR.error("Error clearing logs"),!1}},[f]),b=async()=>{if(e.length)try{let s=e.map(e=>`${e.timestamp} - ${e.level} - ${e.message}`).join("\n");await navigator.clipboard.writeText(s),p.oR.success("Logs copied to clipboard!")}catch(e){console.error("Error copying logs:",e),p.oR.error("Failed to copy logs to clipboard")}};return{logs:e,fileInfo:a,availableLevels:r,selectedLevel:l,searchQuery:o,isLoading:m,error:h,setSelectedLevel:c,setSearchQuery:d,fetchLogs:f,fetchLogLevels:j,clearLogs:g,copyLogs:b,downloadLogs:async()=>{try{let e=await fetch("/api/v1/maintenance/logs/download");if(e.ok){let s=await e.blob(),a=window.URL.createObjectURL(s),t=document.createElement("a");t.href=a,t.download=`aphrodite-logs-${new Date().toISOString().split("T")[0]}.log`,document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(a),document.body.removeChild(t),p.oR.success("Logs downloaded successfully")}else p.oR.error("Failed to download logs")}catch(e){console.error("Error downloading logs:",e),p.oR.error("Error downloading logs")}}}}(),[w,A]=(0,n.useState)(!1),S=e=>{switch(e?.toLowerCase()){case"error":case"critical":return"bg-red-500/10 hover:bg-red-500/20";case"warning":return"bg-yellow-500/10 hover:bg-yellow-500/20";case"info":return"bg-blue-500/10 hover:bg-blue-500/20";case"debug":return"bg-purple-500/10 hover:bg-purple-500/20";default:return"hover:bg-muted"}},O=e=>{switch(e?.toLowerCase()){case"error":case"critical":return(0,t.jsx)(E.A,{className:"h-3 w-3 text-red-500"});case"warning":return(0,t.jsx)(M.A,{className:"h-3 w-3 text-yellow-500"});case"info":return(0,t.jsx)(R.A,{className:"h-3 w-3 text-blue-500"});case"debug":return(0,t.jsx)(B.A,{className:"h-3 w-3 text-purple-500"});default:return(0,t.jsx)(D,{className:"h-3 w-3 text-muted-foreground"})}},P=e=>{switch(e?.toLowerCase()){case"error":case"critical":return"destructive";case"warning":return"secondary";case"info":return"default";default:return"outline"}},J=()=>{j()},z=async()=>{await v()&&A(!1)};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(D,{className:"h-5 w-5"}),"Application Logs"]}),(0,t.jsx)(c.BT,{children:"View, filter, and manage Aphrodite application logs"})]}),(0,t.jsxs)(c.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{className:"text-sm font-medium",children:"Log Level"}),(0,t.jsxs)(T.l6,{value:r,onValueChange:x,children:[(0,t.jsx)(T.bq,{className:"w-40",children:(0,t.jsx)(T.yv,{placeholder:"All Levels"})}),(0,t.jsxs)(T.gC,{children:[(0,t.jsx)(T.eb,{value:"all",children:"All Levels"}),a.map(e=>(0,t.jsx)(T.eb,{value:e,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[O(e),e]})},e))]})]})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-48 space-y-2",children:[(0,t.jsx)(b.J,{className:"text-sm font-medium",children:"Search Messages"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(g.p,{placeholder:"Search log messages...",value:l,onChange:e=>f(e.target.value),onKeyPress:e=>{"Enter"===e.key&&J()},className:"flex-1"}),(0,t.jsx)(o.$,{variant:"outline",onClick:J,disabled:m,children:(0,t.jsx)($.A,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{className:"text-sm font-medium",children:"Actions"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(o.$,{variant:"outline",onClick:j,disabled:m,size:"sm",children:m?(0,t.jsx)(i.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(h.A,{className:"h-4 w-4"})}),(0,t.jsx)(o.$,{variant:"outline",onClick:k,disabled:!e.length,size:"sm",children:(0,t.jsx)(L,{className:"h-4 w-4"})}),(0,t.jsx)(o.$,{variant:"outline",onClick:N,disabled:!e.length,size:"sm",children:(0,t.jsx)(C.A,{className:"h-4 w-4"})}),(0,t.jsx)(o.$,{variant:"outline",onClick:()=>A(!0),disabled:!e.length,size:"sm",children:(0,t.jsx)(_.A,{className:"h-4 w-4"})})]})]})]}),s&&(0,t.jsx)(c.Zp,{className:"bg-blue-50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-800",children:(0,t.jsx)(c.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,t.jsxs)("span",{children:[(0,t.jsx)("strong",{children:s.total_lines})," total lines",e.length!==s.total_lines&&(0,t.jsxs)("span",{className:"text-muted-foreground",children:[" ","(showing ",(0,t.jsx)("strong",{children:e.length})," filtered)"]})]}),(0,t.jsxs)("div",{className:"flex gap-4 text-muted-foreground",children:[(0,t.jsx)("span",{children:(e=>{if(!e)return"0 B";let s=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,s)).toFixed(+(s>0))+" "+["B","KB","MB","GB"][s]})(s.file_size)}),(0,t.jsxs)("span",{children:["Modified: ",new Date(s.file_modified).toLocaleString()]})]})]})})}),m&&(0,t.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,t.jsx)(i.A,{className:"h-8 w-8 animate-spin mr-2"}),(0,t.jsx)("span",{children:"Loading logs..."})]}),u&&!m&&(0,t.jsx)(c.Zp,{className:"bg-red-50 dark:bg-red-950/20 border-red-200 dark:border-red-800",children:(0,t.jsxs)(c.Wu,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400",children:[(0,t.jsx)(E.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"font-medium",children:"Error loading logs"})]}),(0,t.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:u})]})}),!e.length&&!m&&!u&&(0,t.jsx)(c.Zp,{className:"bg-muted/50",children:(0,t.jsxs)(c.Wu,{className:"p-8 text-center",children:[(0,t.jsx)(D,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No logs found"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:r&&"all"!==r||l?"Try adjusting your filters or search query.":"The log file is empty or doesn't exist yet."})]})}),e.length>0&&!m&&(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(c.ZB,{className:"text-base",children:"Log Entries"}),(0,t.jsxs)(d.E,{variant:"outline",children:[e.length," ",1===e.length?"entry":"entries"]})]})}),(0,t.jsx)(c.Wu,{className:"p-0",children:(0,t.jsx)("div",{className:"max-h-96 overflow-auto border-t",children:e.map(e=>(0,t.jsxs)("div",{className:`flex items-start p-3 border-b last:border-b-0 font-mono text-sm transition-colors ${S(e.level)}`,children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground w-12 flex-shrink-0 mr-3 mt-0.5",children:e.line_number}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground w-32 flex-shrink-0 mr-3 mt-0.5",children:e.timestamp}),(0,t.jsx)("div",{className:"w-20 flex-shrink-0 mr-3",children:(0,t.jsxs)(d.E,{variant:P(e.level),className:"text-xs font-bold flex items-center gap-1",children:[O(e.level),e.level]})}),(0,t.jsx)("span",{className:"flex-1 break-words leading-relaxed",children:e.message})]},e.line_number))})})]})]})]}),w&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsxs)(c.Zp,{className:"w-full max-w-md mx-4",children:[(0,t.jsx)(c.aR,{children:(0,t.jsx)(c.ZB,{className:"text-yellow-600",children:"Clear Logs"})}),(0,t.jsxs)(c.Wu,{className:"space-y-4",children:[(0,t.jsx)("p",{children:"Are you sure you want to clear all logs? This action cannot be undone."}),(0,t.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,t.jsx)(o.$,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),(0,t.jsx)(o.$,{variant:"destructive",onClick:z,children:"Clear All Logs"})]})]})]})})]})}function P(){let[e,s]=(0,n.useState)("connection"),{loading:a,loadMaintenanceData:c}=function(){let[e,s]=(0,n.useState)(!1),[a,t]=(0,n.useState)(x),r=async()=>{s(!0);try{console.log("Loading maintenance page data...");let[e,s]=await Promise.all([fetch("/api/v1/maintenance/database/status"),fetch("/api/v1/maintenance/logs/levels")]),a=await e.json(),n=await s.json();console.log("Loaded maintenance data:",{databaseData:a,logsLevelsData:n}),t(e=>({...e,databaseInfo:a.success?a:null,logsData:{...e.logsData,availableLevels:n.success?n.levels:[]}})),console.log("Maintenance page data loaded successfully")}catch(e){console.error("Error loading maintenance page data:",e),p.oR.error("Failed to load maintenance information",{description:e instanceof Error?e.message:"Unknown error occurred",duration:5e3})}finally{s(!1)}},i=async()=>{await r()};return{loading:e,data:a,loadMaintenanceData:r,refreshData:i,setData:t}}();return a?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(i.A,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading maintenance tools..."})]})}):(0,t.jsxs)("div",{className:"container mx-auto p-6 max-w-7xl",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)(l.A,{className:"h-8 w-8 text-primary"}),(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Maintenance"})]}),(0,t.jsx)("p",{className:"text-muted-foreground text-lg",children:"System management tools and diagnostics for Aphrodite v2"})]}),(0,t.jsxs)(r.tU,{value:e,onValueChange:s,className:"space-y-6",children:[(0,t.jsxs)(r.j7,{className:"grid w-full grid-cols-3",children:[(0,t.jsxs)(r.Xi,{value:"connection",className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"hidden sm:inline",children:"Connection Check"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Connection"})]}),(0,t.jsxs)(r.Xi,{value:"database",className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"hidden sm:inline",children:"Database Operations"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Database"})]}),(0,t.jsxs)(r.Xi,{value:"logs",className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"hidden sm:inline",children:"Logs"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Logs"})]})]}),(0,t.jsx)(r.av,{value:"connection",className:"space-y-6",children:(0,t.jsx)(j,{})}),(0,t.jsx)(r.av,{value:"database",className:"space-y-6",children:(0,t.jsx)(S,{})}),(0,t.jsx)(r.av,{value:"logs",className:"space-y-6",children:(0,t.jsx)(O,{})})]})]})}},78122:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(62688).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},79551:e=>{"use strict";e.exports=require("url")},88189:(e,s,a)=>{Promise.resolve().then(a.bind(a,77085))},88233:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(62688).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[447,264,658,77,343,891],()=>a(35703));module.exports=t})();