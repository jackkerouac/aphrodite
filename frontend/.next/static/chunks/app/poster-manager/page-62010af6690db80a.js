(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[128],{1154:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1539:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},2118:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("file-image",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]])},2346:(e,s,a)=>{"use strict";a.d(s,{w:()=>n});var t=a(5155);a(2115);var l=a(7489),r=a(9434);function n(e){let{className:s,orientation:a="horizontal",decorative:n=!0,...c}=e;return(0,t.jsx)(l.b,{"data-slot":"separator",decorative:n,orientation:a,className:(0,r.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",s),...c})}},3904:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},4165:(e,s,a)=>{"use strict";a.d(s,{Cf:()=>m,Es:()=>h,L3:()=>x,c7:()=>u,lG:()=>c,rr:()=>p,zM:()=>i});var t=a(5155);a(2115);var l=a(5452),r=a(4416),n=a(9434);function c(e){let{...s}=e;return(0,t.jsx)(l.bL,{"data-slot":"dialog",...s})}function i(e){let{...s}=e;return(0,t.jsx)(l.l9,{"data-slot":"dialog-trigger",...s})}function o(e){let{...s}=e;return(0,t.jsx)(l.ZL,{"data-slot":"dialog-portal",...s})}function d(e){let{className:s,...a}=e;return(0,t.jsx)(l.hJ,{"data-slot":"dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...a})}function m(e){let{className:s,children:a,showCloseButton:c=!0,...i}=e;return(0,t.jsxs)(o,{"data-slot":"dialog-portal",children:[(0,t.jsx)(d,{}),(0,t.jsxs)(l.UC,{"data-slot":"dialog-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...i,children:[a,c&&(0,t.jsxs)(l.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(r.A,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",s),...a})}function h(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,n.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...a})}function x(e){let{className:s,...a}=e;return(0,t.jsx)(l.hE,{"data-slot":"dialog-title",className:(0,n.cn)("text-lg leading-none font-semibold",s),...a})}function p(e){let{className:s,...a}=e;return(0,t.jsx)(l.VY,{"data-slot":"dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",s),...a})}},4496:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>eT});var t=a(5155),l=a(2115),r=a(7313),n=a(6126),c=a(9409),i=a(6695),o=a(9946);let d=(0,o.A)("film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),m=(0,o.A)("tv",[["path",{d:"m17 2-5 5-5-5",key:"16satq"}],["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",key:"1e6viu"}]]),u=(0,o.A)("library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);var h=a(1154);function x(e){let{libraries:s,selectedLibrary:a,onLibraryChange:l,loading:r}=e,o=e=>{switch(e.toLowerCase()){case"movies":return(0,t.jsx)(d,{className:"h-4 w-4"});case"tvshows":return(0,t.jsx)(m,{className:"h-4 w-4"});default:return(0,t.jsx)(u,{className:"h-4 w-4"})}};return r&&0===s.length?(0,t.jsx)(i.Zp,{children:(0,t.jsxs)(i.Wu,{className:"flex items-center justify-center py-6",children:[(0,t.jsx)(h.A,{className:"h-4 w-4 animate-spin mr-2"}),(0,t.jsx)("span",{children:"Loading libraries..."})]})}):0===s.length?(0,t.jsx)(i.Zp,{children:(0,t.jsxs)(i.Wu,{className:"flex flex-col items-center justify-center py-6",children:[(0,t.jsx)(u,{className:"h-8 w-8 text-muted-foreground mb-2"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"No media libraries found"})]})}):(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsxs)(i.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)(u,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Select Library"})]}),(0,t.jsx)(i.BT,{children:"Choose a Jellyfin library to browse and manage posters"})]}),(0,t.jsx)(i.Wu,{children:(0,t.jsxs)(c.l6,{value:a,onValueChange:l,children:[(0,t.jsx)(c.bq,{children:(0,t.jsx)(c.yv,{placeholder:"Select a library..."})}),(0,t.jsx)(c.gC,{children:s.map(e=>(0,t.jsx)(c.eb,{value:e.id,children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[o(e.type),(0,t.jsx)("span",{children:e.name}),(0,t.jsx)(n.E,{variant:"outline",children:e.type})]})},e.id))})]})})]})}var p=a(7262);let g=(0,o.A)("image-off",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]]),j=(0,o.A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var f=a(9509);function v(){return"".concat(window.location.protocol,"//").concat(window.location.host)}function b(e){return!e||e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/")?"".concat(v()).concat(e):"".concat(v(),"/").concat(e)}function N(e){let{item:s,isSelected:a=!1,onSelectionChange:r,selectionMode:c=!1,onPosterClick:o}=e,[d,m]=(0,l.useState)(!1),[u,h]=(0,l.useState)(!0),x=e=>{r&&r(s.id,e)};return(0,t.jsx)(i.Zp,{className:"group hover:shadow-lg transition-all duration-200 ".concat(a?"ring-2 ring-blue-500 bg-blue-50 dark:bg-blue-950":""," ").concat(c?"cursor-pointer hover:ring-2 hover:ring-blue-300":"cursor-pointer"),onClick:e=>{c?(e.preventDefault(),x(!a)):o&&o(s)},children:(0,t.jsxs)(i.Wu,{className:"p-0 relative",children:[c&&(0,t.jsx)("div",{className:"absolute top-2 right-2 z-20",children:(0,t.jsx)("div",{className:"bg-white/90 rounded p-1 shadow-sm cursor-pointer",onClick:e=>{e.preventDefault(),e.stopPropagation(),x(!a)},children:(0,t.jsx)(p.S,{checked:a,onCheckedChange:x,className:"pointer-events-none"})})}),(0,t.jsxs)("div",{className:"relative aspect-[2/3] bg-muted rounded-t-lg overflow-hidden",children:[s.poster_url&&!d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{src:b(s.poster_url),alt:s.title,className:"w-full h-full object-cover transition-transform duration-200 group-hover:scale-105",onLoad:()=>h(!1),onError:()=>{m(!0),h(!1)}},s.poster_url),u&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-muted",children:(0,t.jsx)("div",{className:"animate-pulse",children:(0,t.jsx)(g,{className:"h-8 w-8 text-muted-foreground"})})})]}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full bg-muted",children:(0,t.jsx)(g,{className:"h-12 w-12 text-muted-foreground"})}),(0,t.jsx)("div",{className:"absolute top-2 left-2",children:(0,t.jsx)(n.E,{variant:"BADGED"===s.badge_status?"destructive":"secondary",className:"text-xs",children:s.badge_status})})]}),(0,t.jsxs)("div",{className:"p-3 space-y-2",children:[(0,t.jsx)("h3",{className:"font-medium text-sm line-clamp-2 leading-tight",children:s.title}),s.year&&(0,t.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground",children:[(0,t.jsx)(j,{className:"h-3 w-3 mr-1"}),s.year]}),s.genres.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[s.genres.slice(0,2).map(e=>(0,t.jsx)(n.E,{variant:"outline",className:"text-xs px-1 py-0",children:e},e)),s.genres.length>2&&(0,t.jsxs)(n.E,{variant:"outline",className:"text-xs px-1 py-0",children:["+",s.genres.length-2]})]})]})]})})}function y(e){let{items:s,loading:a,selectedItems:l=new Set,onSelectionChange:r,selectionMode:n=!1,onPosterClick:c}=e;return a?(0,t.jsx)(i.Zp,{children:(0,t.jsx)(i.Wu,{className:"flex items-center justify-center py-10",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.A,{className:"h-6 w-6 animate-spin"}),(0,t.jsx)("span",{children:"Loading posters..."})]})})}):0===s.length?(0,t.jsx)(i.Zp,{children:(0,t.jsxs)(i.Wu,{className:"flex flex-col items-center justify-center py-10",children:[(0,t.jsx)(g,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No items found"}),(0,t.jsx)("p",{className:"text-muted-foreground text-center",children:"Try adjusting your search criteria or filters"})]})}):(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:s.map(e=>(0,t.jsx)(N,{item:e,isSelected:l.has(e.id),onSelectionChange:r,selectionMode:n,onPosterClick:c},e.id))})}"true"===f.env.DOCKER_ENV||"true"===f.env.IS_DOCKER||f.env.DOCKER_CONTAINER;var w=a(2523),k=a(285),C=a(7924),_=a(4416);function S(e){let{searchQuery:s,onSearchChange:a,badgeFilter:l,onBadgeFilterChange:r,onClearFilters:n}=e,o=s||"all"!==l;return(0,t.jsx)(i.Zp,{children:(0,t.jsx)(i.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(C.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(w.p,{placeholder:"Search by title...",value:s,onChange:e=>a(e.target.value),className:"pl-10"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,t.jsxs)(c.l6,{value:l,onValueChange:r,children:[(0,t.jsx)(c.bq,{className:"w-[160px]",children:(0,t.jsx)(c.yv,{placeholder:"Badge Status"})}),(0,t.jsxs)(c.gC,{children:[(0,t.jsx)(c.eb,{value:"all",children:"All Items"}),(0,t.jsx)(c.eb,{value:"badged",children:"Badged Only"}),(0,t.jsx)(c.eb,{value:"original",children:"Original Only"})]})]}),o&&(0,t.jsxs)(k.$,{variant:"outline",size:"sm",onClick:n,children:[(0,t.jsx)(_.A,{className:"h-4 w-4 mr-2"}),"Clear"]})]})]})})})}var A=a(1539),D=a(7213),E=a(7580),R=a(3904);let T=(0,o.A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var P=a(2118),F=a(4944),M=a(5339),z=a(4186);let L=e=>{let{progress:s,isConnected:a,className:r=""}=e;return(0,l.useEffect)(()=>{console.log("\uD83D\uDCCA ProgressBar received progress update:",s)},[s]),(0,l.useEffect)(()=>{console.log("\uD83D\uDD17 ProgressBar connection status:",a)},[a]),(0,t.jsxs)("div",{className:"space-y-2 ".concat(r),children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(F.k,{value:s.progress_percentage,className:"h-2"}),(0,t.jsx)("div",{className:"absolute top-0 left-0 h-2 rounded transition-all ".concat(a?s.failed_posters>0?"bg-orange-500":100===s.progress_percentage?"bg-green-500":"bg-blue-500":"bg-gray-400"),style:{width:"".concat(s.progress_percentage,"%")}})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("span",{className:"font-medium",children:[s.completed_posters," / ",s.total_posters," completed"]}),s.failed_posters>0&&(0,t.jsxs)(n.E,{variant:"destructive",className:"text-xs",children:[(0,t.jsx)(M.A,{className:"w-3 h-3 mr-1"}),s.failed_posters," failed"]}),(0,t.jsxs)(n.E,{variant:a?"secondary":"outline",className:"text-xs",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full mr-1 ".concat(a?"bg-green-500":"bg-gray-400")}),a?"Live":"Disconnected"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(z.A,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:["ETA: ",(e=>{if(!e)return"Calculating...";try{return new Date(e).toLocaleTimeString()}catch(e){return"Unknown"}})(s.estimated_completion)]})]})]}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsxs)("span",{className:"text-lg font-semibold",children:[s.progress_percentage.toFixed(1),"%"]})})]})},J=(0,o.A)("pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);var B=a(5690),I=a(8979);let O=e=>{let[s,a]=(0,l.useState)({isPausing:!1,isResuming:!1,isCancelling:!1,isRestarting:!1}),t=(0,l.useCallback)(async(s,t)=>{a(e=>({...e,[t]:!0}));try{let a=await fetch("/api/v1/workflow/control/".concat(e,"/").concat(s),{method:"POST",headers:{"Content-Type":"application/json"}});if(a.ok)return!0;return console.error("Failed to ".concat(s," job:"),a.statusText),!1}catch(e){return console.error("Error ".concat(s,"ing job:"),e),!1}finally{a(e=>({...e,[t]:!1}))}},[e]),r=(0,l.useCallback)(()=>t("pause","isPausing"),[t]),n=(0,l.useCallback)(()=>t("resume","isResuming"),[t]),c=(0,l.useCallback)(()=>t("cancel","isCancelling"),[t]),i=(0,l.useCallback)(()=>t("restart","isRestarting"),[t]);return{...s,pauseJob:r,resumeJob:n,cancelJob:c,restartJob:i}},$=e=>{let{jobId:s,jobStatus:a,onStatusChange:l,disabled:r=!1}=e,{isPausing:n,isResuming:c,isCancelling:i,isRestarting:o,pauseJob:d,resumeJob:m,cancelJob:u,restartJob:x}=O(s),p=async()=>{await d()&&l&&l("paused")},g=async()=>{await m()&&l&&l("processing")},j=async()=>{await u()&&l&&l("cancelled")},f=async()=>{await x()&&l&&l("queued")},v=n||c||i||o,b="processing"===a,N="paused"===a,y="queued"===a,w=["completed","failed","cancelled"].includes(a);return w?(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Job ",a]}):(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[b&&(0,t.jsx)(k.$,{variant:"outline",size:"sm",onClick:p,disabled:r||v,children:n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.A,{className:"w-4 h-4 mr-1 animate-spin"}),"Pausing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(J,{className:"w-4 h-4 mr-1"}),"Pause"]})}),N&&(0,t.jsx)(k.$,{variant:"outline",size:"sm",onClick:g,disabled:r||v,children:c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.A,{className:"w-4 h-4 mr-1 animate-spin"}),"Resuming..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(B.A,{className:"w-4 h-4 mr-1"}),"Resume"]})}),y&&(0,t.jsx)(k.$,{variant:"outline",size:"sm",onClick:f,disabled:r||v,children:o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.A,{className:"w-4 h-4 mr-1 animate-spin"}),"Restarting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R.A,{className:"w-4 h-4 mr-1"}),"Restart"]})}),!w&&(0,t.jsx)(k.$,{variant:"destructive",size:"sm",onClick:j,disabled:r||v,children:i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.A,{className:"w-4 h-4 mr-1 animate-spin"}),"Cancelling..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I.A,{className:"w-4 h-4 mr-1"}),"Cancel"]})})]})},W=e=>{let[s,a]=(0,l.useState)(null),[t,r]=(0,l.useState)(!1),[n,c]=(0,l.useState)(null),i=(0,l.useRef)(null),o=(0,l.useRef)(null),d=(0,l.useCallback)(()=>{if(!e)return void console.log("❌ No jobId provided to useJobProgress hook");console.log("\uD83D\uDD0C Attempting WebSocket connection for job: ".concat(e));try{let s="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host,l="".concat(s,"//").concat(t,"/api/v1/workflow/ws/").concat(e);console.log("\uD83D\uDD17 Connecting to: ".concat(l));let n=new WebSocket(l);i.current=n,n.onopen=()=>{r(!0),c(null),console.log("✅ WebSocket connected successfully for job ".concat(e))},n.onmessage=s=>{console.log("\uD83D\uDCE8 WebSocket message received for job ".concat(e,":"),s.data);try{let e=JSON.parse(s.data);console.log("\uD83D\uDCCA Parsed progress update:",e),"progress_update"===e.type&&(console.log("\uD83D\uDD04 Setting progress state:",e.data),a(e.data))}catch(e){console.error("❌ Failed to parse WebSocket message:",e)}},n.onclose=s=>{r(!1),console.log("\uD83D\uDD0C WebSocket disconnected for job ".concat(e),s.code,s.reason),a(null),1e3!==s.code&&1001!==s.code&&(console.log("\uD83D\uDD04 Scheduling reconnection for job ".concat(e)),o.current=setTimeout(()=>{var s;(null==(s=i.current)?void 0:s.readyState)===WebSocket.CLOSED&&(console.log("\uD83D\uDD04 Attempting to reconnect WebSocket for job ".concat(e)),d())},3e3))},n.onerror=s=>{c("WebSocket connection error"),r(!1),console.error("❌ WebSocket error for job ".concat(e,":"),s)}}catch(s){c("Failed to connect to job progress"),console.error("❌ WebSocket connection failed for job ".concat(e,":"),s)}},[e]),m=(0,l.useCallback)(()=>{o.current&&(clearTimeout(o.current),o.current=null),i.current&&(i.current.close(),i.current=null),r(!1)},[]),u=(0,l.useCallback)(()=>{m(),d()},[d,m]);return(0,l.useEffect)(()=>(d(),m),[d,m]),{progress:s,isConnected:t,error:n,reconnect:u}},q=e=>{var s;let{job:a,onJobUpdate:r,onProgressUpdate:c}=e,[o,d]=(0,l.useState)(a.status),{progress:m,isConnected:u,error:h}=W(a.job_id);(0,l.useEffect)(()=>{console.log("\uD83C\uDFAF JobStatusCard for ".concat(a.job_id,": progress updated:"),m)},[m,a.job_id]),(0,l.useEffect)(()=>{console.log("\uD83D\uDD17 JobStatusCard for ".concat(a.job_id,": connection status:"),u)},[u,a.job_id]),(0,l.useEffect)(()=>{if(m&&c&&u){console.log("\uD83D\uDCE4 JobStatusCard sending progress update to parent for job ".concat(a.job_id,":"),m);let e=setTimeout(()=>{c(a.job_id,m)},100);return()=>clearTimeout(e)}m&&!u&&console.log("⚠️ JobStatusCard has progress data but WebSocket disconnected for job ".concat(a.job_id," - not sending stale data"))},[null==m?void 0:m.completed_posters,null==m?void 0:m.failed_posters,null==m?void 0:m.total_posters,a.job_id,c,u]);let x=m||{total_posters:a.total_posters,completed_posters:a.completed_posters,failed_posters:a.failed_posters,progress_percentage:a.total_posters>0?(a.completed_posters+a.failed_posters)/a.total_posters*100:0,estimated_completion:a.estimated_completion};return(0,t.jsxs)(i.Zp,{className:"w-full",children:[(0,t.jsxs)(i.aR,{className:"pb-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(i.ZB,{className:"text-lg",children:a.name}),(0,t.jsx)(n.E,{className:"".concat((e=>{switch(e){case"completed":return"bg-green-500";case"processing":return"bg-blue-500";case"paused":return"bg-yellow-500";case"failed":return"bg-red-500";case"cancelled":return"bg-gray-500";case"queued":return"bg-purple-500";default:return"bg-gray-400"}})(o)," text-white"),children:o})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(P.A,{className:"w-4 h-4 mr-1"}),a.total_posters," posters"]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(E.A,{className:"w-4 h-4 mr-1"}),(null==(s=a.badge_types)?void 0:s.join(", "))||"Unknown badges"]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(j,{className:"w-4 h-4 mr-1"}),(e=>{try{return new Date(e).toLocaleString()}catch(e){return"Unknown"}})(a.created_at)]})]})]}),(0,t.jsxs)(i.Wu,{className:"space-y-4",children:[["processing","paused"].includes(o)&&(0,t.jsx)(L,{progress:x,isConnected:u}),h&&(0,t.jsxs)("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:["Connection error: ",h]}),"completed"===o&&(0,t.jsxs)("div",{className:"text-center text-green-600 font-medium",children:["✅ All ",a.total_posters," posters processed successfully"]}),"failed"===o&&(0,t.jsxs)("div",{className:"text-center text-red-600 font-medium",children:["❌ Job failed - ",a.failed_posters," posters could not be processed"]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["ID: ",a.job_id.slice(0,8),"..."]}),(0,t.jsx)($,{jobId:a.job_id,jobStatus:o,onStatusChange:e=>{d(e),null==r||r(a.job_id,e)}})]})]})]})},Z=e=>{let{className:s=""}=e,[a,r]=(0,l.useState)([]),[n,o]=(0,l.useState)(!0),[d,m]=(0,l.useState)(""),[u,h]=(0,l.useState)("all"),[x,p]=(0,l.useState)(null),g=async()=>{try{o(!0);let e=await fetch("/api/v1/workflow/jobs/");if(e.ok){let s=await e.json();r(s||[]),p(null)}else p("Failed to fetch jobs")}catch(e){p("Network error while fetching jobs"),console.error("Error fetching jobs:",e)}finally{o(!1)}};(0,l.useEffect)(()=>{g()},[]);let j=(e,s)=>{r(a=>a.map(a=>a.job_id===e?{...a,status:s}:a))},f=(0,l.useCallback)((e,s)=>{console.log("\uD83D\uDCE5 JobsTab received progress update for job ".concat(e,":"),s),r(a=>a.map(a=>a.job_id===e?(console.log("\uD83D\uDD04 JobsTab updating job ".concat(e," with progress data")),{...a,completed_posters:s.completed_posters,failed_posters:s.failed_posters,total_posters:s.total_posters,estimated_completion:s.estimated_completion}):a))},[]),v=a.filter(e=>{let s=e.name.toLowerCase().includes(d.toLowerCase())||e.job_id.toLowerCase().includes(d.toLowerCase()),a="all"===u||e.status===u;return s&&a}),b=(()=>{let e=a.reduce((e,s)=>(e[s.status]=(e[s.status]||0)+1,e),{});return{all:a.length,...e}})();return n?(0,t.jsxs)("div",{className:"flex justify-center items-center h-64 ".concat(s),children:[(0,t.jsx)(R.A,{className:"w-8 h-8 animate-spin text-muted-foreground"}),(0,t.jsx)("span",{className:"ml-2 text-muted-foreground",children:"Loading jobs..."})]}):(0,t.jsxs)("div",{className:"space-y-6 ".concat(s),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Background Jobs"}),(0,t.jsxs)(k.$,{onClick:g,variant:"outline",size:"sm",children:[(0,t.jsx)(R.A,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{children:(0,t.jsx)(i.ZB,{className:"text-lg",children:"Filter Jobs"})}),(0,t.jsx)(i.Wu,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(C.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,t.jsx)(w.p,{placeholder:"Search by job name or ID...",value:d,onChange:e=>m(e.target.value),className:"pl-10"})]})}),(0,t.jsx)("div",{className:"w-48",children:(0,t.jsxs)(c.l6,{value:u,onValueChange:h,children:[(0,t.jsxs)(c.bq,{children:[(0,t.jsx)(T,{className:"w-4 h-4 mr-2"}),(0,t.jsx)(c.yv,{placeholder:"Filter by status"})]}),(0,t.jsxs)(c.gC,{children:[(0,t.jsxs)(c.eb,{value:"all",children:["All (",b.all,")"]}),(0,t.jsxs)(c.eb,{value:"processing",children:["Processing (",b.processing||0,")"]}),(0,t.jsxs)(c.eb,{value:"paused",children:["Paused (",b.paused||0,")"]}),(0,t.jsxs)(c.eb,{value:"completed",children:["Completed (",b.completed||0,")"]}),(0,t.jsxs)(c.eb,{value:"failed",children:["Failed (",b.failed||0,")"]}),(0,t.jsxs)(c.eb,{value:"cancelled",children:["Cancelled (",b.cancelled||0,")"]}),(0,t.jsxs)(c.eb,{value:"queued",children:["Queued (",b.queued||0,")"]})]})]})})]})})]}),x&&(0,t.jsx)(i.Zp,{className:"border-red-200",children:(0,t.jsx)(i.Wu,{className:"pt-6",children:(0,t.jsx)("div",{className:"text-red-600 text-center",children:x})})}),(0,t.jsx)("div",{className:"space-y-4",children:0===v.length?(0,t.jsx)(i.Zp,{children:(0,t.jsx)(i.Wu,{className:"pt-6",children:(0,t.jsx)("div",{className:"text-center text-muted-foreground",children:0===a.length?"No background jobs found. Create a batch job by selecting 2+ posters in the Poster Manager.":"No jobs match your search criteria."})})}):v.map(e=>(0,t.jsx)(q,{job:e,onJobUpdate:j,onProgressUpdate:f},e.job_id))}),a.length>0&&(0,t.jsx)(i.Zp,{children:(0,t.jsx)(i.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"text-sm text-muted-foreground text-center",children:["Showing ",v.length," of ",a.length," jobs"]})})})]})};var G=a(5365);let H=e=>{let{selectedPosters:s,onImmediateProcess:a,onBatchProcess:l,className:r=""}=e,c=s.length;return 0===c?(0,t.jsx)(G.Fc,{className:r,children:(0,t.jsx)(G.TN,{children:"Select one or more posters to begin badge processing."})}):1===c?(0,t.jsxs)(G.Fc,{className:r,children:[(0,t.jsx)(A.A,{className:"h-4 w-4"}),(0,t.jsxs)(G.TN,{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Immediate Processing"})," - Your poster will be processed instantly with real-time preview."]}),(0,t.jsxs)(n.E,{variant:"secondary",className:"ml-2",children:[(0,t.jsx)(z.A,{className:"w-3 h-3 mr-1"}),"~5-30 seconds"]})]})]}):(0,t.jsxs)(G.Fc,{className:r,children:[(0,t.jsx)(E.A,{className:"h-4 w-4"}),(0,t.jsxs)(G.TN,{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Background Processing"})," - ",c," posters will be processed in the background with real-time progress tracking."]}),(0,t.jsxs)(n.E,{variant:"outline",className:"ml-2",children:[(0,t.jsx)(z.A,{className:"w-3 h-3 mr-1"}),"Track in Jobs tab"]})]})]})};var U=a(5057);let V=e=>{let{selectedPosters:s,onJobCreated:a,onCancel:r,className:n=""}=e,[c,o]=(0,l.useState)("Batch Processing - ".concat(new Date().toLocaleDateString())),[d,m]=(0,l.useState)(["audio","resolution"]),[u,x]=(0,l.useState)(!1),[g,j]=(0,l.useState)(null),f=[{id:"audio",label:"Audio Codec Badges",description:"DTS-HD MA, Atmos, etc."},{id:"resolution",label:"Resolution Badges",description:"4K HDR, 1080p, etc."},{id:"review",label:"Review Badges",description:"IMDb, TMDb, RT ratings"},{id:"awards",label:"Awards Badges",description:"Oscars, Emmys, etc."}],v=e=>{m(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},b=async()=>{if(0===d.length)return void j("Please select at least one badge type");x(!0),j(null);try{let e=await fetch("/api/v1/workflow/jobs/batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c,badge_types:d,poster_ids:s.map(e=>e.id),user_id:"default_user"})});if(e.ok){let s=await e.json();a(s.job_id)}else{let s=await e.json();j(s.detail||"Failed to create batch job")}}catch(e){j("Network error while creating job"),console.error("Error creating batch job:",e)}finally{x(!1)}};return(0,t.jsxs)(i.Zp,{className:n,children:[(0,t.jsx)(i.aR,{children:(0,t.jsxs)(i.ZB,{className:"flex items-center",children:[(0,t.jsx)(P.A,{className:"w-5 h-5 mr-2"}),"Create Batch Processing Job"]})}),(0,t.jsxs)(i.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(U.J,{htmlFor:"job-name",children:"Job Name"}),(0,t.jsx)(w.p,{id:"job-name",value:c,onChange:e=>o(e.target.value),placeholder:"Enter a descriptive name for this job"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(U.J,{children:"Badge Types to Apply"}),(0,t.jsx)(k.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{m(f.map(e=>e.id))},className:"text-xs",children:"Select All"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-3",children:f.map(e=>(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)(p.S,{id:"badge-".concat(e.id),checked:d.includes(e.id),onCheckedChange:()=>v(e.id)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)(U.J,{htmlFor:"badge-".concat(e.id),className:"text-sm font-medium cursor-pointer",children:e.label}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.description})]})]},e.id))})]}),(0,t.jsx)(G.Fc,{children:(0,t.jsxs)(G.TN,{children:[(0,t.jsx)("strong",{children:"Job Summary:"})," ",s.length," posters will be processed with ",d.length," badge type",1!==d.length?"s":"",d.length>0&&" (".concat(d.join(", "),")"),"."]})}),g&&(0,t.jsx)(G.Fc,{variant:"destructive",children:(0,t.jsx)(G.TN,{children:g})}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(k.$,{variant:"outline",onClick:r,disabled:u,children:"Cancel"}),(0,t.jsx)(k.$,{onClick:b,disabled:u||0===d.length,children:u?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating Job..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(B.A,{className:"w-4 h-4 mr-2"}),"Start Batch Processing"]})})]})]})]})};var K=a(6671),X=a(646),Y=a(1284);let Q=()=>{let e=(0,l.useCallback)((e,s)=>{K.oR.success((0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(X.A,{className:"w-4 h-4 text-green-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e}),s&&(0,t.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:s})]})]}))},[]),s=(0,l.useCallback)((e,s)=>{K.oR.error((0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(M.A,{className:"w-4 h-4 text-red-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e}),s&&(0,t.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:s})]})]}),{duration:8e3})},[]),a=(0,l.useCallback)((e,s)=>{K.oR.info((0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(Y.A,{className:"w-4 h-4 text-blue-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e}),s&&(0,t.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:s})]})]}))},[]),r=(0,l.useCallback)((e,s)=>{K.oR.info((0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(z.A,{className:"w-4 h-4 text-orange-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e}),s&&(0,t.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:s})]})]}))},[]),n=(0,l.useCallback)((s,a)=>{e("Background Job Created","".concat(s," - Processing ").concat(a," posters"))},[e]),c=(0,l.useCallback)(function(a,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;0===l?e("Job Completed Successfully","".concat(a," - All ").concat(t," posters processed")):s("Job Completed with Errors","".concat(a," - ").concat(t-l,"/").concat(t," posters processed, ").concat(l," failed"))},[e,s]),i=(0,l.useCallback)(e=>{a("Job Paused","".concat(e," has been paused"))},[a]),o=(0,l.useCallback)(e=>{a("Job Resumed","".concat(e," is now processing"))},[a]),d=(0,l.useCallback)(e=>{s("Job Cancelled","".concat(e," has been cancelled"))},[s]),m=(0,l.useCallback)(()=>{s("Connection Lost","Lost connection to job progress updates. Trying to reconnect...")},[s]),u=(0,l.useCallback)(()=>{e("Connection Restored","Real-time progress updates are working again")},[e]);return{showSuccess:e,showError:s,showInfo:a,showProgress:r,showJobCreated:n,showJobCompleted:c,showJobPaused:i,showJobResumed:o,showJobCancelled:d,showConnectionError:m,showConnectionRestored:u}};var ee=a(5695),es=a(4165),ea=a(2346),et=a(4861);let el=[{code:"en",name:"English",native_name:"English"},{code:"ar",name:"Arabic",native_name:"العربية"},{code:"zh",name:"Chinese",native_name:"中文"},{code:"cs",name:"Czech",native_name:"Čeština"},{code:"da",name:"Danish",native_name:"Dansk"},{code:"nl",name:"Dutch",native_name:"Nederlands"},{code:"fi",name:"Finnish",native_name:"Suomi"},{code:"fr",name:"French",native_name:"Fran\xe7ais"},{code:"de",name:"German",native_name:"Deutsch"},{code:"he",name:"Hebrew",native_name:"עברית"},{code:"hu",name:"Hungarian",native_name:"Magyar"},{code:"it",name:"Italian",native_name:"Italiano"},{code:"ja",name:"Japanese",native_name:"日本語"},{code:"ko",name:"Korean",native_name:"한국어"},{code:"no",name:"Norwegian",native_name:"Norsk"},{code:"pl",name:"Polish",native_name:"Polski"},{code:"pt",name:"Portuguese",native_name:"Portugu\xeas"},{code:"ru",name:"Russian",native_name:"Русский"},{code:"es",name:"Spanish",native_name:"Espa\xf1ol"},{code:"sv",name:"Swedish",native_name:"Svenska"},{code:"tr",name:"Turkish",native_name:"T\xfcrk\xe7e"},{code:"null",name:"No Language (Textless)",native_name:"Textless"}],er=e=>{let{value:s,onValueChange:a,disabled:l=!1,label:r="Language Preference",placeholder:n="Select language...",className:i=""}=e;return(0,t.jsxs)("div",{className:"space-y-2 ".concat(i),children:[r&&(0,t.jsx)(U.J,{htmlFor:"language-selector",children:r}),(0,t.jsxs)(c.l6,{value:s,onValueChange:a,disabled:l,children:[(0,t.jsx)(c.bq,{id:"language-selector",children:(0,t.jsx)(c.yv,{placeholder:n})}),(0,t.jsx)(c.gC,{children:el.map(e=>(0,t.jsx)(c.eb,{value:e.code,children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{children:e.name}),(0,t.jsxs)("span",{className:"text-muted-foreground",children:["(",e.native_name,")"]})]})},e.code))})]})]})},en=e=>{let{open:s,onOpenChange:a,selectedItems:r,onSuccess:n}=e,[c,i]=(0,l.useState)("en"),[o,d]=(0,l.useState)(!1),[m,u]=(0,l.useState)(null),[x,p]=(0,l.useState)("setup"),g=async()=>{d(!0),p("processing");try{let e=await fetch("/api/v1/poster-replacement/bulk-replace-posters",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_ids:r.map(e=>e.id),jellyfin_ids:r.map(e=>e.id),language_preference:c,random_selection:!0})});if(!e.ok){let s=await e.json();throw Error(s.detail||"Failed to replace posters")}let s=await e.json();u(s),p("results"),s.successful_replacements>0&&(K.oR.success("Successfully replaced ".concat(s.successful_replacements," poster").concat(1!==s.successful_replacements?"s":"")),n())}catch(e){console.error("Error replacing posters:",e),K.oR.error(e instanceof Error?e.message:"Failed to replace posters"),p("setup")}finally{d(!1)}},j=()=>{o||(a(!1),setTimeout(()=>{p("setup"),u(null),i("en")},300))};return(0,t.jsx)(es.lG,{open:s,onOpenChange:j,children:(0,t.jsxs)(es.Cf,{className:"sm:max-w-md",children:[(0,t.jsxs)(es.c7,{children:[(0,t.jsx)(es.L3,{children:"Bulk Poster Replacement"}),(0,t.jsx)(es.rr,{children:"Replace multiple posters with alternatives from external sources"})]}),"setup"===x&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,t.jsx)(D.A,{className:"h-5 w-5 text-blue-600"}),(0,t.jsxs)("span",{className:"text-lg font-medium",children:["Replace ",r.length," Poster",1!==r.length?"s":""]})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"This will replace the selected posters with alternatives from external sources like TMDB"})]}),(0,t.jsx)(ea.w,{}),(0,t.jsx)(er,{value:c,onValueChange:i,label:"Poster Language Preference"}),"null"===c&&(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,t.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,t.jsx)("strong",{children:"Textless Posters:"}),' These are special "No Language" posters from TMDB that contain no text, making them suitable for international audiences or cleaner visual aesthetics.']})}),(0,t.jsxs)(G.Fc,{children:[(0,t.jsx)(M.A,{className:"h-4 w-4"}),(0,t.jsx)(G.XL,{children:"Note"}),(0,t.jsx)(G.TN,{children:'Current posters will be backed up and the "aphrodite-overlay" tag will be removed from replaced items.'})]}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsxs)(k.$,{onClick:g,className:"flex-1",disabled:o,children:[(0,t.jsx)(D.A,{className:"h-4 w-4 mr-2"}),"Start Replacement"]}),(0,t.jsx)(k.$,{variant:"outline",onClick:j,disabled:o,children:"Cancel"})]})]}),"processing"===x&&(0,t.jsxs)("div",{className:"space-y-6 text-center",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(h.A,{className:"h-8 w-8 animate-spin mx-auto text-blue-600"}),(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Replacing Posters..."}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Processing ",r.length," item",1!==r.length?"s":"",". This may take a moment."]})]}),(0,t.jsx)(F.k,{value:66,className:"w-full"}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Searching for alternatives and updating posters..."})]}),"results"===x&&(()=>{if(!m)return null;let e=m.failed_replacements>0,s=Math.round(m.successful_replacements/m.processed_count*100);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[m.successful_replacements>0?(0,t.jsx)(X.A,{className:"h-6 w-6 text-green-600"}):(0,t.jsx)(et.A,{className:"h-6 w-6 text-red-600"}),(0,t.jsx)("h3",{className:"text-lg font-medium",children:m.successful_replacements>0?"Replacement Complete":"Replacement Failed"})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:m.message})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:m.successful_replacements}),(0,t.jsx)("div",{className:"text-sm text-green-700",children:"Successful"})]}),(0,t.jsxs)("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-red-600",children:m.failed_replacements}),(0,t.jsx)("div",{className:"text-sm text-red-700",children:"Failed"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-4 text-xs text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(z.A,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:[m.processing_time.toFixed(1),"s"]})]}),(0,t.jsxs)("div",{children:[s,"% success rate"]})]}),e&&(0,t.jsxs)(G.Fc,{children:[(0,t.jsx)(M.A,{className:"h-4 w-4"}),(0,t.jsx)(G.XL,{children:"Some items failed"}),(0,t.jsxs)(G.TN,{children:[m.failed_replacements," item",1!==m.failed_replacements?"s":""," could not be processed. This may be due to missing metadata or unavailable poster sources."]})]}),(0,t.jsx)(k.$,{onClick:j,className:"w-full",children:"Close"})]})})()]})})},ec=e=>{let{selectedCount:s,selectedItems:a,allItems:r,onClearSelection:c,onRefreshItems:o,disabled:d=!1}=e,[m,u]=(0,l.useState)(!1),[h,x]=(0,l.useState)(!1),{showJobCreated:p}=Q(),g=(0,ee.useRouter)(),j=r.filter(e=>a.has(e.id)),f=e=>{g.push("/preview?posterId=".concat(e.id))},v=()=>{u(!0)},b=()=>{x(!0)},N=async()=>{await o(),c()};return 0===s?null:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(i.ZB,{className:"text-lg",children:[s," poster",1!==s?"s":""," selected"]}),(0,t.jsx)(n.E,{variant:"secondary",children:s})]}),(0,t.jsxs)(k.$,{variant:"outline",size:"sm",onClick:c,disabled:d,children:[(0,t.jsx)(_.A,{className:"h-4 w-4 mr-2"}),"Clear Selection"]})]})}),(0,t.jsxs)(i.Wu,{className:"space-y-4",children:[(0,t.jsx)(H,{selectedPosters:j,onImmediateProcess:f,onBatchProcess:v}),(0,t.jsx)("div",{className:"flex items-center space-x-2",children:1===s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(k.$,{onClick:()=>f(j[0]),disabled:d,className:"flex-1",children:[(0,t.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"Generate Preview"]}),(0,t.jsxs)(k.$,{onClick:b,disabled:d,variant:"outline",children:[(0,t.jsx)(D.A,{className:"h-4 w-4 mr-2"}),"Replace Poster"]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(k.$,{onClick:v,disabled:d,className:"flex-1",children:[(0,t.jsx)(E.A,{className:"h-4 w-4 mr-2"}),"Create Batch Job"]}),(0,t.jsxs)(k.$,{onClick:b,disabled:d,variant:"outline",children:[(0,t.jsx)(D.A,{className:"h-4 w-4 mr-2"}),"Replace Posters"]})]})})]})]}),m&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsx)("div",{className:"max-w-2xl w-full",children:(0,t.jsx)(V,{selectedPosters:j,onJobCreated:e=>{p("Batch Job Created",s),u(!1),c()},onCancel:()=>u(!1)})})}),(0,t.jsx)(en,{open:h,onOpenChange:x,selectedItems:j,onSuccess:N})]})};function ei(e){let{totalItems:s,selectedCount:a,allSelected:l,onSelectAll:r,onSelectNone:c,onToggleSelectionMode:i,selectionMode:o}=e;return o?(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(p.S,{checked:l,onCheckedChange:e=>{e?r():c()},className:a>0&&!l?"data-[state=indeterminate]:bg-primary":""}),(0,t.jsx)("label",{className:"text-sm font-medium",children:"Select All"})]}),(0,t.jsxs)(n.E,{variant:"secondary",className:"text-sm",children:[a," of ",s," selected"]})]}),(0,t.jsx)(k.$,{variant:"ghost",size:"sm",onClick:i,children:"Cancel Selection"})]}):(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(n.E,{variant:"outline",className:"text-sm",children:[s," item",1!==s?"s":""," total"]}),(0,t.jsx)(k.$,{variant:"outline",size:"sm",onClick:i,children:"Select Items"})]})}let eo=(0,o.A)("chevrons-left",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),ed=(0,o.A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),em=(0,o.A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),eu=(0,o.A)("chevrons-right",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);function eh(e){let{currentPage:s,totalItems:a,itemsPerPage:l,onPageChange:r,onItemsPerPageChange:n,loading:i=!1}=e,o=Math.ceil(a/l),d=(s-1)*l+1,m=Math.min(s*l,a);return 0===a?null:(0,t.jsxs)("div",{className:"flex items-center justify-between px-2 py-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",d," to ",m," of ",a," items"]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Show:"}),(0,t.jsxs)(c.l6,{value:l.toString(),onValueChange:e=>n(parseInt(e)),disabled:i,children:[(0,t.jsx)(c.bq,{className:"w-20",children:(0,t.jsx)(c.yv,{})}),(0,t.jsxs)(c.gC,{children:[(0,t.jsx)(c.eb,{value:"25",children:"25"}),(0,t.jsx)(c.eb,{value:"50",children:"50"}),(0,t.jsx)(c.eb,{value:"100",children:"100"}),(0,t.jsx)(c.eb,{value:"200",children:"200"})]})]}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"per page"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground mr-4",children:["Page ",s," of ",o]}),(0,t.jsx)(k.$,{variant:"outline",size:"sm",onClick:()=>r(1),disabled:1===s||i,children:(0,t.jsx)(eo,{className:"h-4 w-4"})}),(0,t.jsx)(k.$,{variant:"outline",size:"sm",onClick:()=>r(s-1),disabled:1===s||i,children:(0,t.jsx)(ed,{className:"h-4 w-4"})}),Array.from({length:Math.min(5,o)},(e,a)=>{let l;return l=o<=5||s<=3?a+1:s>=o-2?o-4+a:s-2+a,(0,t.jsx)(k.$,{variant:l===s?"default":"outline",size:"sm",onClick:()=>r(l),disabled:i,className:"w-8",children:l},l)}),(0,t.jsx)(k.$,{variant:"outline",size:"sm",onClick:()=>r(s+1),disabled:s===o||i,children:(0,t.jsx)(em,{className:"h-4 w-4"})}),(0,t.jsx)(k.$,{variant:"outline",size:"sm",onClick:()=>r(o),disabled:s===o||i,children:(0,t.jsx)(eu,{className:"h-4 w-4"})})]})]})}var ex=a(4616),ep=a(7712),eg=a(133),ej=a(8564);let ef=(0,o.A)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var ev=a(9434);let eb=[{id:"audio",name:"Audio Codec",description:"DTS-HD MA, Atmos, Dolby Digital Plus, etc."},{id:"resolution",name:"Resolution",description:"4K, 1080p, HDR, Dolby Vision, etc."},{id:"review",name:"Reviews & Ratings",description:"IMDb, TMDb, Rotten Tomatoes, Metacritic"},{id:"awards",name:"Awards",description:"Oscars, Emmys, Golden Globes, etc."}];function eN(e){let{isOpen:s,onClose:a,onApply:r,isLoading:n}=e,[c,i]=(0,l.useState)([]),o=e=>{i(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},d=async()=>{if(0===c.length)return void K.oR.error("Please select at least one badge type");try{await r(c),i([])}catch(e){}},m=()=>{n||(i([]),a())};return(0,t.jsx)(es.lG,{open:s,onOpenChange:m,children:(0,t.jsxs)(es.Cf,{className:"max-w-md",children:[(0,t.jsx)(es.c7,{children:(0,t.jsx)(es.L3,{children:"Select Badges to Apply"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Choose which badge types to apply to this poster:"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(k.$,{variant:"outline",size:"sm",onClick:()=>{i(eb.map(e=>e.id))},disabled:n,children:"Select All"}),(0,t.jsx)(k.$,{variant:"outline",size:"sm",onClick:()=>{i([])},disabled:n,children:"Select None"})]}),(0,t.jsx)(ea.w,{}),(0,t.jsx)("div",{className:"space-y-3",children:eb.map(e=>(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)(p.S,{id:e.id,checked:c.includes(e.id),onCheckedChange:()=>o(e.id),disabled:n}),(0,t.jsxs)("div",{className:"grid gap-1.5 leading-none",children:[(0,t.jsx)(U.J,{htmlFor:e.id,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})]})]},e.id))}),(0,t.jsx)(ea.w,{}),(0,t.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,t.jsx)(k.$,{variant:"outline",onClick:m,disabled:n,children:"Cancel"}),(0,t.jsx)(k.$,{onClick:d,disabled:n||0===c.length,children:n?"Applying...":"Apply ".concat(c.length," Badge").concat(1!==c.length?"s":"")})]})]})]})})}var ey=a(1788),ew=a(6766);let ek={en:"English",de:"German",fr:"French",es:"Spanish",it:"Italian",ja:"Japanese",ko:"Korean",zh:"Chinese",pt:"Portuguese",ru:"Russian",nl:"Dutch",sv:"Swedish",da:"Danish",no:"Norwegian",fi:"Finnish",pl:"Polish",cs:"Czech",hu:"Hungarian",tr:"Turkish",ar:"Arabic",he:"Hebrew"};function eC(e){let{item:s,isOpen:a,onClose:r,onPosterReplaced:i,onRefreshGrid:o}=e,[d,m]=(0,l.useState)(!1),[u,h]=(0,l.useState)(!1),[x,p]=(0,l.useState)([]),[g,j]=(0,l.useState)(null),[f,v]=(0,l.useState)(null),[b,N]=(0,l.useState)("en");(0,l.useEffect)(()=>{a&&s?y():(p([]),j(null),v(null),N("en"))},[a,null==s?void 0:s.id]),(0,l.useEffect)(()=>{x.length>0&&"en"===b&&(x.some(e=>"en"===e.language)||N("all"))},[x,b]);let y=async()=>{if(s){m(!0),v(null);try{let a=await fetch("/api/v1/poster-replacement/items/".concat(s.id,"/poster-sources"));if(!a.ok)throw Error("Search failed: ".concat(a.status));let t=await a.json();if(t.success){var e;p(t.posters||[]),(null==(e=t.posters)?void 0:e.length)===0&&v("No alternative posters found from external sources")}else v(t.message||"Failed to search for posters")}catch(e){console.error("Error searching poster sources:",e),v("Search failed: ".concat(e.message))}finally{m(!1)}}},w=e=>{j(e)},S=(0,l.useMemo)(()=>{let e=new Set;x.forEach(s=>{s.language?e.add(s.language):e.add("textless")});let s=Array.from(e).filter(e=>"textless"!==e).sort((e,s)=>{if("en"===e)return -1;if("en"===s)return 1;let a=ek[e]||e.toUpperCase(),t=ek[s]||s.toUpperCase();return a.localeCompare(t)});return e.has("textless")&&s.push("textless"),s},[x]),A=(0,l.useMemo)(()=>"all"===b?x:"textless"===b?x.filter(e=>!e.language):x.filter(e=>e.language===b),[x,b]);(0,l.useEffect)(()=>{g&&!A.find(e=>e.id===g.id)&&j(null)},[A,g]);let D=async()=>{if(s&&g){h(!0);try{let e=await fetch("/api/v1/poster-replacement/items/".concat(s.id,"/replace-poster"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_id:s.id,jellyfin_id:s.jellyfin_id,selected_poster:g})});if(!e.ok){let s=await e.json().catch(()=>({}));throw Error(s.message||"Replace failed: ".concat(e.status))}let a=await e.json();if(a.success)i(s.id,a.new_poster_url),o&&o(),K.oR.success(a.message),r();else throw Error(a.message||"Failed to replace poster")}catch(e){console.error("Error replacing poster:",e),K.oR.error("Failed to replace poster: ".concat(e.message))}finally{h(!1)}}};return s?(0,t.jsx)(es.lG,{open:a,onOpenChange:r,children:(0,t.jsxs)(es.Cf,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(es.c7,{children:(0,t.jsxs)(es.L3,{className:"flex items-center gap-2",children:[(0,t.jsx)(C.A,{className:"h-5 w-5"}),"Replace Poster: ",s.title]})}),(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-blue-800",children:[(0,t.jsx)(C.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{className:"text-sm",children:["Searching external sources for alternative posters for ",(0,t.jsx)("strong",{children:s.title}),s.year&&" (".concat(s.year,")")]})]})}),d&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,t.jsx)(e_,{className:"h-8 w-8 mb-4"}),(0,t.jsx)("p",{children:"Searching external sources..."})]}),f&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-red-800",children:[(0,t.jsx)(_.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm",children:f})]})}),!d&&!f&&x.length>0&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(T,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Language Filter:"})]}),(0,t.jsxs)(c.l6,{value:b,onValueChange:N,children:[(0,t.jsx)(c.bq,{className:"w-48",children:(0,t.jsx)(c.yv,{placeholder:"Filter by language"})}),(0,t.jsxs)(c.gC,{children:[(0,t.jsxs)(c.eb,{value:"all",children:["All Languages (",x.length,")"]}),S.map(e=>{let s="textless"===e?x.filter(e=>!e.language).length:x.filter(s=>s.language===e).length;if("textless"===e)return(0,t.jsxs)(c.eb,{value:e,children:["Textless (",s,")"]},e);let a=ek[e]||e.toUpperCase();return(0,t.jsxs)(c.eb,{value:e,children:[a," (",s,")"]},e)})]})]})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["all"===b?"Found ".concat(x.length," alternative posters. Click to select:"):"Showing ".concat(A.length," of ").concat(x.length," posters. Click to select:"),0===A.length&&"all"!==b&&(0,t.jsx)("span",{className:"text-amber-600 ml-2",children:"No posters available for selected language filter."})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:A.map(e=>{var s;return(0,t.jsxs)("div",{className:"cursor-pointer rounded-lg border-2 transition-all hover:shadow-lg ".concat((null==g?void 0:g.id)===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>w(e),children:[(0,t.jsxs)("div",{className:"relative aspect-[2/3] bg-muted rounded-t-lg overflow-hidden",children:[e.thumbnail_url&&(0,t.jsx)(ew.default,{src:e.thumbnail_url,alt:"".concat(e.source," poster"),fill:!0,className:"object-cover",onError:s=>{s.currentTarget.src=e.url}}),(0,t.jsx)("div",{className:"absolute top-2 left-2",children:(0,t.jsx)(n.E,{variant:"secondary",className:"text-xs",children:e.source.toUpperCase()})}),!e.language&&(0,t.jsx)("div",{className:"absolute top-2 left-2 mt-6",children:(0,t.jsx)(n.E,{variant:"outline",className:"text-xs bg-green-100 text-green-800 border-green-300",children:"Textless"})}),e.width&&e.height&&(0,t.jsx)("div",{className:"absolute top-2 right-2",children:(0,t.jsxs)(n.E,{variant:"outline",className:"text-xs",children:[e.width,"\xd7",e.height]})}),(null==g?void 0:g.id)===e.id&&(0,t.jsx)("div",{className:"absolute inset-0 bg-blue-500 bg-opacity-20 flex items-center justify-center",children:(0,t.jsx)("div",{className:"bg-blue-500 text-white rounded-full p-2",children:(0,t.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})]}),(0,t.jsx)("div",{className:"p-3 space-y-1",children:(0,t.jsxs)("div",{className:"text-xs space-y-1",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Language:"})," ",e.language?e.language.toUpperCase():"Textless"]}),e.file_size_estimate&&(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Size:"})," ",e.file_size_estimate]}),e.vote_count&&e.vote_count>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Rating:"})," ",(null==(s=e.vote_average)?void 0:s.toFixed(1))||"N/A","/10 (",e.vote_count," votes)"]})]})})]},e.id)})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t",children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:g&&(0,t.jsxs)(t.Fragment,{children:["Selected: ",g.source.toUpperCase()," poster",g.width&&g.height&&" (".concat(g.width,"\xd7").concat(g.height,")")]})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(k.$,{variant:"outline",onClick:r,disabled:u,children:"Cancel"}),(0,t.jsx)(k.$,{onClick:D,disabled:!g||u,className:"min-w-[120px]",children:u?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e_,{className:"h-4 w-4 mr-2"}),"Replacing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ey.A,{className:"h-4 w-4 mr-2"}),"Replace Poster"]})})]})]})]})}):null}let e_=e=>{let{className:s}=e;return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:(0,ev.cn)("animate-spin",s),children:(0,t.jsx)("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})})};function eS(e){let{item:s,isOpen:a,onClose:r,onTagUpdate:c,onPosterUpdate:i,onRefreshGrid:o}=e,[d,m]=(0,l.useState)(!1),[u,h]=(0,l.useState)(!1),[x,p]=(0,l.useState)(!1),[f,v]=(0,l.useState)(!1),[N,y]=(0,l.useState)(void 0),[w,C]=(0,l.useState)(!1),[_,S]=(0,l.useState)(!1);if((0,l.useEffect)(()=>{s&&(y(void 0),m(!1),h(!1),p(!1),v(!1),C(!1))},[null==s?void 0:s.id]),!s)return null;let A=N||s.poster_url,E=async e=>{if(s)try{h(!0);let a=await fetch("add"===e?"/api/v1/poster-manager/tags/add":"/api/v1/poster-manager/tags/remove",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_ids:[s.id]})});if(!a.ok)throw Error("Failed to ".concat(e," tag"));let t=await a.json();if(t.success)c(s.id,"add"===e),K.oR.success("Tag ".concat("add"===e?"added":"removed"," successfully")),r();else throw Error(t.message||"Failed to ".concat(e," tag"))}catch(s){console.error("Error ".concat(e,"ing tag:"),s),K.oR.error("Failed to ".concat(e," tag"))}finally{h(!1)}},R=async()=>{if(s)try{v(!0);let e=await fetch("/api/v1/poster-manager/restore-original",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_id:s.id,jellyfin_id:s.jellyfin_id})});if(!e.ok){let s=await e.json().catch(()=>({}));throw Error(s.message||"Failed to restore original: ".concat(e.status))}let a=await e.json();if(a.success){let e=Date.now(),t=s.poster_url?"".concat(s.poster_url,"?restored=").concat(e):"/api/v1/images/proxy/image/".concat(s.jellyfin_id,"/thumbnail?restored=").concat(e);y(t),m(!1),c(s.id,!1),i(s.id,t),o&&o(),r(),K.oR.success(a.message)}else throw Error(a.message||"Failed to restore original poster")}catch(e){console.error("Error restoring original poster:",e),K.oR.error("Failed to restore original: ".concat(e.message))}finally{v(!1)}},T=async e=>{if(s)try{p(!0);let t=await fetch("/api/v1/poster-manager/apply-badges",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_id:s.id,jellyfin_id:s.jellyfin_id,badge_types:e})});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.message||"Failed to apply badges: ".concat(t.status))}let l=await t.json();if(l.success){var a;let e=Date.now(),t="/api/v1/images/proxy/image/".concat(s.jellyfin_id,"/thumbnail?badged=").concat(e);y(t),m(!1),c(s.id,!0),i(s.id,t),o&&o(),C(!1),r(),K.oR.success("Badges applied successfully! (".concat((null==(a=l.applied_badges)?void 0:a.join(", "))||"Unknown badges",")"))}else throw Error(l.message||"Failed to apply badges")}catch(e){console.error("Error applying badges:",e),K.oR.error("Failed to apply badges: ".concat(e.message))}finally{p(!1)}};return(0,t.jsx)(es.lG,{open:a,onOpenChange:r,children:(0,t.jsxs)(es.Cf,{className:"max-w-7xl max-h-[95vh] overflow-y-auto",children:[(0,t.jsx)(es.c7,{children:(0,t.jsx)(es.L3,{className:"text-xl font-semibold",children:s.title})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"relative aspect-[2/3] bg-muted rounded-lg overflow-hidden",children:[(x||f)&&(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-10",children:(0,t.jsxs)("div",{className:"bg-background border rounded-lg p-4 flex flex-col items-center gap-2 shadow-lg",children:[(0,t.jsx)(e_,{className:"h-8 w-8 text-foreground"}),(0,t.jsx)("span",{className:"text-sm font-medium text-foreground",children:x?"Applying badges...":"Restoring original..."})]})}),A&&!d?(0,t.jsx)("img",{src:b(A),alt:s.title,className:"w-full h-full object-cover",onError:()=>m(!0)},A):(0,t.jsx)("div",{className:"flex items-center justify-center h-full bg-muted",children:(0,t.jsx)(g,{className:"h-16 w-16 text-muted-foreground"})}),(0,t.jsx)("div",{className:"absolute top-4 left-4",children:(0,t.jsx)(n.E,{variant:"BADGED"===s.badge_status?"destructive":"secondary",className:"text-sm",children:s.badge_status})})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,t.jsxs)(k.$,{onClick:()=>C(!0),disabled:x||f,className:"w-full",children:[(0,t.jsx)(D.A,{className:"h-4 w-4 mr-2"}),"Apply Badges"]}),"ORIGINAL"===s.badge_status?(0,t.jsxs)(k.$,{onClick:()=>E("add"),disabled:u||x||f,variant:"outline",className:"w-full",children:[(0,t.jsx)(ex.A,{className:"h-4 w-4 mr-2"}),"Add Aphrodite Tag"]}):(0,t.jsxs)(k.$,{onClick:()=>E("remove"),disabled:u||x||f,variant:"outline",className:"w-full",children:[(0,t.jsx)(ep.A,{className:"h-4 w-4 mr-2"}),"Remove Aphrodite Tag"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,t.jsxs)(k.$,{onClick:()=>{S(!0)},disabled:x||f,variant:"outline",className:"w-full",children:[(0,t.jsx)(D.A,{className:"h-4 w-4 mr-2"}),"Replace Poster"]}),(0,t.jsxs)(k.$,{onClick:R,disabled:x||f,variant:"outline",className:"w-full",children:[(0,t.jsx)(eg.A,{className:"h-4 w-4 mr-2"}),"Restore to Original"]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(j,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:s.year||"Unknown Year"}),(0,t.jsx)(ea.w,{orientation:"vertical",className:"h-4"}),(0,t.jsx)(n.E,{variant:"outline",className:"capitalize",children:s.type})]}),(s.community_rating||s.official_rating)&&(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[s.community_rating&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(ej.A,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:s.community_rating.toFixed(1)})]}),s.official_rating&&(0,t.jsx)(n.E,{variant:"secondary",className:"text-xs",children:s.official_rating})]})]}),(0,t.jsx)(ea.w,{}),s.genres.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("h4",{className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(ef,{className:"h-4 w-4"}),"Genres"]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:s.genres.map(e=>(0,t.jsx)(n.E,{variant:"outline",className:"text-xs",children:e},e))})]}),(0,t.jsx)(ea.w,{}),s.overview&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"Overview"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed",children:s.overview})]}),(0,t.jsx)(ea.w,{}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"Technical Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-muted-foreground",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Jellyfin ID:"}),(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"font-mono break-all",children:s.jellyfin_id})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Internal ID:"}),(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"font-mono break-all",children:s.id})]})]})]})]})]}),(0,t.jsx)(eN,{isOpen:w,onClose:()=>C(!1),onApply:T,isLoading:x}),(0,t.jsx)(eC,{item:s,isOpen:_,onClose:()=>S(!1),onPosterReplaced:(e,s)=>{y(s),m(!1),i(e,s),o&&o()},onRefreshGrid:o})]})})}let eA=(0,o.A)("images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]),eD=(0,o.A)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);var eE=a(722);let eR=()=>window.location.origin;function eT(){let[e,s]=(0,l.useState)("library"),[a,c]=(0,l.useState)(0),[o,d]=(0,l.useState)([]),[m,u]=(0,l.useState)(""),[p,g]=(0,l.useState)([]),[j,f]=(0,l.useState)(null),[v,b]=(0,l.useState)(!1),[N,w]=(0,l.useState)(!1),[C,_]=(0,l.useState)(""),[A,D]=(0,l.useState)("all"),[E,T]=(0,l.useState)(1),[P,F]=(0,l.useState)(50),[M,z]=(0,l.useState)(0),[L,J]=(0,l.useState)(!1),[B,I]=(0,l.useState)(new Set),[O,$]=(0,l.useState)(!1),[W,q]=(0,l.useState)(null),[G,H]=(0,l.useState)(!1),U=async a=>{if(s(a),"jobs"===e&&"library"===a&&m){K.oR.info("Refreshing library to show latest badge status..."),w(!0);try{C||"all"!==A?await ee(E):await Y(E);let e=Date.now();g(s=>s.map(s=>{if(s.poster_url){let a=s.poster_url.includes("?")?"".concat(s.poster_url,"&refresh=").concat(e):"".concat(s.poster_url,"?refresh=").concat(e);return{...s,poster_url:a}}return s})),K.oR.success("Library refreshed successfully")}catch(e){console.error("Error refreshing library:",e),K.oR.error("Failed to refresh library")}finally{w(!1)}}};(0,l.useEffect)(()=>{V();let e=setInterval(V,3e4);return()=>clearInterval(e)},[]),(0,l.useEffect)(()=>{X()},[]),(0,l.useEffect)(()=>{m&&(_(""),D("all"),T(1),I(new Set),$(!1),Y(),Q())},[m]),(0,l.useEffect)(()=>{m&&(T(1),C||"all"!==A?ee(1):Y(1))},[C,A]);let V=async()=>{try{var e;let s=(null==(e=(await eE.apiService.getJobs({user_id:"default_user"})).jobs)?void 0:e.filter(e=>["processing","paused","queued"].includes(e.status)))||[];c(s.length)}catch(e){console.log("Could not load job count:",e)}},X=async()=>{try{b(!0);let e=await fetch("".concat(eR(),"/api/v1/poster-manager/libraries"));if(!e.ok)throw Error("HTTP ".concat(e.status,": ").concat(e.statusText));let s=await e.json();d(s.libraries||[]),s.libraries&&s.libraries.length>0&&u(s.libraries[0].id)}catch(e){console.error("Error loading libraries:",e),K.oR.error("Failed to load Jellyfin libraries. Please check your connection.")}finally{b(!1)}},Y=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(m)try{b(!0);let s=(e-1)*P,a=await fetch("".concat(eR(),"/api/v1/poster-manager/libraries/").concat(m,"/items?limit=").concat(P,"&offset=").concat(s));if(!a.ok)throw Error("HTTP ".concat(a.status,": ").concat(a.statusText));let t=await a.json();g(t.items||[]),z(t.total_count||0),J(t.has_more||!1),T(e)}catch(e){console.error("Error loading library items:",e),K.oR.error("Failed to load library items")}finally{b(!1)}},Q=async()=>{if(m)try{let e=await fetch("".concat(eR(),"/api/v1/poster-manager/libraries/").concat(m,"/stats"));if(!e.ok)throw Error("HTTP ".concat(e.status,": ").concat(e.statusText));let s=await e.json();f(s)}catch(e){console.error("Error loading library stats:",e)}},ee=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(m)try{b(!0);let s=(e-1)*P,a=new URLSearchParams({library_id:m,limit:P.toString(),offset:s.toString()});C.trim()&&a.append("query",C.trim()),"all"!==A&&a.append("badge_filter",A);let t=await fetch("".concat(eR(),"/api/v1/poster-manager/search?").concat(a));if(!t.ok)throw Error("HTTP ".concat(t.status,": ").concat(t.statusText));let l=await t.json();g(l.items||[]),z(l.total_count||0),J(l.has_more||!1),T(e)}catch(e){console.error("Error searching items:",e),K.oR.error("Failed to search items")}finally{b(!1)}},es=async()=>{w(!0),await X(),m&&(await Y(),await Q()),await V();let e=Date.now();g(s=>s.map(s=>{if(s.poster_url){let a=s.poster_url.includes("?")?"".concat(s.poster_url,"&refresh=").concat(e):"".concat(s.poster_url,"?refresh=").concat(e);return{...s,poster_url:a}}return s})),w(!1),K.oR.success("Library refreshed successfully")},ea=()=>{I(new Set)},et=async()=>{m&&(C||"all"!==A?await ee(E):await Y(E)),I(new Set),await V()},el=e=>{C||"all"!==A?ee(e):Y(e),I(new Set),$(!1)},er=e=>{F(e),T(1),C||"all"!==A?ee(1):Y(1),I(new Set),$(!1)},en=p.length>0&&B.size===p.length;return(0,t.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Poster Manager"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Browse, manage, and process your Jellyfin library posters"})]}),(0,t.jsxs)(k.$,{onClick:es,disabled:N,variant:"outline",children:[N?(0,t.jsx)(h.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,t.jsx)(R.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),(0,t.jsxs)(r.tU,{value:e,onValueChange:U,children:[(0,t.jsxs)(r.j7,{className:"grid w-full grid-cols-2",children:[(0,t.jsxs)(r.Xi,{value:"library",className:"flex items-center",children:[(0,t.jsx)(eA,{className:"h-4 w-4 mr-2"}),"Library"]}),(0,t.jsxs)(r.Xi,{value:"jobs",className:"flex items-center",children:[(0,t.jsx)(eD,{className:"h-4 w-4 mr-2"}),"Jobs",a>0&&(0,t.jsx)(n.E,{variant:"secondary",className:"ml-2",children:a})]})]}),(0,t.jsxs)(r.av,{value:"library",className:"space-y-6",children:[(0,t.jsx)(x,{libraries:o,selectedLibrary:m,onLibraryChange:u,loading:v}),j&&(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsx)(i.ZB,{children:"Library Overview"}),(0,t.jsx)(i.BT,{children:"Statistics for the selected library"})]}),(0,t.jsx)(i.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:j.total_items}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Items"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:j.movies}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Movies"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:j.tv_shows}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"TV Shows"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:j.genres.length}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Genres"})]})]})})]}),m&&(0,t.jsx)(S,{searchQuery:C,onSearchChange:_,badgeFilter:A,onBadgeFilterChange:D,onClearFilters:()=>{_(""),D("all")}}),m&&p.length>0&&(0,t.jsx)(ei,{totalItems:p.length,selectedCount:B.size,allSelected:en,onSelectAll:()=>{I(new Set(p.map(e=>e.id)))},onSelectNone:ea,onToggleSelectionMode:()=>{$(!O),O&&I(new Set)},selectionMode:O}),(0,t.jsx)(ec,{selectedCount:B.size,selectedItems:B,allItems:p,onClearSelection:ea,onRefreshItems:et,disabled:v}),m&&(0,t.jsxs)(t.Fragment,{children:[M>0&&(0,t.jsx)(eh,{currentPage:E,totalItems:M,itemsPerPage:P,onPageChange:el,onItemsPerPageChange:er,loading:v}),(0,t.jsx)(y,{items:p,loading:v,selectedItems:B,onSelectionChange:(e,s)=>{I(a=>{let t=new Set(a);return s?t.add(e):t.delete(e),t})},selectionMode:O,onPosterClick:e=>{q(e),H(!0)}}),M>0&&(0,t.jsx)(eh,{currentPage:E,totalItems:M,itemsPerPage:P,onPageChange:el,onItemsPerPageChange:er,loading:v})]}),!m&&!v&&(0,t.jsx)(i.Zp,{children:(0,t.jsx)(i.Wu,{className:"flex flex-col items-center justify-center py-10",children:(0,t.jsx)("p",{className:"text-muted-foreground text-center",children:"Select a library to view your media posters"})})})]}),(0,t.jsx)(r.av,{value:"jobs",children:(0,t.jsx)(Z,{})})]}),(0,t.jsx)(eS,{item:W,isOpen:G,onClose:()=>{H(!1),q(null)},onTagUpdate:(e,s)=>{g(a=>a.map(a=>{if(a.id===e){if(!s&&a.poster_url){let e=Date.now(),s=a.poster_url.includes("?")?"".concat(a.poster_url,"&refresh=").concat(e):"".concat(a.poster_url,"?refresh=").concat(e);return{...a,badge_status:"ORIGINAL",poster_url:s}}return{...a,badge_status:s?"BADGED":"ORIGINAL"}}return a}))},onPosterUpdate:(e,s)=>{let a=s.includes("?restored="),t=s.includes("?badged=");g(l=>l.map(l=>{if(l.id===e){let e=Date.now(),r=s.includes("?")?"".concat(s,"&t=").concat(e):"".concat(s,"?t=").concat(e);return{...l,poster_url:r,badge_status:a?"ORIGINAL":t?"BADGED":l.badge_status}}return l}))},onRefreshGrid:et})]})}},4944:(e,s,a)=>{"use strict";a.d(s,{k:()=>n});var t=a(5155);a(2115);var l=a(5863),r=a(9434);function n(e){let{className:s,value:a,...n}=e;return(0,t.jsx)(l.bL,{"data-slot":"progress",className:(0,r.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...n,children:(0,t.jsx)(l.C1,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})}},5057:(e,s,a)=>{"use strict";a.d(s,{J:()=>n});var t=a(5155);a(2115);var l=a(968),r=a(9434);function n(e){let{className:s,...a}=e;return(0,t.jsx)(l.b,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...a})}},5365:(e,s,a)=>{"use strict";a.d(s,{Fc:()=>c,TN:()=>o,XL:()=>i});var t=a(5155);a(2115);var l=a(2085),r=a(9434);let n=(0,l.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function c(e){let{className:s,variant:a,...l}=e;return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,r.cn)(n({variant:a}),s),...l})}function i(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"alert-title",className:(0,r.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",s),...a})}function o(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"alert-description",className:(0,r.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...a})}},7262:(e,s,a)=>{"use strict";a.d(s,{S:()=>c});var t=a(5155);a(2115);var l=a(6981),r=a(5196),n=a(9434);function c(e){let{className:s,...a}=e;return(0,t.jsx)(l.bL,{"data-slot":"checkbox",className:(0,n.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:(0,t.jsx)(l.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,t.jsx)(r.A,{className:"size-3.5"})})})}},7580:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},7712:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},7924:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},8564:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},8889:(e,s,a)=>{Promise.resolve().then(a.bind(a,4496))},8979:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[455,671,904,433,438,321,103,182,269,441,684,358],()=>s(8889)),_N_E=e.O()}]);