(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{285:(e,a,s)=>{"use strict";s.d(a,{$:()=>d});var n=s(5155);s(2115);var t=s(9708),i=s(2085),r=s(9434);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:a,variant:s,size:i,asChild:d=!1,...c}=e,o=d?t.DX:"button";return(0,n.jsx)(o,{"data-slot":"button",className:(0,r.cn)(l({variant:s,size:i,className:a})),...c})}},333:(e,a,s)=>{"use strict";s.d(a,{d:()=>r});var n=s(5155);s(2115);var t=s(4884),i=s(9434);function r(e){let{className:a,...s}=e;return(0,n.jsx)(t.bL,{"data-slot":"switch",className:(0,i.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...s,children:(0,n.jsx)(t.zi,{"data-slot":"switch-thumb",className:(0,i.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}},1047:(e,a,s)=>{Promise.resolve().then(s.bind(s,1614))},1614:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>e2,dynamic:()=>eK});var n=s(5155),t=s(2115),i=s(5695),r=s(6695),l=s(7313),d=s(1154),c=s(646),o=s(285),m=s(2523),g=s(5057),h=s(6126),x=s(4861),u=s(4229),p=s(6671);let j=()=>window.location.origin;var v=s(5273),b=s(333),f=s(9409);function y(e){let{settings:a,updateSetting:s}=e;return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"General Badge Settings"}),(0,n.jsx)(r.BT,{children:"Configure basic badge positioning and sizing for audio badges"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"badge-size",children:"Badge Size"}),(0,n.jsx)(m.p,{id:"badge-size",type:"number",min:"10",value:a.General.general_badge_size,onChange:e=>s("General.general_badge_size",parseInt(e.target.value)||100)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"edge-padding",children:"Edge Padding"}),(0,n.jsx)(m.p,{id:"edge-padding",type:"number",min:"0",value:a.General.general_edge_padding,onChange:e=>s("General.general_edge_padding",parseInt(e.target.value)||30)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"badge-position",children:"Badge Position"}),(0,n.jsxs)(f.l6,{value:a.General.general_badge_position,onValueChange:e=>s("General.general_badge_position",e),children:[(0,n.jsx)(f.bq,{children:(0,n.jsx)(f.yv,{})}),(0,n.jsxs)(f.gC,{children:[(0,n.jsx)(f.eb,{value:"top-left",children:"Top Left"}),(0,n.jsx)(f.eb,{value:"top-right",children:"Top Right"}),(0,n.jsx)(f.eb,{value:"bottom-left",children:"Bottom Left"}),(0,n.jsx)(f.eb,{value:"bottom-right",children:"Bottom Right"})]})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"text-padding",children:"Text Padding"}),(0,n.jsx)(m.p,{id:"text-padding",type:"number",min:"0",value:a.General.general_text_padding,onChange:e=>s("General.general_text_padding",parseInt(e.target.value)||12)})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(b.d,{id:"dynamic-sizing",checked:a.General.use_dynamic_sizing,onCheckedChange:e=>s("General.use_dynamic_sizing",e)}),(0,n.jsx)(g.J,{htmlFor:"dynamic-sizing",children:"Use Dynamic Sizing"})]})]})]})}var _=s(3500);let N=()=>["AvenirNextLTProBold.otf","DejaVuSans.ttf","Arial","Helvetica","Times New Roman","Courier New","Georgia","Verdana","Tahoma","Comic Sans MS","Impact","Trebuchet MS"],w=async()=>{try{return N()}catch(e){return console.error("Error loading fonts:",e),N()}},C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[...N(),...e].filter((e,a,s)=>s.indexOf(e)===a)};function B(e){let{value:a,onValueChange:s,availableFonts:t=[],placeholder:i="Select a font...",disabled:r=!1}=e,l=C(t);return(0,n.jsxs)(f.l6,{value:a,onValueChange:s,disabled:r,children:[(0,n.jsx)(f.bq,{children:(0,n.jsx)(f.yv,{placeholder:i})}),(0,n.jsx)(f.gC,{children:l.map(e=>(0,n.jsx)(f.eb,{value:e,children:e},e))})]})}function k(e){let{settings:a,updateSetting:s,availableFonts:t}=e;return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(_.A,{className:"h-5 w-5"}),"Text Settings"]}),(0,n.jsx)(r.BT,{children:"Configure font, size, and text appearance for audio badges"})]}),(0,n.jsx)(r.Wu,{className:"space-y-4",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"font",children:"Primary Font"}),(0,n.jsx)(B,{value:a.Text.font,onValueChange:e=>s("Text.font",e),availableFonts:t,placeholder:"Select a font..."})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"fallback-font",children:"Fallback Font"}),(0,n.jsx)(B,{value:a.Text.fallback_font,onValueChange:e=>s("Text.fallback_font",e),availableFonts:t,placeholder:"Select a font..."})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"text-color",children:"Text Color"}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"color",value:a.Text["text-color"],onChange:e=>s("Text.text-color",e.target.value),className:"w-12 h-10 border rounded cursor-pointer"}),(0,n.jsx)(m.p,{type:"text",value:a.Text["text-color"],onChange:e=>s("Text.text-color",e.target.value),className:"flex-1",placeholder:"#FFFFFF"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"text-size",children:"Text Size"}),(0,n.jsx)(m.p,{id:"text-size",type:"number",min:"10",value:a.Text["text-size"],onChange:e=>s("Text.text-size",parseInt(e.target.value)||90),placeholder:"90"})]})]})})]})}function S(e){let{settings:a,updateSetting:s}=e;return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"Background Settings"}),(0,n.jsx)(r.BT,{children:"Configure badge background appearance for audio badges"})]}),(0,n.jsx)(r.Wu,{className:"space-y-4",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"background-color",children:"Background Color"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("input",{type:"color",value:a.Background["background-color"],onChange:e=>s("Background.background-color",e.target.value),className:"w-12 h-10 rounded border border-input"}),(0,n.jsx)(m.p,{value:a.Background["background-color"],onChange:e=>s("Background.background-color",e.target.value),placeholder:"#000000",className:"flex-1"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"background-opacity",children:"Background Opacity (%)"}),(0,n.jsx)(m.p,{id:"background-opacity",type:"number",min:"0",max:"100",value:a.Background.background_opacity,onChange:e=>s("Background.background_opacity",parseInt(e.target.value)||40)})]})]})})]})}function A(e){let{settings:a,updateSetting:s}=e;return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"Border Settings"}),(0,n.jsx)(r.BT,{children:"Configure badge border appearance for audio badges"})]}),(0,n.jsx)(r.Wu,{className:"space-y-4",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"border-color",children:"Border Color"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("input",{type:"color",value:a.Border["border-color"],onChange:e=>s("Border.border-color",e.target.value),className:"w-12 h-10 rounded border border-input"}),(0,n.jsx)(m.p,{value:a.Border["border-color"],onChange:e=>s("Border.border-color",e.target.value),placeholder:"#000000",className:"flex-1"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"border-radius",children:"Border Radius"}),(0,n.jsx)(m.p,{id:"border-radius",type:"number",min:"0",value:a.Border["border-radius"],onChange:e=>s("Border.border-radius",parseInt(e.target.value)||10)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"border-width",children:"Border Width"}),(0,n.jsx)(m.p,{id:"border-width",type:"number",min:"0",value:a.Border.border_width,onChange:e=>s("Border.border_width",parseInt(e.target.value)||1)})]})]})})]})}function T(e){let{settings:a,updateSetting:s}=e;return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"Shadow Settings"}),(0,n.jsx)(r.BT,{children:"Configure badge drop shadow effects for audio badges"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,n.jsx)(b.d,{id:"shadow-enable",checked:a.Shadow.shadow_enable,onCheckedChange:e=>s("Shadow.shadow_enable",e)}),(0,n.jsx)(g.J,{htmlFor:"shadow-enable",children:"Enable Shadow"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"shadow-blur",children:"Shadow Blur"}),(0,n.jsx)(m.p,{id:"shadow-blur",type:"number",min:"0",value:a.Shadow.shadow_blur,onChange:e=>s("Shadow.shadow_blur",parseInt(e.target.value)||8),disabled:!a.Shadow.shadow_enable})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"shadow-offset-x",children:"Shadow Offset X"}),(0,n.jsx)(m.p,{id:"shadow-offset-x",type:"number",value:a.Shadow.shadow_offset_x,onChange:e=>s("Shadow.shadow_offset_x",parseInt(e.target.value)||2),disabled:!a.Shadow.shadow_enable})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"shadow-offset-y",children:"Shadow Offset Y"}),(0,n.jsx)(m.p,{id:"shadow-offset-y",type:"number",value:a.Shadow.shadow_offset_y,onChange:e=>s("Shadow.shadow_offset_y",parseInt(e.target.value)||2),disabled:!a.Shadow.shadow_enable})]})]})]})]})}var I=s(2525),E=s(4616);function D(e){let{settings:a,updateSetting:s,addAudioMapping:i,removeAudioMapping:l,updateCodecName:d}=e,[c,x]=(0,t.useState)({codec:"",image:""});return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"Image Badge Settings"}),(0,n.jsx)(r.BT,{children:"Configure image-based badges and audio codec mappings"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(b.d,{id:"enable-image-badges",checked:a.ImageBadges.enable_image_badges,onCheckedChange:e=>s("ImageBadges.enable_image_badges",e)}),(0,n.jsx)(g.J,{htmlFor:"enable-image-badges",children:"Enable Image Badges"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"codec-directory",children:"Audio Image Directory"}),(0,n.jsx)(m.p,{id:"codec-directory",type:"text",value:a.ImageBadges.codec_image_directory,onChange:e=>s("ImageBadges.codec_image_directory",e.target.value),disabled:!a.ImageBadges.enable_image_badges,placeholder:"images/audio"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"image-padding",children:"Image Padding"}),(0,n.jsx)(m.p,{id:"image-padding",type:"number",min:"0",value:a.ImageBadges.image_padding,onChange:e=>s("ImageBadges.image_padding",parseInt(e.target.value)||0),disabled:!a.ImageBadges.enable_image_badges})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(b.d,{id:"fallback-to-text",checked:a.ImageBadges.fallback_to_text,onCheckedChange:e=>s("ImageBadges.fallback_to_text",e),disabled:!a.ImageBadges.enable_image_badges}),(0,n.jsx)(g.J,{htmlFor:"fallback-to-text",children:"Fallback to Text"})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("h4",{className:"text-lg font-semibold",children:"Audio Codec Image Mappings"}),(0,n.jsxs)(h.E,{variant:"secondary",children:[Object.keys(a.ImageBadges.image_mapping).length," mappings"]})]}),(0,n.jsxs)("div",{className:"max-h-60 overflow-y-auto space-y-2 border rounded-md p-4",children:[Object.entries(a.ImageBadges.image_mapping).map(e=>{let[t,i]=e;return(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(m.p,{value:t,onChange:e=>d(t,e.target.value),disabled:!a.ImageBadges.enable_image_badges,className:"flex-1",placeholder:"Audio Codec Name"}),(0,n.jsx)("span",{className:"text-muted-foreground",children:"→"}),(0,n.jsx)(m.p,{value:i,onChange:e=>s("ImageBadges.image_mapping.".concat(t),e.target.value),disabled:!a.ImageBadges.enable_image_badges,className:"flex-1",placeholder:"Image Filename"}),(0,n.jsx)(o.$,{type:"button",variant:"outline",size:"icon",onClick:()=>l(t),disabled:!a.ImageBadges.enable_image_badges,children:(0,n.jsx)(I.A,{className:"h-4 w-4"})})]},t)}),(0,n.jsxs)("div",{className:"flex items-center gap-2 pt-2 border-t",children:[(0,n.jsx)(m.p,{value:c.codec,onChange:e=>x(a=>({...a,codec:e.target.value})),disabled:!a.ImageBadges.enable_image_badges,placeholder:"New audio codec name",className:"flex-1"}),(0,n.jsx)("span",{className:"text-muted-foreground",children:"→"}),(0,n.jsx)(m.p,{value:c.image,onChange:e=>x(a=>({...a,image:e.target.value})),disabled:!a.ImageBadges.enable_image_badges,placeholder:"Image filename",className:"flex-1"}),(0,n.jsx)(o.$,{type:"button",variant:"outline",size:"icon",onClick:()=>{i(c.codec,c.image)&&x({codec:"",image:""})},disabled:!a.ImageBadges.enable_image_badges||!c.codec||!c.image,children:(0,n.jsx)(E.A,{className:"h-4 w-4"})})]})]})]})]})]})}var F=s(1539),R=s(402);function P(e){let{settings:a,updateSetting:s}=e,[i,l]=(0,t.useState)(""),[d,c]=(0,t.useState)(""),[x,u]=(0,t.useState)({from:"",to:""}),[p,j]=(0,t.useState)(""),v=e=>{s("EnhancedDetection.atmos_detection_patterns",a.EnhancedDetection.atmos_detection_patterns.filter((a,s)=>s!==e))},f=e=>{s("EnhancedDetection.dts_x_detection_patterns",a.EnhancedDetection.dts_x_detection_patterns.filter((a,s)=>s!==e))},y=e=>{let n={...a.EnhancedDetection.fallback_rules};delete n[e],s("EnhancedDetection.fallback_rules",n)},_=e=>{s("EnhancedDetection.priority_order",a.EnhancedDetection.priority_order.filter((a,s)=>s!==e))},N=(e,n)=>{let t=[...a.EnhancedDetection.priority_order],i="up"===n?e-1:e+1;i>=0&&i<t.length&&([t[e],t[i]]=[t[i],t[e]],s("EnhancedDetection.priority_order",t))};return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(F.A,{className:"h-5 w-5"}),"Enhanced Audio Detection"]}),(0,n.jsx)(r.BT,{children:"Configure advanced audio detection features including Dolby Atmos and DTS-X detection"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(b.d,{id:"enhanced-detection-enable",checked:a.EnhancedDetection.enabled,onCheckedChange:e=>s("EnhancedDetection.enabled",e)}),(0,n.jsx)(g.J,{htmlFor:"enhanced-detection-enable",children:"Enable Enhanced Detection"}),(0,n.jsx)(h.E,{variant:a.EnhancedDetection.enabled?"default":"secondary",children:a.EnhancedDetection.enabled?"Active":"Disabled"})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(R.A,{className:"h-4 w-4"}),(0,n.jsx)("h4",{className:"text-lg font-semibold",children:"Dolby Atmos Detection Patterns"}),(0,n.jsxs)(h.E,{variant:"outline",children:[a.EnhancedDetection.atmos_detection_patterns.length," patterns"]})]}),(0,n.jsxs)("div",{className:"space-y-2 border rounded-md p-4 max-h-40 overflow-y-auto",children:[a.EnhancedDetection.atmos_detection_patterns.map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(m.p,{value:e,onChange:e=>{let n=[...a.EnhancedDetection.atmos_detection_patterns];n[t]=e.target.value,s("EnhancedDetection.atmos_detection_patterns",n)},disabled:!a.EnhancedDetection.enabled,className:"flex-1"}),(0,n.jsx)(o.$,{type:"button",variant:"outline",size:"icon",onClick:()=>v(t),disabled:!a.EnhancedDetection.enabled,children:(0,n.jsx)(I.A,{className:"h-4 w-4"})})]},t)),(0,n.jsxs)("div",{className:"flex items-center gap-2 pt-2 border-t",children:[(0,n.jsx)(m.p,{value:i,onChange:e=>l(e.target.value),disabled:!a.EnhancedDetection.enabled,placeholder:"New Atmos pattern (e.g., 'truehd atmos')",className:"flex-1"}),(0,n.jsx)(o.$,{type:"button",variant:"outline",size:"icon",onClick:()=>{i.trim()&&(s("EnhancedDetection.atmos_detection_patterns",[...a.EnhancedDetection.atmos_detection_patterns,i.trim()]),l(""))},disabled:!a.EnhancedDetection.enabled||!i.trim(),children:(0,n.jsx)(E.A,{className:"h-4 w-4"})})]})]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(R.A,{className:"h-4 w-4"}),(0,n.jsx)("h4",{className:"text-lg font-semibold",children:"DTS-X Detection Patterns"}),(0,n.jsxs)(h.E,{variant:"outline",children:[a.EnhancedDetection.dts_x_detection_patterns.length," patterns"]})]}),(0,n.jsxs)("div",{className:"space-y-2 border rounded-md p-4 max-h-40 overflow-y-auto",children:[a.EnhancedDetection.dts_x_detection_patterns.map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(m.p,{value:e,onChange:e=>{let n=[...a.EnhancedDetection.dts_x_detection_patterns];n[t]=e.target.value,s("EnhancedDetection.dts_x_detection_patterns",n)},disabled:!a.EnhancedDetection.enabled,className:"flex-1"}),(0,n.jsx)(o.$,{type:"button",variant:"outline",size:"icon",onClick:()=>f(t),disabled:!a.EnhancedDetection.enabled,children:(0,n.jsx)(I.A,{className:"h-4 w-4"})})]},t)),(0,n.jsxs)("div",{className:"flex items-center gap-2 pt-2 border-t",children:[(0,n.jsx)(m.p,{value:d,onChange:e=>c(e.target.value),disabled:!a.EnhancedDetection.enabled,placeholder:"New DTS-X pattern (e.g., 'dts:x')",className:"flex-1"}),(0,n.jsx)(o.$,{type:"button",variant:"outline",size:"icon",onClick:()=>{d.trim()&&(s("EnhancedDetection.dts_x_detection_patterns",[...a.EnhancedDetection.dts_x_detection_patterns,d.trim()]),c(""))},disabled:!a.EnhancedDetection.enabled||!d.trim(),children:(0,n.jsx)(E.A,{className:"h-4 w-4"})})]})]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("h4",{className:"text-lg font-semibold",children:"Fallback Rules"}),(0,n.jsxs)(h.E,{variant:"outline",children:[Object.keys(a.EnhancedDetection.fallback_rules).length," rules"]})]}),(0,n.jsxs)("div",{className:"space-y-2 border rounded-md p-4 max-h-40 overflow-y-auto",children:[Object.entries(a.EnhancedDetection.fallback_rules).map(e=>{let[t,i]=e;return(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(m.p,{value:t,disabled:!0,className:"flex-1"}),(0,n.jsx)("span",{className:"text-muted-foreground",children:"→"}),(0,n.jsx)(m.p,{value:i,onChange:e=>{let n={...a.EnhancedDetection.fallback_rules};n[t]=e.target.value,s("EnhancedDetection.fallback_rules",n)},disabled:!a.EnhancedDetection.enabled,className:"flex-1"}),(0,n.jsx)(o.$,{type:"button",variant:"outline",size:"icon",onClick:()=>y(t),disabled:!a.EnhancedDetection.enabled,children:(0,n.jsx)(I.A,{className:"h-4 w-4"})})]},t)}),(0,n.jsxs)("div",{className:"flex items-center gap-2 pt-2 border-t",children:[(0,n.jsx)(m.p,{value:x.from,onChange:e=>u(a=>({...a,from:e.target.value})),disabled:!a.EnhancedDetection.enabled,placeholder:"From codec",className:"flex-1"}),(0,n.jsx)("span",{className:"text-muted-foreground",children:"→"}),(0,n.jsx)(m.p,{value:x.to,onChange:e=>u(a=>({...a,to:e.target.value})),disabled:!a.EnhancedDetection.enabled,placeholder:"To codec",className:"flex-1"}),(0,n.jsx)(o.$,{type:"button",variant:"outline",size:"icon",onClick:()=>{x.from.trim()&&x.to.trim()&&(s("EnhancedDetection.fallback_rules",{...a.EnhancedDetection.fallback_rules,[x.from.trim()]:x.to.trim()}),u({from:"",to:""}))},disabled:!a.EnhancedDetection.enabled||!x.from.trim()||!x.to.trim(),children:(0,n.jsx)(E.A,{className:"h-4 w-4"})})]})]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("h4",{className:"text-lg font-semibold",children:"Audio Priority Order"}),(0,n.jsxs)(h.E,{variant:"outline",children:[a.EnhancedDetection.priority_order.length," items"]})]}),(0,n.jsxs)("div",{className:"space-y-2 border rounded-md p-4 max-h-40 overflow-y-auto",children:[a.EnhancedDetection.priority_order.map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("span",{className:"text-sm text-muted-foreground w-8",children:[t+1,"."]}),(0,n.jsx)(m.p,{value:e,onChange:e=>{let n=[...a.EnhancedDetection.priority_order];n[t]=e.target.value,s("EnhancedDetection.priority_order",n)},disabled:!a.EnhancedDetection.enabled,className:"flex-1"}),(0,n.jsx)(o.$,{type:"button",variant:"outline",size:"sm",onClick:()=>N(t,"up"),disabled:!a.EnhancedDetection.enabled||0===t,children:"↑"}),(0,n.jsx)(o.$,{type:"button",variant:"outline",size:"sm",onClick:()=>N(t,"down"),disabled:!a.EnhancedDetection.enabled||t===a.EnhancedDetection.priority_order.length-1,children:"↓"}),(0,n.jsx)(o.$,{type:"button",variant:"outline",size:"icon",onClick:()=>_(t),disabled:!a.EnhancedDetection.enabled,children:(0,n.jsx)(I.A,{className:"h-4 w-4"})})]},t)),(0,n.jsxs)("div",{className:"flex items-center gap-2 pt-2 border-t",children:[(0,n.jsxs)("span",{className:"text-sm text-muted-foreground w-8",children:[a.EnhancedDetection.priority_order.length+1,"."]}),(0,n.jsx)(m.p,{value:p,onChange:e=>j(e.target.value),disabled:!a.EnhancedDetection.enabled,placeholder:"New priority item",className:"flex-1"}),(0,n.jsx)(o.$,{type:"button",variant:"outline",size:"icon",onClick:()=>{p.trim()&&(s("EnhancedDetection.priority_order",[...a.EnhancedDetection.priority_order,p.trim()]),j(""))},disabled:!a.EnhancedDetection.enabled||!p.trim(),children:(0,n.jsx)(E.A,{className:"h-4 w-4"})})]})]})]})]})]})}var z=s(8611),J=s(4213),Z=s(4186);function M(e){let{settings:a,updateSetting:s}=e;return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(z.A,{className:"h-5 w-5"}),"Performance Settings"]}),(0,n.jsx)(r.BT,{children:"Configure audio detection performance optimizations"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(F.A,{className:"h-4 w-4"}),(0,n.jsx)("h4",{className:"text-lg font-semibold",children:"Parallel Processing"}),(0,n.jsx)(h.E,{variant:a.Performance.enable_parallel_processing?"default":"secondary",children:a.Performance.enable_parallel_processing?"Enabled":"Disabled"})]}),(0,n.jsxs)("div",{className:"space-y-4 pl-6 border-l-2 border-muted",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(b.d,{id:"parallel-processing",checked:a.Performance.enable_parallel_processing,onCheckedChange:e=>s("Performance.enable_parallel_processing",e)}),(0,n.jsx)(g.J,{htmlFor:"parallel-processing",children:"Enable Parallel Processing for TV Series"})]}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Processes multiple episodes simultaneously for improved performance. Recommended for systems with multiple CPU cores."}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"max-episodes",children:"Max Episodes to Sample (TV Series)"}),(0,n.jsx)(m.p,{id:"max-episodes",type:"number",min:"1",max:"20",value:a.Performance.max_episodes_to_sample,onChange:e=>s("Performance.max_episodes_to_sample",parseInt(e.target.value)||5),disabled:!a.Performance.enable_parallel_processing}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Number of episodes to sample for audio detection in TV series. Higher values provide more accuracy but use more resources."})]})]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(J.A,{className:"h-4 w-4"}),(0,n.jsx)("h4",{className:"text-lg font-semibold",children:"Audio Detection Caching"}),(0,n.jsx)(h.E,{variant:a.Performance.enable_caching?"default":"secondary",children:a.Performance.enable_caching?"Enabled":"Disabled"})]}),(0,n.jsxs)("div",{className:"space-y-4 pl-6 border-l-2 border-muted",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(b.d,{id:"caching",checked:a.Performance.enable_caching,onCheckedChange:e=>s("Performance.enable_caching",e)}),(0,n.jsx)(g.J,{htmlFor:"caching",children:"Enable Audio Detection Caching"})]}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Caches audio detection results to avoid re-processing the same media files. Significantly improves performance for repeated operations."}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"cache-ttl",children:"Cache TTL (Hours)"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(Z.A,{className:"h-4 w-4 text-muted-foreground"}),(0,n.jsx)(m.p,{id:"cache-ttl",type:"number",min:"1",max:"168",value:a.Performance.cache_ttl_hours,onChange:e=>s("Performance.cache_ttl_hours",parseInt(e.target.value)||24),disabled:!a.Performance.enable_caching})]}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"How long to keep cached audio detection results. Default: 24 hours. Max: 168 hours (7 days)."})]})]})]}),(0,n.jsxs)("div",{className:"bg-muted/50 p-4 rounded-md space-y-2",children:[(0,n.jsx)("h5",{className:"font-semibold",children:"Performance Configuration Summary"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:"Parallel Processing:"}),(0,n.jsx)(h.E,{variant:a.Performance.enable_parallel_processing?"default":"outline",className:"text-xs",children:a.Performance.enable_parallel_processing?"ON":"OFF"})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:"Episode Sampling:"}),(0,n.jsxs)("span",{className:"font-mono",children:[a.Performance.max_episodes_to_sample," episodes"]})]})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:"Caching:"}),(0,n.jsx)(h.E,{variant:a.Performance.enable_caching?"default":"outline",className:"text-xs",children:a.Performance.enable_caching?"ON":"OFF"})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:"Cache Duration:"}),(0,n.jsxs)("span",{className:"font-mono",children:[a.Performance.cache_ttl_hours,"h"]})]})]})]}),(0,n.jsx)("div",{className:"text-xs text-muted-foreground mt-2",children:"\uD83D\uDCA1 For best performance: Enable both parallel processing and caching"})]})]})]})}var G=s(9397),L=s(5021),O=s(5690),W=s(4944),V=s(2118),X=s(5339);function $(e){let{coverageData:a,onRunAnalysis:s,loading:t}=e;if(!a)return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(V.A,{className:"h-5 w-5"}),"Audio Image Coverage Analysis"]}),(0,n.jsx)(r.BT,{children:"Analyze your audio image collection for gaps and coverage"})]}),(0,n.jsx)(r.Wu,{children:(0,n.jsx)(o.$,{onClick:s,disabled:t,children:t?"Analyzing...":"Run Coverage Analysis"})})]});let i=Object.keys(a.coverage_by_audio_format).length,l=Object.values(a.coverage_by_audio_format).filter(e=>e.has_base).length,d=i>0?Math.round(l/i*100):0;return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(V.A,{className:"h-5 w-5"}),"Audio Image Coverage Analysis"]}),(0,n.jsx)(r.BT,{children:"Analysis of your audio image collection and coverage gaps"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{className:"bg-muted/50 p-3 rounded-md text-center",children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:a.total_images}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Images"})]}),(0,n.jsxs)("div",{className:"bg-muted/50 p-3 rounded-md text-center",children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:i}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Audio Formats"})]}),(0,n.jsxs)("div",{className:"bg-muted/50 p-3 rounded-md text-center",children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:a.atmos_images.length}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Atmos Images"})]}),(0,n.jsxs)("div",{className:"bg-muted/50 p-3 rounded-md text-center",children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:a.dts_x_images.length}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"DTS-X Images"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-sm font-medium",children:"Base Format Coverage"}),(0,n.jsxs)("span",{className:"text-sm text-muted-foreground",children:[l,"/",i]})]}),(0,n.jsx)(W.k,{value:d,className:"w-full"}),(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:[d,"% of audio formats have base images"]})]}),(0,n.jsx)(o.$,{onClick:s,disabled:t,variant:"outline",size:"sm",children:t?"Analyzing...":"Refresh Analysis"})]})]}),(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"Format Coverage Details"}),(0,n.jsx)(r.BT,{children:"Detailed breakdown of audio format image availability"})]}),(0,n.jsx)(r.Wu,{children:(0,n.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:Object.entries(a.coverage_by_audio_format).map(e=>{let[a,s]=e;return(0,n.jsxs)("div",{className:"border rounded-md p-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(R.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"font-medium",children:a.toUpperCase()}),s.has_base?(0,n.jsx)(c.A,{className:"h-4 w-4 text-green-500"}):(0,n.jsx)(x.A,{className:"h-4 w-4 text-red-500"})]}),(0,n.jsxs)(h.E,{variant:s.has_base?"default":"destructive",children:[s.available_variants.length," available"]})]}),s.available_variants.length>0&&(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Available:"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-1",children:s.available_variants.map(e=>(0,n.jsx)(h.E,{variant:"outline",className:"text-xs",children:e},e))})]}),s.missing_variants.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Missing:"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-1",children:s.missing_variants.map(e=>(0,n.jsx)(h.E,{variant:"secondary",className:"text-xs",children:e},e))})]})]},a)})})})]}),a.standalone_images.length>0&&(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"Standalone Images"}),(0,n.jsx)(r.BT,{children:"Images that don't belong to specific format categories"})]}),(0,n.jsx)(r.Wu,{children:(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:a.standalone_images.map(e=>(0,n.jsx)(h.E,{variant:"outline",children:e},e))})})]}),Object.keys(a.fallback_coverage).length>0&&(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"Fallback Coverage"}),(0,n.jsx)(r.BT,{children:"Automatic fallback rules for missing images"})]}),(0,n.jsx)(r.Wu,{children:(0,n.jsx)("div",{className:"space-y-2",children:Object.entries(a.fallback_coverage).map(e=>{let[a,s]=e;return(0,n.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded",children:[(0,n.jsx)("span",{className:"font-medium",children:a}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"→"}),(0,n.jsx)("span",{children:s.target}),s.target_available?(0,n.jsx)(c.A,{className:"h-4 w-4 text-green-500"}):(0,n.jsx)(X.A,{className:"h-4 w-4 text-yellow-500"})]})]},a)})})})]}),(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"Premium Audio Features"}),(0,n.jsx)(r.BT,{children:"Dolby Atmos and DTS-X image availability"})]}),(0,n.jsx)(r.Wu,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(R.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"font-medium",children:"Dolby Atmos Images"}),(0,n.jsx)(h.E,{variant:"outline",children:a.atmos_images.length})]}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-1 max-h-20 overflow-y-auto",children:[a.atmos_images.map(e=>(0,n.jsx)(h.E,{variant:"secondary",className:"text-xs",children:e},e)),0===a.atmos_images.length&&(0,n.jsx)("span",{className:"text-sm text-muted-foreground italic",children:"No Atmos images found"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(R.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"font-medium",children:"DTS-X Images"}),(0,n.jsx)(h.E,{variant:"outline",children:a.dts_x_images.length})]}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-1 max-h-20 overflow-y-auto",children:[a.dts_x_images.map(e=>(0,n.jsx)(h.E,{variant:"secondary",className:"text-xs",children:e},e)),0===a.dts_x_images.length&&(0,n.jsx)("span",{className:"text-sm text-muted-foreground italic",children:"No DTS-X images found"})]})]})]})})]})]})}function U(e){let{settings:a,runAudioCoverageAnalysis:s,getCacheStats:i,clearAudioCache:l,testEnhancedDetection:c}=e,[m,g]=(0,t.useState)(!1),[x,u]=(0,t.useState)(!1),[j,v]=(0,t.useState)(!1),[b,f]=(0,t.useState)(!1),[y,_]=(0,t.useState)(null),[N,w]=(0,t.useState)(null),[C,B]=(0,t.useState)(null);(0,t.useEffect)(()=>{S()},[]);let k=async()=>{g(!0);try{let e=await s();_(e),e&&p.oR.success("Audio coverage analysis completed")}finally{g(!1)}},S=async()=>{u(!0);try{let e=await i();w(e)}finally{u(!1)}},A=async()=>{f(!0);try{await l()&&await S()}finally{f(!1)}},T=async()=>{v(!0);try{let e=await c();B(e),e&&p.oR.success("Detection test ".concat(e.test_passed?"passed":"failed"))}finally{v(!1)}};return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(G.A,{className:"h-5 w-5"}),"Audio Detection Diagnostics"]}),(0,n.jsx)(r.BT,{children:"Monitor and test your audio detection system performance"})]}),(0,n.jsx)(r.Wu,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)(o.$,{onClick:k,disabled:m,variant:"outline",className:"h-20 flex-col",children:[m?(0,n.jsx)(d.A,{className:"h-5 w-5 animate-spin mb-2"}):(0,n.jsx)(R.A,{className:"h-5 w-5 mb-2"}),m?"Analyzing...":"Audio Coverage"]}),(0,n.jsxs)(o.$,{onClick:S,disabled:x,variant:"outline",className:"h-20 flex-col",children:[x?(0,n.jsx)(d.A,{className:"h-5 w-5 animate-spin mb-2"}):(0,n.jsx)(J.A,{className:"h-5 w-5 mb-2"}),x?"Loading...":"Cache Stats"]}),(0,n.jsxs)(o.$,{onClick:T,disabled:j,variant:"outline",className:"h-20 flex-col",children:[j?(0,n.jsx)(d.A,{className:"h-5 w-5 animate-spin mb-2"}):(0,n.jsx)(L.A,{className:"h-5 w-5 mb-2"}),j?"Testing...":"Test Detection"]})]})})]}),N&&(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(J.A,{className:"h-5 w-5"}),"Cache Performance"]}),(0,n.jsx)(r.BT,{children:"Audio detection cache statistics and performance metrics"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{className:"bg-muted/50 p-3 rounded-md text-center",children:[(0,n.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[N.hit_rate_percent.toFixed(1),"%"]}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Hit Rate"})]}),(0,n.jsxs)("div",{className:"bg-muted/50 p-3 rounded-md text-center",children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:N.cache_size}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Cached Items"})]}),(0,n.jsxs)("div",{className:"bg-muted/50 p-3 rounded-md text-center",children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:N.episode_samples_cached}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Episode Samples"})]}),(0,n.jsxs)("div",{className:"bg-muted/50 p-3 rounded-md text-center",children:[(0,n.jsxs)("div",{className:"text-2xl font-bold",children:[N.ttl_hours,"h"]}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"TTL"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:"Total Hits:"}),(0,n.jsx)(h.E,{variant:"outline",children:N.total_hits})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:"Total Misses:"}),(0,n.jsx)(h.E,{variant:"outline",children:N.total_misses})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:"Last Cleanup:"}),(0,n.jsx)("span",{className:"font-mono text-xs",children:new Date(N.last_cleanup).toLocaleString()})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:"Cache Status:"}),(0,n.jsx)(h.E,{variant:a.Performance.enable_caching?"default":"secondary",children:a.Performance.enable_caching?"Enabled":"Disabled"})]})]})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)(o.$,{onClick:S,disabled:x,variant:"outline",size:"sm",children:[x?(0,n.jsx)(d.A,{className:"h-4 w-4 animate-spin mr-2"}):null,"Refresh Stats"]}),(0,n.jsxs)(o.$,{onClick:A,disabled:b||!a.Performance.enable_caching,variant:"destructive",size:"sm",children:[b?(0,n.jsx)(d.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,n.jsx)(I.A,{className:"h-4 w-4 mr-2"}),"Clear Cache"]})]})]})]}),C&&(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(L.A,{className:"h-5 w-5"}),"Enhanced Detection Test Results"]}),(0,n.jsx)(r.BT,{children:"Results from the latest audio detection test"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"font-medium",children:"Test Status:"}),(0,n.jsx)(h.E,{variant:C.test_passed?"default":"destructive",children:C.test_passed?"PASSED":"FAILED"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"font-medium",children:"Detection Method:"}),(0,n.jsx)(h.E,{variant:"outline",children:C.detection_method})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"font-medium",children:"Processing Time:"}),(0,n.jsxs)("span",{className:"font-mono",children:[C.processing_time_ms,"ms"]})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"font-medium",children:"Detected Audio:"}),(0,n.jsx)(h.E,{variant:"secondary",children:C.detected_audio})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"font-medium",children:"Used Image:"}),(0,n.jsx)("span",{className:"font-mono text-sm",children:C.used_image})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-sm",children:"Atmos:"}),(0,n.jsx)(h.E,{variant:C.atmos_detected?"default":"outline",className:"text-xs",children:C.atmos_detected?"YES":"NO"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-sm",children:"DTS-X:"}),(0,n.jsx)(h.E,{variant:C.dts_x_detected?"default":"outline",className:"text-xs",children:C.dts_x_detected?"YES":"NO"})]})]})]})]}),(0,n.jsxs)(o.$,{onClick:T,disabled:j,variant:"outline",size:"sm",children:[j?(0,n.jsx)(d.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,n.jsx)(O.A,{className:"h-4 w-4 mr-2"}),"Run Test Again"]})]})]}),(0,n.jsx)($,{coverageData:y,onRunAnalysis:k,loading:m}),(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"Audio Detection System Status"}),(0,n.jsx)(r.BT,{children:"Current configuration and feature availability"})]}),(0,n.jsx)(r.Wu,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h5",{className:"font-semibold",children:"Enhanced Features"}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-sm",children:"Enhanced Detection:"}),(0,n.jsx)(h.E,{variant:a.EnhancedDetection.enabled?"default":"secondary",children:a.EnhancedDetection.enabled?"ON":"OFF"})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-sm",children:"Parallel Processing:"}),(0,n.jsx)(h.E,{variant:a.Performance.enable_parallel_processing?"default":"secondary",children:a.Performance.enable_parallel_processing?"ON":"OFF"})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-sm",children:"Caching:"}),(0,n.jsx)(h.E,{variant:a.Performance.enable_caching?"default":"secondary",children:a.Performance.enable_caching?"ON":"OFF"})]})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h5",{className:"font-semibold",children:"Detection Patterns"}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-sm",children:"Atmos Patterns:"}),(0,n.jsx)(h.E,{variant:"outline",children:a.EnhancedDetection.atmos_detection_patterns.length})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-sm",children:"DTS-X Patterns:"}),(0,n.jsx)(h.E,{variant:"outline",children:a.EnhancedDetection.dts_x_detection_patterns.length})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-sm",children:"Priority Items:"}),(0,n.jsx)(h.E,{variant:"outline",children:a.EnhancedDetection.priority_order.length})]})]})]})]})})]})]})}let H=()=>window.location.origin;async function Y(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H();if(!(await fetch("".concat(s,"/api/v1/config/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw Error("Failed to save ".concat(e));try{await fetch("".concat(s,"/api/v1/config/cache/clear/").concat(e),{method:"POST"})}catch(a){console.warn("Cache clear failed for ".concat(e,", but settings were saved:"),a)}}let q={General:{general_badge_size:100,general_edge_padding:30,general_badge_position:"top-right",general_text_padding:12,use_dynamic_sizing:!0},Text:{font:"AvenirNextLTProBold.otf",fallback_font:"DejaVuSans.ttf","text-color":"#FFFFFF","text-size":90},Background:{"background-color":"#000000",background_opacity:40},Border:{"border-color":"#000000","border-radius":10,border_width:1},Shadow:{shadow_enable:!1,shadow_blur:8,shadow_offset_x:2,shadow_offset_y:2},ImageBadges:{enable_image_badges:!0,codec_image_directory:"images/codec",fallback_to_text:!0,image_padding:0,image_mapping:{ATMOS:"Atmos.png","DOLBY DIGITAL PLUS":"DigitalPlus.png","DTS-HD MA":"DTS-HD.png","DTS-X":"DTS-X.png",TRUEHD:"TrueHD.png","TRUEHD ATMOS":"TrueHD-Atmos.png"}},EnhancedDetection:{enabled:!0,fallback_rules:{"dts-hd":"dts","truehd-atmos":"truehd"},atmos_detection_patterns:["atmos","dolby atmos","truehd atmos","dd+ atmos"],dts_x_detection_patterns:["dts-x","dtsx","dts:x"],priority_order:["atmos","dts-x","truehd","dts-hd","dd+","dts"]},Performance:{enable_parallel_processing:!0,enable_caching:!0,cache_ttl_hours:24,max_episodes_to_sample:5}};var K=s(4738);function Q(e){let{settings:a,updateSetting:s}=e;return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"General Badge Settings"}),(0,n.jsx)(r.BT,{children:"Configure basic badge positioning and sizing for resolution badges"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"badge-size",children:"Badge Size"}),(0,n.jsx)(m.p,{id:"badge-size",type:"number",min:"10",value:a.General.general_badge_size,onChange:e=>s("General","general_badge_size",parseInt(e.target.value)||100)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"edge-padding",children:"Edge Padding"}),(0,n.jsx)(m.p,{id:"edge-padding",type:"number",min:"0",value:a.General.general_edge_padding,onChange:e=>s("General","general_edge_padding",parseInt(e.target.value)||30)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"badge-position",children:"Badge Position"}),(0,n.jsxs)(f.l6,{value:a.General.general_badge_position,onValueChange:e=>s("General","general_badge_position",e),children:[(0,n.jsx)(f.bq,{children:(0,n.jsx)(f.yv,{})}),(0,n.jsxs)(f.gC,{children:[(0,n.jsx)(f.eb,{value:"top-left",children:"Top Left"}),(0,n.jsx)(f.eb,{value:"top-right",children:"Top Right"}),(0,n.jsx)(f.eb,{value:"bottom-left",children:"Bottom Left"}),(0,n.jsx)(f.eb,{value:"bottom-right",children:"Bottom Right"})]})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"text-padding",children:"Text Padding"}),(0,n.jsx)(m.p,{id:"text-padding",type:"number",min:"0",value:a.General.general_text_padding,onChange:e=>s("General","general_text_padding",parseInt(e.target.value)||12)})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(b.d,{id:"dynamic-sizing",checked:a.General.use_dynamic_sizing,onCheckedChange:e=>s("General","use_dynamic_sizing",e)}),(0,n.jsx)(g.J,{htmlFor:"dynamic-sizing",children:"Use Dynamic Sizing"})]})]})]})}function ee(e){let{settings:a,updateSetting:s,availableFonts:t=[]}=e;return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(_.A,{className:"h-5 w-5"}),"Text Settings"]}),(0,n.jsx)(r.BT,{children:"Configure font, size, and text appearance for resolution badges"})]}),(0,n.jsx)(r.Wu,{className:"space-y-4",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"font",children:"Primary Font"}),(0,n.jsx)(B,{value:a.Text.font,onValueChange:e=>s("Text","font",e),availableFonts:t,placeholder:"Select a font..."})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"fallback-font",children:"Fallback Font"}),(0,n.jsx)(B,{value:a.Text.fallback_font,onValueChange:e=>s("Text","fallback_font",e),availableFonts:t,placeholder:"Select a font..."})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"text-color",children:"Text Color"}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"color",value:a.Text["text-color"],onChange:e=>s("Text","text-color",e.target.value),className:"w-12 h-10 border rounded cursor-pointer"}),(0,n.jsx)(m.p,{type:"text",value:a.Text["text-color"],onChange:e=>s("Text","text-color",e.target.value),className:"flex-1",placeholder:"#FFFFFF"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"text-size",children:"Text Size"}),(0,n.jsx)(m.p,{id:"text-size",type:"number",min:"10",value:a.Text["text-size"],onChange:e=>s("Text","text-size",parseInt(e.target.value)||90),placeholder:"90"})]})]})})]})}function ea(e){let{settings:a,updateSetting:s}=e;return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"Background Settings"}),(0,n.jsx)(r.BT,{children:"Configure badge background appearance"})]}),(0,n.jsx)(r.Wu,{className:"space-y-4",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"background-color",children:"Background Color"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("input",{type:"color",value:a.Background["background-color"],onChange:e=>s("Background","background-color",e.target.value),className:"w-12 h-10 rounded border border-input"}),(0,n.jsx)(m.p,{value:a.Background["background-color"],onChange:e=>s("Background","background-color",e.target.value),placeholder:"#000000",className:"flex-1"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"background-opacity",children:"Background Opacity (%)"}),(0,n.jsx)(m.p,{id:"background-opacity",type:"number",min:"0",max:"100",value:a.Background.background_opacity,onChange:e=>s("Background","background_opacity",""===e.target.value?40:parseInt(e.target.value))})]})]})})]})}function es(e){let{settings:a,updateSetting:s}=e;return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"Border Settings"}),(0,n.jsx)(r.BT,{children:"Configure badge border appearance"})]}),(0,n.jsx)(r.Wu,{className:"space-y-4",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"border-color",children:"Border Color"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("input",{type:"color",value:a.Border["border-color"],onChange:e=>s("Border","border-color",e.target.value),className:"w-12 h-10 rounded border border-input"}),(0,n.jsx)(m.p,{value:a.Border["border-color"],onChange:e=>s("Border","border-color",e.target.value),placeholder:"#000000",className:"flex-1"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"border-radius",children:"Border Radius"}),(0,n.jsx)(m.p,{id:"border-radius",type:"number",min:"0",value:a.Border["border-radius"],onChange:e=>s("Border","border-radius",parseInt(e.target.value)||10)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"border-width",children:"Border Width"}),(0,n.jsx)(m.p,{id:"border-width",type:"number",min:"0",value:a.Border.border_width,onChange:e=>s("Border","border_width",parseInt(e.target.value)||1)})]})]})})]})}function en(e){let{settings:a,updateSetting:s}=e;return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"Shadow Settings"}),(0,n.jsx)(r.BT,{children:"Configure badge drop shadow effects"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,n.jsx)(b.d,{id:"shadow-enable",checked:a.Shadow.shadow_enable,onCheckedChange:e=>s("Shadow","shadow_enable",e)}),(0,n.jsx)(g.J,{htmlFor:"shadow-enable",children:"Enable Shadow"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"shadow-blur",children:"Shadow Blur"}),(0,n.jsx)(m.p,{id:"shadow-blur",type:"number",min:"0",value:a.Shadow.shadow_blur,onChange:e=>s("Shadow","shadow_blur",parseInt(e.target.value)||8),disabled:!a.Shadow.shadow_enable})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"shadow-offset-x",children:"Shadow Offset X"}),(0,n.jsx)(m.p,{id:"shadow-offset-x",type:"number",value:a.Shadow.shadow_offset_x,onChange:e=>s("Shadow","shadow_offset_x",parseInt(e.target.value)||2),disabled:!a.Shadow.shadow_enable})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"shadow-offset-y",children:"Shadow Offset Y"}),(0,n.jsx)(m.p,{id:"shadow-offset-y",type:"number",value:a.Shadow.shadow_offset_y,onChange:e=>s("Shadow","shadow_offset_y",parseInt(e.target.value)||2),disabled:!a.Shadow.shadow_enable})]})]})]})]})}function et(e){let{settings:a,updateSetting:s,addResolutionMapping:i,removeResolutionMapping:l,updateResolutionName:d}=e,[c,x]=(0,t.useState)({resolution:"",image:""});return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"Image Badge Settings"}),(0,n.jsx)(r.BT,{children:"Configure image-based badges and resolution mappings"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(b.d,{id:"enable-image-badges",checked:a.ImageBadges.enable_image_badges,onCheckedChange:e=>s("ImageBadges","enable_image_badges",e)}),(0,n.jsx)(g.J,{htmlFor:"enable-image-badges",children:"Enable Image Badges"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"resolution-directory",children:"Resolution Image Directory"}),(0,n.jsx)(m.p,{id:"resolution-directory",type:"text",value:a.ImageBadges.codec_image_directory,onChange:e=>s("ImageBadges","codec_image_directory",e.target.value),disabled:!a.ImageBadges.enable_image_badges,placeholder:"images/resolution"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"image-padding",children:"Image Padding"}),(0,n.jsx)(m.p,{id:"image-padding",type:"number",min:"0",value:a.ImageBadges.image_padding,onChange:e=>s("ImageBadges","image_padding",parseInt(e.target.value)||20),disabled:!a.ImageBadges.enable_image_badges})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(b.d,{id:"fallback-to-text",checked:a.ImageBadges.fallback_to_text,onCheckedChange:e=>s("ImageBadges","fallback_to_text",e),disabled:!a.ImageBadges.enable_image_badges}),(0,n.jsx)(g.J,{htmlFor:"fallback-to-text",children:"Fallback to Text"})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("h4",{className:"text-lg font-semibold",children:"Resolution Image Mappings"}),(0,n.jsxs)(h.E,{variant:"secondary",children:[Object.keys(a.ImageBadges.image_mapping).length," mappings"]})]}),(0,n.jsxs)("div",{className:"max-h-60 overflow-y-auto space-y-2 border rounded-md p-4",children:[Object.entries(a.ImageBadges.image_mapping).map(e=>{let[t,i]=e;return(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(m.p,{value:t,onChange:e=>d(t,e.target.value),disabled:!a.ImageBadges.enable_image_badges,className:"flex-1",placeholder:"Resolution Name (e.g., 4K, 1080p)"}),(0,n.jsx)("span",{className:"text-muted-foreground",children:"→"}),(0,n.jsx)(m.p,{value:i,onChange:e=>s("ImageBadges","image_mapping",{...a.ImageBadges.image_mapping,[t]:e.target.value}),disabled:!a.ImageBadges.enable_image_badges,className:"flex-1",placeholder:"Image Filename (e.g., 4K.png)"}),(0,n.jsx)(o.$,{type:"button",variant:"outline",size:"icon",onClick:()=>l(t),disabled:!a.ImageBadges.enable_image_badges,children:(0,n.jsx)(I.A,{className:"h-4 w-4"})})]},t)}),(0,n.jsxs)("div",{className:"flex items-center gap-2 pt-2 border-t",children:[(0,n.jsx)(m.p,{value:c.resolution,onChange:e=>x(a=>({...a,resolution:e.target.value})),disabled:!a.ImageBadges.enable_image_badges,placeholder:"New resolution name",className:"flex-1"}),(0,n.jsx)("span",{className:"text-muted-foreground",children:"→"}),(0,n.jsx)(m.p,{value:c.image,onChange:e=>x(a=>({...a,image:e.target.value})),disabled:!a.ImageBadges.enable_image_badges,placeholder:"Image filename",className:"flex-1"}),(0,n.jsx)(o.$,{type:"button",variant:"outline",size:"icon",onClick:()=>{c.resolution&&c.image&&(i(c.resolution,c.image),x({resolution:"",image:""}))},disabled:!a.ImageBadges.enable_image_badges||!c.resolution||!c.image,children:(0,n.jsx)(E.A,{className:"h-4 w-4"})})]})]})]})]})]})}var ei=s(5365),er=s(1284),el=s(8021);function ed(e){let{settings:a,updateSetting:s}=e,[i,l]=(0,t.useState)({from:"",to:""}),[d,c]=(0,t.useState)(""),[x,u]=(0,t.useState)(""),p=e=>{let n={...a.enhanced_detection.fallback_rules};delete n[e],s("enhanced_detection","fallback_rules",n)},j=e=>{s("enhanced_detection","hdr_detection_patterns",a.enhanced_detection.hdr_detection_patterns.filter(a=>a!==e))},v=e=>{s("enhanced_detection","dv_detection_patterns",a.enhanced_detection.dv_detection_patterns.filter(a=>a!==e))},f=(e,n)=>{let t=[...a.enhanced_detection.priority_order],i="up"===n?e-1:e+1;i>=0&&i<t.length&&([t[e],t[i]]=[t[i],t[e]],s("enhanced_detection","priority_order",t))};return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(F.A,{className:"h-5 w-5"}),"Enhanced Detection"]}),(0,n.jsx)(r.BT,{children:"Advanced metadata analysis for automatic HDR, Dolby Vision, and resolution variant detection"})]}),(0,n.jsxs)(r.Wu,{children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(b.d,{id:"enable-enhanced-detection",checked:a.enhanced_detection.enabled,onCheckedChange:e=>s("enhanced_detection","enabled",e)}),(0,n.jsx)(g.J,{htmlFor:"enable-enhanced-detection",className:"font-medium",children:"Enable Enhanced Detection"})]}),!a.enhanced_detection.enabled&&(0,n.jsxs)(ei.Fc,{className:"mt-4",children:[(0,n.jsx)(er.A,{className:"h-4 w-4"}),(0,n.jsx)(ei.TN,{children:"Enhanced detection is disabled. The system will use legacy resolution mapping based on your manual image mappings above."})]}),a.enhanced_detection.enabled&&(0,n.jsxs)(ei.Fc,{className:"mt-4",children:[(0,n.jsx)(F.A,{className:"h-4 w-4"}),(0,n.jsx)(ei.TN,{children:"Enhanced detection active! The system will automatically detect HDR, Dolby Vision, and handle resolution variants like 1440p."})]})]})]}),(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"Resolution Fallback Rules"}),(0,n.jsx)(r.BT,{children:"Define fallback mappings for resolutions that don't have dedicated images"})]}),(0,n.jsx)(r.Wu,{className:"space-y-4",children:(0,n.jsxs)("div",{className:"space-y-2",children:[Object.entries(a.enhanced_detection.fallback_rules).map(e=>{let[t,i]=e;return(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(m.p,{value:t,readOnly:!0,disabled:!a.enhanced_detection.enabled,className:"flex-1",placeholder:"Source resolution"}),(0,n.jsx)("span",{className:"text-muted-foreground",children:"→"}),(0,n.jsx)(m.p,{value:i,onChange:e=>{let n={...a.enhanced_detection.fallback_rules};n[t]=e.target.value,s("enhanced_detection","fallback_rules",n)},disabled:!a.enhanced_detection.enabled,className:"flex-1",placeholder:"Target resolution"}),(0,n.jsx)(o.$,{type:"button",variant:"outline",size:"icon",onClick:()=>p(t),disabled:!a.enhanced_detection.enabled,children:(0,n.jsx)(I.A,{className:"h-4 w-4"})})]},t)}),(0,n.jsxs)("div",{className:"flex items-center gap-2 pt-2 border-t",children:[(0,n.jsx)(m.p,{value:i.from,onChange:e=>l(a=>({...a,from:e.target.value})),disabled:!a.enhanced_detection.enabled,placeholder:"Source resolution (e.g., 1440p)",className:"flex-1"}),(0,n.jsx)("span",{className:"text-muted-foreground",children:"→"}),(0,n.jsx)(m.p,{value:i.to,onChange:e=>l(a=>({...a,to:e.target.value})),disabled:!a.enhanced_detection.enabled,placeholder:"Target resolution (e.g., 1080p)",className:"flex-1"}),(0,n.jsx)(o.$,{type:"button",variant:"outline",size:"icon",onClick:()=>{i.from&&i.to&&(s("enhanced_detection","fallback_rules",{...a.enhanced_detection.fallback_rules,[i.from]:i.to}),l({from:"",to:""}))},disabled:!a.enhanced_detection.enabled||!i.from||!i.to,children:(0,n.jsx)(E.A,{className:"h-4 w-4"})})]})]})})]}),(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"HDR Detection Patterns"}),(0,n.jsx)(r.BT,{children:"Metadata patterns used to identify HDR content in video streams"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:a.enhanced_detection.hdr_detection_patterns.map(e=>(0,n.jsxs)(h.E,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,n.jsx)(o.$,{type:"button",variant:"ghost",size:"sm",className:"h-auto p-0 ml-1",onClick:()=>j(e),disabled:!a.enhanced_detection.enabled,children:(0,n.jsx)(I.A,{className:"h-3 w-3"})})]},e))}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(m.p,{value:d,onChange:e=>c(e.target.value),disabled:!a.enhanced_detection.enabled,placeholder:"Add HDR pattern (e.g., BT2020)",className:"flex-1"}),(0,n.jsx)(o.$,{type:"button",onClick:()=>{d&&!a.enhanced_detection.hdr_detection_patterns.includes(d)&&(s("enhanced_detection","hdr_detection_patterns",[...a.enhanced_detection.hdr_detection_patterns,d]),c(""))},disabled:!a.enhanced_detection.enabled||!d,children:(0,n.jsx)(E.A,{className:"h-4 w-4"})})]})]})]}),(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"Dolby Vision Detection Patterns"}),(0,n.jsx)(r.BT,{children:"Metadata patterns used to identify Dolby Vision content in video streams"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:a.enhanced_detection.dv_detection_patterns.map(e=>(0,n.jsxs)(h.E,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,n.jsx)(o.$,{type:"button",variant:"ghost",size:"sm",className:"h-auto p-0 ml-1",onClick:()=>v(e),disabled:!a.enhanced_detection.enabled,children:(0,n.jsx)(I.A,{className:"h-3 w-3"})})]},e))}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(m.p,{value:x,onChange:e=>u(e.target.value),disabled:!a.enhanced_detection.enabled,placeholder:"Add DV pattern (e.g., DVHE)",className:"flex-1"}),(0,n.jsx)(o.$,{type:"button",onClick:()=>{x&&!a.enhanced_detection.dv_detection_patterns.includes(x)&&(s("enhanced_detection","dv_detection_patterns",[...a.enhanced_detection.dv_detection_patterns,x]),u(""))},disabled:!a.enhanced_detection.enabled||!x,children:(0,n.jsx)(E.A,{className:"h-4 w-4"})})]})]})]}),(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"Image Priority Order"}),(0,n.jsx)(r.BT,{children:"Order of preference when multiple image variants are available (highest priority first)"})]}),(0,n.jsx)(r.Wu,{children:(0,n.jsx)("div",{className:"space-y-2",children:a.enhanced_detection.priority_order.map((e,s)=>(0,n.jsxs)("div",{className:"flex items-center gap-2 p-2 border rounded-md",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(o.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>f(s,"up"),disabled:!a.enhanced_detection.enabled||0===s,className:"h-4 p-0",children:"▲"}),(0,n.jsx)(o.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>f(s,"down"),disabled:!a.enhanced_detection.enabled||s===a.enhanced_detection.priority_order.length-1,className:"h-4 p-0",children:"▼"})]}),(0,n.jsx)(el.A,{className:"h-4 w-4 text-muted-foreground"}),(0,n.jsx)(h.E,{variant:"outline",className:"flex-1",children:e}),(0,n.jsxs)(h.E,{variant:"secondary",className:"text-xs",children:["Priority ",s+1]})]},e))})})]})]})}var ec=s(4073),eo=s(9434);function em(e){let{className:a,defaultValue:s,value:i,min:r=0,max:l=100,...d}=e,c=t.useMemo(()=>Array.isArray(i)?i:Array.isArray(s)?s:[r,l],[i,s,r,l]);return(0,n.jsxs)(ec.bL,{"data-slot":"slider",defaultValue:s,value:i,min:r,max:l,className:(0,eo.cn)("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",a),...d,children:[(0,n.jsx)(ec.CC,{"data-slot":"slider-track",className:(0,eo.cn)("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:(0,n.jsx)(ec.Q6,{"data-slot":"slider-range",className:(0,eo.cn)("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:c.length},(e,a)=>(0,n.jsx)(ec.zi,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},a))]})}function eg(e){let a,{settings:s,updateSetting:t}=e,i=(a=255,s.performance.enable_parallel_processing&&(a*=.3),s.performance.enable_caching&&(a*=.02),Math.round(a));return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(z.A,{className:"h-5 w-5"}),"Performance Overview"]}),(0,n.jsx)(r.BT,{children:"Optimize processing speed for large media libraries"})]}),(0,n.jsxs)(r.Wu,{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(Z.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"font-medium",children:"Estimated TV Series Processing Time:"})]}),(0,n.jsxs)(h.E,{variant:i<20?"default":i<100?"secondary":i<200?"outline":"destructive",className:"text-lg px-3 py-1",children:[i,"ms"]})]}),(0,n.jsxs)(ei.Fc,{className:"mt-4",children:[(0,n.jsx)(F.A,{className:"h-4 w-4"}),(0,n.jsxs)(ei.TN,{children:[(0,n.jsx)("strong",{children:"Performance Impact:"})," Movie processing time remains ~55ms. TV series processing varies based on your settings above."]})]})]})]}),(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(F.A,{className:"h-5 w-5"}),"Parallel Episode Processing"]}),(0,n.jsx)(r.BT,{children:"Process TV series episodes concurrently for faster detection"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(b.d,{id:"enable-parallel-processing",checked:s.performance.enable_parallel_processing,onCheckedChange:e=>t("performance","enable_parallel_processing",e)}),(0,n.jsx)(g.J,{htmlFor:"enable-parallel-processing",className:"font-medium",children:"Enable Parallel Processing"})]}),s.performance.enable_parallel_processing?(0,n.jsxs)(ei.Fc,{children:[(0,n.jsx)(F.A,{className:"h-4 w-4"}),(0,n.jsxs)(ei.TN,{children:[(0,n.jsx)("strong",{children:"Enabled:"})," TV series episodes will be processed concurrently, reducing processing time by ~70%."]})]}):(0,n.jsx)(ei.Fc,{children:(0,n.jsxs)(ei.TN,{children:[(0,n.jsx)("strong",{children:"Disabled:"})," Episodes will be processed sequentially. This is more resource-friendly but slower."]})}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(g.J,{htmlFor:"episodes-sample",children:"Episodes to Sample"}),(0,n.jsxs)(h.E,{variant:"outline",children:[s.performance.max_episodes_to_sample," episodes"]})]}),(0,n.jsx)(em,{id:"episodes-sample",min:1,max:20,step:1,value:[s.performance.max_episodes_to_sample],onValueChange:e=>t("performance","max_episodes_to_sample",e[0]),disabled:!s.performance.enable_parallel_processing,className:"w-full"}),(0,n.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,n.jsx)("span",{children:"1 episode (fastest)"}),(0,n.jsx)("span",{children:"20 episodes (most accurate)"})]})]})]})]}),(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(J.A,{className:"h-5 w-5"}),"Resolution Caching"]}),(0,n.jsx)(r.BT,{children:"Cache TV series resolution results to avoid re-processing"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(b.d,{id:"enable-caching",checked:s.performance.enable_caching,onCheckedChange:e=>t("performance","enable_caching",e)}),(0,n.jsx)(g.J,{htmlFor:"enable-caching",className:"font-medium",children:"Enable Resolution Caching"})]}),s.performance.enable_caching?(0,n.jsxs)(ei.Fc,{children:[(0,n.jsx)(J.A,{className:"h-4 w-4"}),(0,n.jsxs)(ei.TN,{children:[(0,n.jsx)("strong",{children:"Enabled:"})," Series resolution results will be cached, reducing repeated processing to ~5ms."]})]}):(0,n.jsx)(ei.Fc,{children:(0,n.jsxs)(ei.TN,{children:[(0,n.jsx)("strong",{children:"Disabled:"})," Series will be re-processed every time. Use if you frequently change video files."]})}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(g.J,{htmlFor:"cache-ttl",children:"Cache Duration"}),(0,n.jsxs)(h.E,{variant:"outline",children:[s.performance.cache_ttl_hours," hours"]})]}),(0,n.jsx)(em,{id:"cache-ttl",min:1,max:168,step:1,value:[s.performance.cache_ttl_hours],onValueChange:e=>t("performance","cache_ttl_hours",e[0]),disabled:!s.performance.enable_caching,className:"w-full"}),(0,n.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,n.jsx)("span",{children:"1 hour (frequent updates)"}),(0,n.jsx)("span",{children:"1 week (stable library)"})]})]})]})]}),(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"Performance Tips"}),(0,n.jsx)(r.BT,{children:"Recommendations for optimizing resolution detection speed"})]}),(0,n.jsx)(r.Wu,{children:(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)(h.E,{variant:"outline",className:"mt-0.5",children:"Tip 1"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:"Enable both parallel processing and caching"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"This combination provides the best performance improvement for large TV libraries."})]})]}),(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)(h.E,{variant:"outline",className:"mt-0.5",children:"Tip 2"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:"Sample 3-5 episodes for most series"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"This provides good accuracy while maintaining speed. Only increase for very inconsistent series."})]})]}),(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)(h.E,{variant:"outline",className:"mt-0.5",children:"Tip 3"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:"Use longer cache duration for stable libraries"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"If you rarely change video files, set cache duration to 24+ hours for maximum speed."})]})]})]})})]})]})}var eh=s(2713),ex=s(7924),eu=s(7213),ep=s(1243);function ej(e){let{data:a}=e,s=a.missing_combinations.length,t=Object.keys(a.coverage_by_resolution).length,i=Math.round((a.total_images-s)/a.total_images*100);return(0,n.jsxs)(r.Zp,{children:[(0,n.jsx)(r.aR,{children:(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(eu.A,{className:"h-4 w-4"}),"Image Coverage Analysis",(0,n.jsxs)(h.E,{variant:i>80?"default":"destructive",children:[i,"% coverage"]})]})}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:a.total_images}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Images"})]}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:t}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Resolutions"})]}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-green-600",children:a.total_images-s}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Available"})]}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-red-600",children:s}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Missing"})]})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("h4",{className:"font-medium",children:"Coverage by Resolution"}),Object.entries(a.coverage_by_resolution).map(e=>{let[a,s]=e;return(0,n.jsxs)("div",{className:"border rounded-lg p-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("span",{className:"font-medium",children:a}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[s.has_base?(0,n.jsx)(c.A,{className:"h-4 w-4 text-green-600"}):(0,n.jsx)(x.A,{className:"h-4 w-4 text-red-600"}),(0,n.jsxs)(h.E,{variant:"outline",children:[s.available_variants.length," variants"]})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-sm font-medium text-green-700",children:"Available:"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:s.available_variants.map(e=>(0,n.jsx)(h.E,{variant:"secondary",className:"text-xs",children:e},e))})]}),s.missing_variants.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-sm font-medium text-red-700",children:"Missing:"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:s.missing_variants.map(e=>(0,n.jsx)(h.E,{variant:"destructive",className:"text-xs",children:e},e))})]})]})]},a)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h4",{className:"font-medium",children:"Fallback Rules Status"}),Object.entries(a.fallback_coverage).map(e=>{let[a,s]=e;return(0,n.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded",children:[(0,n.jsxs)("span",{className:"text-sm",children:[a," → ",s.target]}),s.target_available?(0,n.jsxs)(h.E,{variant:"default",className:"text-xs",children:[(0,n.jsx)(c.A,{className:"h-3 w-3 mr-1"}),"Available"]}):(0,n.jsxs)(h.E,{variant:"destructive",className:"text-xs",children:[(0,n.jsx)(x.A,{className:"h-3 w-3 mr-1"}),"Missing"]})]},a)})]}),a.standalone_images.length>0&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h4",{className:"font-medium",children:"Standalone Images"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-1",children:a.standalone_images.map(e=>(0,n.jsx)(h.E,{variant:"outline",className:"text-xs",children:e},e))})]}),s>0&&(0,n.jsxs)(ei.Fc,{children:[(0,n.jsx)(ep.A,{className:"h-4 w-4"}),(0,n.jsxs)(ei.TN,{children:[(0,n.jsxs)("strong",{children:["Missing ",s," images."]})," Consider adding these images to improve coverage, or adjust your fallback rules to handle missing variants."]})]})]})]})}var ev=s(3109);function eb(e){var a;let{data:s}=e;return(0,n.jsxs)(r.Zp,{children:[(0,n.jsx)(r.aR,{children:(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(J.A,{className:"h-4 w-4"}),"Cache Performance Statistics",(0,n.jsxs)(h.E,{variant:(a=s.hit_rate_percent)>=90?"default":a>=70?"secondary":a>=50?"outline":"destructive",children:[s.hit_rate_percent,"% hit rate"]})]})}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-sm font-medium",children:"Cache Hit Rate"}),(0,n.jsxs)("span",{className:"text-sm text-muted-foreground",children:[s.hit_rate_percent,"%"]})]}),(0,n.jsx)(W.k,{value:s.hit_rate_percent,className:"w-full"}),(0,n.jsx)("div",{className:"text-xs text-muted-foreground",children:"Higher hit rates indicate better performance"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{className:"text-center p-3 border rounded-lg",children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-green-600",children:s.total_hits}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Cache Hits"})]}),(0,n.jsxs)("div",{className:"text-center p-3 border rounded-lg",children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-red-600",children:s.total_misses}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Cache Misses"})]}),(0,n.jsxs)("div",{className:"text-center p-3 border rounded-lg",children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:s.cache_size}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Cached Items"})]}),(0,n.jsxs)("div",{className:"text-center p-3 border rounded-lg",children:[(0,n.jsxs)("div",{className:"text-2xl font-bold",children:[s.ttl_hours,"h"]}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"TTL Duration"})]})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("h4",{className:"font-medium flex items-center gap-2",children:[(0,n.jsx)(ev.A,{className:"h-4 w-4"}),"Performance Insights"]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded",children:[(0,n.jsx)("span",{className:"text-sm",children:"Total Requests"}),(0,n.jsx)(h.E,{variant:"outline",children:s.total_hits+s.total_misses})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded",children:[(0,n.jsx)("span",{className:"text-sm",children:"Time Saved (estimated)"}),(0,n.jsxs)(h.E,{variant:"secondary",children:[Math.round(250*s.total_hits/1e3),"s"]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded",children:[(0,n.jsxs)("span",{className:"text-sm flex items-center gap-2",children:[(0,n.jsx)(Z.A,{className:"h-3 w-3"}),"Last Cleanup"]}),(0,n.jsx)("span",{className:"text-xs text-muted-foreground",children:new Date(s.last_cleanup).toLocaleString()})]})]})]}),s.hit_rate_percent<70&&(0,n.jsxs)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,n.jsx)("div",{className:"font-medium text-yellow-800",children:"Low Hit Rate Detected"}),(0,n.jsx)("div",{className:"text-sm text-yellow-700 mt-1",children:"Consider increasing cache TTL or checking if your media library changes frequently."})]}),s.hit_rate_percent>=90&&(0,n.jsxs)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,n.jsx)("div",{className:"font-medium text-green-800",children:"Excellent Cache Performance"}),(0,n.jsx)("div",{className:"text-sm text-green-700 mt-1",children:"Your cache is working optimally and saving significant processing time."})]})]})]})}function ef(e){var a;let{data:s}=e,t=(a=s.processing_time_ms)<30?{variant:"default",label:"Excellent"}:a<60?{variant:"secondary",label:"Good"}:a<100?{variant:"outline",label:"Fair"}:{variant:"destructive",label:"Slow"};return(0,n.jsxs)(r.Zp,{children:[(0,n.jsx)(r.aR,{children:(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(L.A,{className:"h-4 w-4"}),"Enhanced Detection Test Results",s.test_passed?(0,n.jsxs)(h.E,{variant:"default",className:"flex items-center gap-1",children:[(0,n.jsx)(c.A,{className:"h-3 w-3"}),"Passed"]}):(0,n.jsxs)(h.E,{variant:"destructive",className:"flex items-center gap-1",children:[(0,n.jsx)(x.A,{className:"h-3 w-3"}),"Failed"]})]})}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,n.jsx)("span",{className:"text-sm font-medium",children:"Detected Resolution"}),(0,n.jsx)(h.E,{variant:"outline",children:s.detected_resolution})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,n.jsxs)("span",{className:"text-sm font-medium flex items-center gap-2",children:[(0,n.jsx)(eu.A,{className:"h-3 w-3"}),"Used Image"]}),(0,n.jsx)(h.E,{variant:"secondary",children:s.used_image})]})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,n.jsxs)("span",{className:"text-sm font-medium flex items-center gap-2",children:[(0,n.jsx)(F.A,{className:"h-3 w-3"}),"Detection Method"]}),(0,n.jsx)(h.E,{variant:"Enhanced"===s.detection_method?"default":"outline",children:s.detection_method})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,n.jsxs)("span",{className:"text-sm font-medium flex items-center gap-2",children:[(0,n.jsx)(Z.A,{className:"h-3 w-3"}),"Processing Time"]}),(0,n.jsxs)(h.E,{variant:t.variant,children:[s.processing_time_ms,"ms (",t.label,")"]})]})]})]}),s.test_passed?(0,n.jsxs)(ei.Fc,{children:[(0,n.jsx)(c.A,{className:"h-4 w-4"}),(0,n.jsxs)(ei.TN,{children:[(0,n.jsx)("strong",{children:"Test Successful!"})," The resolution detection system is working correctly.","Enhanced"===s.detection_method?" Enhanced detection is active and properly identifying resolution variants.":" Legacy detection is active - consider enabling enhanced detection for better HDR/DV support."]})]}):(0,n.jsxs)(ei.Fc,{variant:"destructive",children:[(0,n.jsx)(x.A,{className:"h-4 w-4"}),(0,n.jsxs)(ei.TN,{children:[(0,n.jsx)("strong",{children:"Test Failed!"})," There may be an issue with the resolution detection system. Check your image directory and mappings, or try clearing the cache."]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h4",{className:"font-medium",children:"Performance Analysis"}),(0,n.jsxs)("div",{className:"p-3 bg-muted rounded-lg space-y-2",children:[s.processing_time_ms<60&&(0,n.jsxs)("div",{className:"text-sm text-green-700",children:["✓ Processing time is excellent (",s.processing_time_ms,"ms)"]}),"Enhanced"===s.detection_method&&(0,n.jsx)("div",{className:"text-sm text-blue-700",children:"✓ Enhanced detection active - HDR and Dolby Vision support enabled"}),s.used_image.includes("hdr")&&(0,n.jsx)("div",{className:"text-sm text-purple-700",children:"✓ HDR variant image selected correctly"}),s.used_image.includes("dv")&&(0,n.jsx)("div",{className:"text-sm text-purple-700",children:"✓ Dolby Vision variant image selected correctly"}),s.processing_time_ms>100&&(0,n.jsx)("div",{className:"text-sm text-yellow-700",children:"⚠ Processing time is slower than expected - consider enabling caching"})]})]}),"Legacy"===s.detection_method&&(0,n.jsx)(ei.Fc,{children:(0,n.jsxs)(ei.TN,{children:[(0,n.jsx)("strong",{children:"Recommendation:"})," Enable Enhanced Detection in the Enhanced Detection tab for better HDR, Dolby Vision, and 1440p resolution support."]})})]})]})}function ey(e){let{settings:a,runImageCoverageAnalysis:s,getCacheStats:i,clearResolutionCache:l,testEnhancedDetection:d}=e,[c,m]=(0,t.useState)({}),[g,h]=(0,t.useState)(null),x=async()=>{h("coverage");try{let e=await s();m(a=>({...a,imageCoverage:e}))}catch(e){console.error("Coverage analysis failed:",e)}finally{h(null)}},u=async()=>{h("cache");try{await l(),m(e=>({...e,cacheStats:void 0}))}catch(e){console.error("Cache clear failed:",e)}finally{h(null)}},p=async()=>{h("cacheStats");try{let e=await i();m(a=>({...a,cacheStats:e}))}catch(e){console.error("Cache stats failed:",e)}finally{h(null)}},j=async()=>{h("test");try{let e=await d();m(a=>({...a,testResults:e}))}catch(e){console.error("Detection test failed:",e)}finally{h(null)}};return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(eh.A,{className:"h-5 w-5"}),"Diagnostic Tools"]}),(0,n.jsx)(r.BT,{children:"Analyze and troubleshoot resolution detection performance"})]}),(0,n.jsxs)(r.Wu,{children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)(o.$,{onClick:x,disabled:"coverage"===g,className:"flex items-center gap-2",children:[(0,n.jsx)(ex.A,{className:"h-4 w-4"}),"coverage"===g?"Analyzing...":"Analyze Image Coverage"]}),(0,n.jsxs)(o.$,{onClick:p,disabled:"cacheStats"===g||!a.performance.enable_caching,className:"flex items-center gap-2",variant:"outline",children:[(0,n.jsx)(J.A,{className:"h-4 w-4"}),"cacheStats"===g?"Loading...":"Get Cache Stats"]}),(0,n.jsxs)(o.$,{onClick:u,disabled:"cache"===g||!a.performance.enable_caching,className:"flex items-center gap-2",variant:"outline",children:[(0,n.jsx)(J.A,{className:"h-4 w-4"}),"cache"===g?"Clearing...":"Clear Resolution Cache"]}),(0,n.jsxs)(o.$,{onClick:j,disabled:"test"===g,className:"flex items-center gap-2",variant:"outline",children:[(0,n.jsx)(L.A,{className:"h-4 w-4"}),"test"===g?"Testing...":"Test Enhanced Detection"]})]}),!a.performance.enable_caching&&(0,n.jsx)(ei.Fc,{className:"mt-4",children:(0,n.jsx)(ei.TN,{children:"Cache-related diagnostics are disabled because caching is turned off in Performance settings."})})]})]}),c.imageCoverage&&(0,n.jsx)(ej,{data:c.imageCoverage}),c.cacheStats&&(0,n.jsx)(eb,{data:c.cacheStats}),c.testResults&&(0,n.jsx)(ef,{data:c.testResults})]})}let e_={General:{general_badge_size:100,general_edge_padding:30,general_badge_position:"top-right",general_text_padding:12,use_dynamic_sizing:!0},Text:{font:"AvenirNextLTProBold.otf",fallback_font:"DejaVuSans.ttf","text-color":"#FFFFFF","text-size":90},Background:{"background-color":"#000000",background_opacity:40},Border:{"border-color":"#000000","border-radius":10,border_width:1},Shadow:{shadow_enable:!1,shadow_blur:8,shadow_offset_x:2,shadow_offset_y:2},ImageBadges:{enable_image_badges:!0,codec_image_directory:"images/resolution",fallback_to_text:!0,image_padding:20,image_mapping:{"4K":"4K.png","1080p":"1080p.png","720p":"720p.png","480p":"480p.png",SD:"SD.png"}},enhanced_detection:{enabled:!1,fallback_rules:{"1440p":"1080p","8k":"4k","2160p":"4k"},hdr_detection_patterns:["HDR","HDR10","BT2020","PQ","ST2084","HLG"],dv_detection_patterns:["DV","DOLBY VISION","DVHE","DVH1"],priority_order:["dvhdrplus","dvhdr","dvplus","hdrplus","dv","hdr","plus","base"]},performance:{enable_parallel_processing:!0,enable_caching:!0,cache_ttl_hours:24,max_episodes_to_sample:5}};var eN=s(8564);function ew(e){let{settings:a,updateSetting:s}=e;return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"General Settings"}),(0,n.jsx)(r.BT,{children:"Configure basic badge positioning and sizing for review badges"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"badge-size",children:"Badge Size"}),(0,n.jsx)(m.p,{id:"badge-size",type:"number",min:"10",value:a.General.general_badge_size,onChange:e=>s("General","general_badge_size",parseInt(e.target.value)||100),placeholder:"100"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"edge-padding",children:"Edge Padding"}),(0,n.jsx)(m.p,{id:"edge-padding",type:"number",min:"0",value:a.General.general_edge_padding,onChange:e=>s("General","general_edge_padding",parseInt(e.target.value)||30),placeholder:"30"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"badge-position",children:"Badge Position"}),(0,n.jsxs)(f.l6,{value:a.General.general_badge_position,onValueChange:e=>s("General","general_badge_position",e),children:[(0,n.jsx)(f.bq,{children:(0,n.jsx)(f.yv,{})}),(0,n.jsxs)(f.gC,{children:[(0,n.jsx)(f.eb,{value:"top-left",children:"Top Left"}),(0,n.jsx)(f.eb,{value:"top-right",children:"Top Right"}),(0,n.jsx)(f.eb,{value:"bottom-left",children:"Bottom Left"}),(0,n.jsx)(f.eb,{value:"bottom-right",children:"Bottom Right"})]})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"text-padding",children:"Text Padding"}),(0,n.jsx)(m.p,{id:"text-padding",type:"number",min:"0",value:a.General.general_text_padding,onChange:e=>s("General","general_text_padding",parseInt(e.target.value)||20),placeholder:"20"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"badge-orientation",children:"Badge Orientation"}),(0,n.jsxs)(f.l6,{value:a.General.badge_orientation,onValueChange:e=>s("General","badge_orientation",e),children:[(0,n.jsx)(f.bq,{children:(0,n.jsx)(f.yv,{})}),(0,n.jsxs)(f.gC,{children:[(0,n.jsx)(f.eb,{value:"horizontal",children:"Horizontal"}),(0,n.jsx)(f.eb,{value:"vertical",children:"Vertical"})]})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"badge-spacing",children:"Badge Spacing"}),(0,n.jsx)(m.p,{id:"badge-spacing",type:"number",min:"0",value:a.General.badge_spacing,onChange:e=>s("General","badge_spacing",parseInt(e.target.value)||15),placeholder:"15"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"max-badges",children:"Max Badges to Display"}),(0,n.jsx)(m.p,{id:"max-badges",type:"number",min:"1",value:a.General.max_badges_to_display,onChange:e=>s("General","max_badges_to_display",parseInt(e.target.value)||4),placeholder:"4"})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(b.d,{id:"dynamic-sizing",checked:a.General.use_dynamic_sizing,onCheckedChange:e=>s("General","use_dynamic_sizing",e)}),(0,n.jsx)(g.J,{htmlFor:"dynamic-sizing",children:"Use Dynamic Sizing"})]})]})]})}var eC=s(9881),eB=s(8832);function ek(e){let{settings:a,reviewSources:s,reviewSourceSettings:i,updateSetting:l,updateReviewSource:d,updateReviewSourceSettings:x,reorderSources:u}=e,[p,j]=(0,t.useState)(null),[v,y]=(0,t.useState)(null),_=e=>{if(!e)return"";try{return JSON.parse(e).content_type||"conditional"}catch(e){return"conditional"}},N=(e,a)=>{j(a),e.dataTransfer.effectAllowed="move",console.log("\uD83D\uDCCB Drag started for index:",a)},w=(e,a)=>{e.preventDefault(),e.dataTransfer.dropEffect="move",null!==p&&p!==a&&y(a)},C=()=>{y(null)},B=(e,a)=>{if(e.preventDefault(),null===p||p===a){j(null),y(null);return}console.log("\uD83D\uDCCB Dropping item from index",p,"to index",a);let n=[...s].sort((e,a)=>e.priority-a.priority),t=n[p],i=[...n];i.splice(p,1),i.splice(a,0,t);let r=i.map((e,a)=>({...e,priority:a+1,display_order:a+1}));console.log("\uD83D\uDCCB New order after drop:",r.map(e=>({name:e.source_name,priority:e.priority}))),u(r),j(null),y(null)},k=()=>{j(null),y(null)},S=e=>{if(e>0){let a=[...s];[a[e],a[e-1]]=[a[e-1],a[e]],a.forEach((e,a)=>{e.priority=a+1,e.display_order=a+1}),u(a)}},A=e=>{if(e<s.length-1){let a=[...s];[a[e],a[e+1]]=[a[e+1],a[e]],a.forEach((e,a)=>{e.priority=a+1,e.display_order=a+1}),u(a)}};return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(r.Zp,{children:[(0,n.jsx)(r.aR,{children:(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(er.A,{className:"h-5 w-5 text-blue-500"}),"Review Source Availability"]})}),(0,n.jsxs)(r.Wu,{children:[(0,n.jsx)("p",{className:"mb-2 text-sm",children:"Not all review sources are currently functional. Here are the sources that are currently working:"}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[(0,n.jsx)(h.E,{variant:"default",className:"bg-green-500",children:"IMDb"}),(0,n.jsx)(h.E,{variant:"default",className:"bg-green-500",children:"Metacritic"}),(0,n.jsx)(h.E,{variant:"default",className:"bg-green-500",children:"MyAnimeList"}),(0,n.jsx)(h.E,{variant:"default",className:"bg-green-500",children:"Rotten Tomatoes Critics"}),(0,n.jsx)(h.E,{variant:"default",className:"bg-green-500",children:"TMDb"})]}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"Other sources are included for future functionality and testing purposes. I will get to them, I promise!"})]})]}),(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(c.A,{className:"h-5 w-5"}),"Review Sources Control"]}),(0,n.jsx)(r.BT,{children:"Configure which review sources to display and their priority order"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"max-badges-display",children:"Max Badges to Display"}),(0,n.jsx)(m.p,{id:"max-badges-display",type:"number",min:"1",max:"10",value:i.max_badges_display,onChange:e=>x("max_badges_display",parseInt(e.target.value)||4)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"selection-mode",children:"Selection Mode"}),(0,n.jsxs)(f.l6,{value:i.source_selection_mode,onValueChange:e=>x("source_selection_mode",e),children:[(0,n.jsx)(f.bq,{children:(0,n.jsx)(f.yv,{})}),(0,n.jsxs)(f.gC,{children:[(0,n.jsx)(f.eb,{value:"priority",children:"Priority Order"}),(0,n.jsx)(f.eb,{value:"enabled_only",children:"Enabled Only"}),(0,n.jsx)(f.eb,{value:"custom",children:"Custom Logic"})]})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2 pt-6",children:[(0,n.jsx)(b.d,{id:"show-percentage-only",checked:i.show_percentage_only,onCheckedChange:e=>x("show_percentage_only",e)}),(0,n.jsx)(g.J,{htmlFor:"show-percentage-only",children:"Convert all to percentage format"})]})]}),(0,n.jsxs)("div",{className:"bg-muted/30 rounded-lg p-4",children:[(0,n.jsxs)("h4",{className:"text-lg font-semibold mb-3 flex items-center",children:[(0,n.jsx)(el.A,{className:"w-4 h-4 mr-2 text-muted-foreground"}),"Review Sources (Drag to reorder)"]}),(0,n.jsx)("div",{className:"space-y-2",children:s.sort((e,a)=>e.priority-a.priority).map((e,a)=>{let t=p===a,i=v===a;return(0,n.jsx)(r.Zp,{className:"shadow-sm hover:shadow-md transition-shadow cursor-move ".concat(!e.enabled?"opacity-50":""," ").concat(t?"opacity-30 transform rotate-2":""," ").concat(i?"border-blue-500 border-2 bg-blue-50":""),draggable:!0,onDragStart:e=>N(e,a),onDragOver:e=>w(e,a),onDragLeave:C,onDrop:e=>B(e,a),onDragEnd:k,children:(0,n.jsx)(r.Wu,{className:"p-3",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(el.A,{className:"w-5 h-5 text-muted-foreground cursor-move"}),(0,n.jsx)(h.E,{variant:"default",className:"w-8 text-center",children:e.priority}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("span",{className:"font-medium",children:e.source_name}),e.conditions&&(0,n.jsx)(h.E,{variant:"secondary",className:"text-xs",children:_(e.conditions)})]}),(0,n.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Max variants: ",e.max_variants," •",(0,n.jsx)("span",{className:e.enabled?"text-green-600":"text-red-600",children:e.enabled?"Enabled":"Disabled"})]})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(g.J,{className:"text-xs",children:"Max:"}),(0,n.jsxs)(f.l6,{value:e.max_variants.toString(),onValueChange:a=>{d({...e,max_variants:parseInt(a)})},children:[(0,n.jsx)(f.bq,{className:"w-16",children:(0,n.jsx)(f.yv,{})}),(0,n.jsxs)(f.gC,{children:[(0,n.jsx)(f.eb,{value:"1",children:"1"}),(0,n.jsx)(f.eb,{value:"2",children:"2"}),(0,n.jsx)(f.eb,{value:"3",children:"3"}),(0,n.jsx)(f.eb,{value:"4",children:"4"}),(0,n.jsx)(f.eb,{value:"5",children:"5"})]})]})]}),(0,n.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,n.jsx)(o.$,{variant:"outline",size:"sm",onClick:()=>S(a),disabled:0===a,className:"h-6 w-8 p-0",children:(0,n.jsx)(eC.A,{className:"h-3 w-3"})}),(0,n.jsx)(o.$,{variant:"outline",size:"sm",onClick:()=>A(a),disabled:a===s.length-1,className:"h-6 w-8 p-0",children:(0,n.jsx)(eB.A,{className:"h-3 w-3"})})]}),(0,n.jsx)(b.d,{checked:e.enabled,onCheckedChange:a=>{d({...e,enabled:a})}})]})]})})},e.id)})})]})]})]})]})}function eS(e){let{settings:a,updateSetting:s,availableFonts:t=[]}=e,i=["AvenirNextLTProBold.otf","DejaVuSans.ttf","Arial","Helvetica","Times New Roman","Courier New",...t].filter((e,a,s)=>s.indexOf(e)===a);return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(_.A,{className:"h-5 w-5"}),"Text Settings"]}),(0,n.jsx)(r.BT,{children:"Configure font, size, and text appearance for review badges"})]}),(0,n.jsx)(r.Wu,{className:"space-y-4",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"font",children:"Primary Font"}),(0,n.jsxs)(f.l6,{value:a.Text.font,onValueChange:e=>s("Text","font",e),children:[(0,n.jsx)(f.bq,{children:(0,n.jsx)(f.yv,{placeholder:"Select a font..."})}),(0,n.jsx)(f.gC,{children:i.map(e=>(0,n.jsx)(f.eb,{value:e,children:e},e))})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"fallback-font",children:"Fallback Font"}),(0,n.jsxs)(f.l6,{value:a.Text.fallback_font,onValueChange:e=>s("Text","fallback_font",e),children:[(0,n.jsx)(f.bq,{children:(0,n.jsx)(f.yv,{placeholder:"Select a font..."})}),(0,n.jsx)(f.gC,{children:i.map(e=>(0,n.jsx)(f.eb,{value:e,children:e},e))})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"text-color",children:"Text Color"}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"color",value:a.Text["text-color"],onChange:e=>s("Text","text-color",e.target.value),className:"w-12 h-10 border rounded cursor-pointer"}),(0,n.jsx)(m.p,{type:"text",value:a.Text["text-color"],onChange:e=>s("Text","text-color",e.target.value),className:"flex-1",placeholder:"#FFFFFF"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"text-size",children:"Text Size"}),(0,n.jsx)(m.p,{id:"text-size",type:"number",min:"10",value:a.Text["text-size"],onChange:e=>s("Text","text-size",parseInt(e.target.value)||60),placeholder:"60"})]})]})})]})}var eA=s(8979);function eT(e){let{settings:a,updateSetting:s}=e;return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(eA.A,{className:"h-5 w-5"}),"Background Settings"]}),(0,n.jsx)(r.BT,{children:"Configure background color and opacity for review badges"})]}),(0,n.jsx)(r.Wu,{className:"space-y-4",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"background-color",children:"Background Color"}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"color",value:a.Background["background-color"],onChange:e=>s("Background","background-color",e.target.value),className:"w-12 h-10 border rounded cursor-pointer"}),(0,n.jsx)(m.p,{type:"text",value:a.Background["background-color"],onChange:e=>s("Background","background-color",e.target.value),className:"flex-1",placeholder:"#2C2C2C"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"background-opacity",children:"Background Opacity (%)"}),(0,n.jsx)(m.p,{id:"background-opacity",type:"number",min:"0",max:"100",value:a.Background.background_opacity,onChange:e=>s("Background","background_opacity",""===e.target.value?60:parseInt(e.target.value)),placeholder:"60"})]})]})})]})}function eI(e){let{settings:a,updateSetting:s}=e;return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(eA.A,{className:"h-5 w-5"}),"Border Settings"]}),(0,n.jsx)(r.BT,{children:"Configure border appearance for review badges"})]}),(0,n.jsx)(r.Wu,{className:"space-y-4",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"border-color",children:"Border Color"}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"color",value:a.Border["border-color"],onChange:e=>s("Border","border-color",e.target.value),className:"w-12 h-10 border rounded cursor-pointer"}),(0,n.jsx)(m.p,{type:"text",value:a.Border["border-color"],onChange:e=>s("Border","border-color",e.target.value),className:"flex-1",placeholder:"#2C2C2C"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"border-width",children:"Border Width"}),(0,n.jsx)(m.p,{id:"border-width",type:"number",min:"0",value:a.Border.border_width,onChange:e=>s("Border","border_width",parseInt(e.target.value)||1),placeholder:"1"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"border-radius",children:"Border Radius"}),(0,n.jsx)(m.p,{id:"border-radius",type:"number",min:"0",value:a.Border.border_radius,onChange:e=>s("Border","border_radius",parseInt(e.target.value)||10),placeholder:"10"})]})]})})]})}var eE=s(2970);function eD(e){let{settings:a,updateSetting:s}=e;return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(eE.A,{className:"h-5 w-5"}),"Shadow Settings"]}),(0,n.jsx)(r.BT,{children:"Configure shadow effects for review badges"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,n.jsx)(b.d,{id:"shadow-enable",checked:a.Shadow.shadow_enable,onCheckedChange:e=>s("Shadow","shadow_enable",e)}),(0,n.jsx)(g.J,{htmlFor:"shadow-enable",children:"Enable Shadow"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"shadow-blur",children:"Shadow Blur"}),(0,n.jsx)(m.p,{id:"shadow-blur",type:"number",min:"0",value:a.Shadow.shadow_blur,onChange:e=>s("Shadow","shadow_blur",parseInt(e.target.value)||5),placeholder:"5",disabled:!a.Shadow.shadow_enable})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"shadow-x",children:"Shadow X Offset"}),(0,n.jsx)(m.p,{id:"shadow-x",type:"number",value:a.Shadow.shadow_offset_x,onChange:e=>s("Shadow","shadow_offset_x",parseInt(e.target.value)||2),placeholder:"2",disabled:!a.Shadow.shadow_enable})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"shadow-y",children:"Shadow Y Offset"}),(0,n.jsx)(m.p,{id:"shadow-y",type:"number",value:a.Shadow.shadow_offset_y,onChange:e=>s("Shadow","shadow_offset_y",parseInt(e.target.value)||2),placeholder:"2",disabled:!a.Shadow.shadow_enable})]})]})]})]})}var eF=s(2138),eR=s(7712);function eP(e){let{settings:a,updateSetting:s,addImageMapping:i,removeImageMapping:l,updateImageName:d}=e,[c,h]=(0,t.useState)({rating:"",image:""}),[x,u]=(0,t.useState)({}),p=e=>{let n={...a.ImageBadges.image_mapping};delete n[e],s("ImageBadges","image_mapping",n),l&&l(e)},j=(e,n)=>{if(e===n||!n.trim())return;let t=a.ImageBadges.image_mapping[e],i={...a.ImageBadges.image_mapping};delete i[e],i[n]=t,s("ImageBadges","image_mapping",i),d&&d(e,n)};return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(eu.A,{className:"h-5 w-5"}),"Image Badge Settings"]}),(0,n.jsx)(r.BT,{children:"Configure image-based badges for review sources"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(b.d,{id:"enable-image-badges",checked:a.ImageBadges.enable_image_badges,onCheckedChange:e=>s("ImageBadges","enable_image_badges",e)}),(0,n.jsx)(g.J,{htmlFor:"enable-image-badges",children:"Use Image Badges"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(b.d,{id:"fallback-to-text",checked:a.ImageBadges.fallback_to_text,onCheckedChange:e=>s("ImageBadges","fallback_to_text",e),disabled:!a.ImageBadges.enable_image_badges}),(0,n.jsx)(g.J,{htmlFor:"fallback-to-text",children:"Fallback to Text"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"image-directory",children:"Image Directory"}),(0,n.jsx)(m.p,{id:"image-directory",type:"text",value:a.ImageBadges.codec_image_directory,onChange:e=>s("ImageBadges","codec_image_directory",e.target.value),placeholder:"images/rating",disabled:!a.ImageBadges.enable_image_badges})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"image-padding",children:"Image Padding"}),(0,n.jsx)(m.p,{id:"image-padding",type:"number",min:"0",value:a.ImageBadges.image_padding,onChange:e=>s("ImageBadges","image_padding",parseInt(e.target.value)||5),placeholder:"5",disabled:!a.ImageBadges.enable_image_badges})]})]})]})]}),(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"Image Mappings"}),(0,n.jsx)(r.BT,{children:"Map rating names to image filenames"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:[Object.entries(a.ImageBadges.image_mapping).map(e=>{let[t,i]=e;return(0,n.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-center",children:[(0,n.jsx)(m.p,{value:x[t]||t,onChange:e=>u(a=>({...a,[t]:e.target.value})),onBlur:e=>{let a=e.target.value.trim();a&&a!==t&&j(t,a),u(e=>{let a={...e};return delete a[t],a})},className:"col-span-5",placeholder:"Rating Name",disabled:!a.ImageBadges.enable_image_badges}),(0,n.jsx)(eF.A,{className:"col-span-1 h-4 w-4 text-muted-foreground justify-self-center"}),(0,n.jsx)(m.p,{value:i,onChange:e=>{let n={...a.ImageBadges.image_mapping};n[t]=e.target.value,s("ImageBadges","image_mapping",n)},className:"col-span-5",placeholder:"Image Name",disabled:!a.ImageBadges.enable_image_badges}),(0,n.jsx)(o.$,{onClick:()=>p(t),variant:"ghost",size:"sm",className:"col-span-1 h-8 w-8 p-0 text-red-500 hover:bg-red-50 hover:text-red-600",disabled:!a.ImageBadges.enable_image_badges,children:(0,n.jsx)(eR.A,{className:"h-4 w-4"})})]},t)}),(0,n.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-center mt-4 pt-4 border-t",children:[(0,n.jsx)(m.p,{value:c.rating,onChange:e=>h(a=>({...a,rating:e.target.value})),className:"col-span-5",placeholder:"Rating Name",disabled:!a.ImageBadges.enable_image_badges}),(0,n.jsx)(eF.A,{className:"col-span-1 h-4 w-4 text-muted-foreground justify-self-center"}),(0,n.jsx)(m.p,{value:c.image,onChange:e=>h(a=>({...a,image:e.target.value})),className:"col-span-5",placeholder:"Image Name",disabled:!a.ImageBadges.enable_image_badges}),(0,n.jsx)(o.$,{onClick:()=>{c.rating&&c.image&&(s("ImageBadges","image_mapping",{...a.ImageBadges.image_mapping,[c.rating]:c.image}),h({rating:"",image:""}),i&&i(c.rating,c.image))},variant:"ghost",size:"sm",className:"col-span-1 h-8 w-8 p-0 text-green-500 hover:bg-green-50 hover:text-green-600",disabled:!a.ImageBadges.enable_image_badges||!c.rating||!c.image,children:(0,n.jsx)(E.A,{className:"h-4 w-4"})})]})]}),0===Object.keys(a.ImageBadges.image_mapping).length&&(0,n.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,n.jsx)(eu.A,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),(0,n.jsx)("p",{children:"No image mappings configured"}),(0,n.jsx)("p",{className:"text-sm",children:"Add mappings above to use image badges"})]})]})]})]})}let ez={General:{general_badge_size:100,general_edge_padding:30,general_badge_position:"bottom-left",general_text_padding:20,use_dynamic_sizing:!0,badge_orientation:"vertical",badge_spacing:15,max_badges_to_display:4},Sources:{enable_imdb:!0,enable_rotten_tomatoes:!0,enable_metacritic:!0,enable_tmdb:!1,enable_myanimelist:!1,enable_anidb:!1,source_priority:["imdb","rotten_tomatoes","metacritic","tmdb","myanimelist","anidb"],minimum_votes_threshold:100,fallback_behavior:"hide"},Text:{font:"AvenirNextLTProBold.otf",fallback_font:"DejaVuSans.ttf","text-color":"#FFFFFF","text-size":60},Background:{"background-color":"#2C2C2C",background_opacity:60},Border:{"border-color":"#2C2C2C","border-radius":10,border_width:1},Shadow:{shadow_enable:!1,shadow_blur:5,shadow_offset_x:2,shadow_offset_y:2},ImageBadges:{enable_image_badges:!0,codec_image_directory:"images/rating",fallback_to_text:!0,image_padding:5,image_mapping:{IMDb:"imdb.png","Rotten Tomatoes":"rt.png",Metacritic:"metacritic.png",MyAnimeList:"mal.png"}}},eJ={max_badges_display:4,source_selection_mode:"priority",show_percentage_only:!0,group_related_sources:!0,anime_sources_for_anime_only:!0},eZ=[{id:1,source_name:"IMDb",enabled:!0,display_order:1,priority:1,max_variants:3,conditions:null},{id:2,source_name:"Rotten Tomatoes Critics",enabled:!0,display_order:2,priority:2,max_variants:3,conditions:null},{id:3,source_name:"Metacritic",enabled:!0,display_order:3,priority:3,max_variants:2,conditions:null},{id:4,source_name:"TMDb",enabled:!0,display_order:4,priority:4,max_variants:1,conditions:null},{id:5,source_name:"AniDB",enabled:!0,display_order:5,priority:5,max_variants:1,conditions:'{"content_type": "anime"}'},{id:6,source_name:"Rotten Tomatoes Audience",enabled:!1,display_order:6,priority:6,max_variants:3,conditions:null},{id:7,source_name:"Letterboxd",enabled:!1,display_order:7,priority:7,max_variants:1,conditions:null},{id:8,source_name:"MyAnimeList",enabled:!1,display_order:8,priority:8,max_variants:1,conditions:'{"content_type": "anime"}'},{id:9,source_name:"Trakt",enabled:!1,display_order:9,priority:9,max_variants:1,conditions:null},{id:10,source_name:"MDBList",enabled:!1,display_order:10,priority:10,max_variants:1,conditions:null}];var eM=s(8186);function eG(e){let{settings:a,updateSetting:s}=e;return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(eM.A,{className:"h-5 w-5"}),(0,n.jsx)(r.ZB,{children:"General Settings"})]}),(0,n.jsx)(r.BT,{children:"Basic configuration for awards badges"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"space-y-0.5",children:[(0,n.jsx)(g.J,{htmlFor:"awards-enabled",children:"Enable Awards Badges"}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Awards badges appear flush in the bottom-right corner when media has won specific awards"})]}),(0,n.jsx)(b.d,{id:"awards-enabled",checked:a.General.enabled,onCheckedChange:e=>s("General","enabled",e)})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"badge-size",children:"Badge Size"}),(0,n.jsx)(m.p,{id:"badge-size",type:"number",min:50,max:351,value:a.General.general_badge_size,onChange:e=>s("General","general_badge_size",""===e.target.value?351:parseInt(e.target.value)),disabled:!a.General.enabled}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Recommended: 351px (full native resolution)"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{children:"Badge Position"}),(0,n.jsxs)("div",{className:"p-3 border rounded-lg bg-muted/50",children:[(0,n.jsx)("div",{className:"font-medium flex items-center gap-2",children:(0,n.jsx)(h.E,{variant:"outline",children:"Bottom-Right Flush"})}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:"Awards badges are always positioned flush to the bottom-right corner with no padding for optimal ribbon appearance"})]})]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"space-y-0.5",children:[(0,n.jsx)(g.J,{htmlFor:"dynamic-sizing",children:"Use Dynamic Sizing"}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Automatically adjust badge size based on content"})]}),(0,n.jsx)(b.d,{id:"dynamic-sizing",checked:a.General.use_dynamic_sizing,onCheckedChange:e=>s("General","use_dynamic_sizing",e),disabled:!a.General.enabled})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"edge-padding",children:"Edge Padding"}),(0,n.jsx)(m.p,{id:"edge-padding",type:"number",value:a.General.general_edge_padding,disabled:!0,className:"opacity-50"}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Awards use 0 padding for flush positioning"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"text-padding",children:"Text Padding"}),(0,n.jsx)(m.p,{id:"text-padding",type:"number",value:a.General.general_text_padding,disabled:!0,className:"opacity-50"}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Awards use 0 padding for flush positioning"})]})]})]})]})}var eL=s(7262);let eO={General:{enabled:!0,general_badge_size:120,general_badge_position:"bottom-right-flush",general_edge_padding:0,general_text_padding:0,use_dynamic_sizing:!1},Awards:{color_scheme:"yellow",award_sources:["oscars","emmys","golden","bafta","cannes","crunchyroll"]},Text:{font:"AvenirNextLTProBold.otf",fallback_font:"DejaVuSans.ttf","text-color":"#FFFFFF","text-size":90},Background:{"background-color":"#000000",background_opacity:40},Border:{"border-color":"#000000","border-radius":10,border_width:1},Shadow:{shadow_enable:!1,shadow_blur:8,shadow_offset_x:2,shadow_offset_y:2},ImageBadges:{enable_image_badges:!0,codec_image_directory:"images/awards",fallback_to_text:!1,image_padding:0,image_mapping:{oscars:"oscars.png",emmys:"emmys.png",golden:"golden.png",bafta:"bafta.png",cannes:"cannes.png",crunchyroll:"crunchyroll.png",berlinale:"berlinale.png",cesar:"cesar.png",choice:"choice.png",imdb:"imdb.png",letterboxd:"letterboxd.png",metacritic:"metacritic.png",netflix:"netflix.png",razzie:"razzie.png",rotten:"rotten.png",rottenverified:"rottenverified.png",spirit:"spirit.png",sundance:"sundance.png",venice:"venice.png"}}},eW=[{value:"black",label:"Black",bgClass:"bg-gray-100",previewClass:"bg-black border-gray-300",textClass:"text-gray-900"},{value:"gray",label:"Gray",bgClass:"bg-gray-100",previewClass:"bg-gray-500 border-gray-300",textClass:"text-gray-700"},{value:"red",label:"Red",bgClass:"bg-red-50",previewClass:"bg-red-600 border-red-300",textClass:"text-red-700"},{value:"yellow",label:"Yellow",bgClass:"bg-yellow-50",previewClass:"bg-yellow-500 border-yellow-300",textClass:"text-yellow-700"}],eV=[{value:"oscars",label:"Academy Awards (Oscars)",priority:"Highest"},{value:"cannes",label:"Cannes Film Festival",priority:"Very High"},{value:"golden",label:"Golden Globe Awards",priority:"High"},{value:"bafta",label:"BAFTA Awards",priority:"High"},{value:"emmys",label:"Emmy Awards",priority:"High"},{value:"crunchyroll",label:"Crunchyroll Anime Awards",priority:"High"},{value:"berlinale",label:"Berlin International Film Festival",priority:"Medium"},{value:"venice",label:"Venice Film Festival",priority:"Medium"},{value:"sundance",label:"Sundance Film Festival",priority:"Medium"},{value:"spirit",label:"Independent Spirit Awards",priority:"Medium"},{value:"choice",label:"Critics Choice Awards",priority:"Medium"},{value:"cesar",label:"C\xe9sar Awards",priority:"Low"},{value:"imdb",label:"IMDb Top Lists",priority:"Low"},{value:"letterboxd",label:"Letterboxd",priority:"Low"},{value:"metacritic",label:"Metacritic",priority:"Low"},{value:"netflix",label:"Netflix",priority:"Low"},{value:"razzie",label:"Golden Raspberry Awards",priority:"Low"},{value:"rotten",label:"Rotten Tomatoes",priority:"Low"},{value:"rottenverified",label:"Rotten Tomatoes (Verified)",priority:"Low"}];function eX(e){let{settings:a,updateSetting:s,updateAwardSources:t}=e,i=e=>{s("Awards","color_scheme",e)},l=(e,s)=>{let n,i=a.Awards.award_sources;t(s?[...i,e]:i.filter(a=>a!==e))},d=eW.find(e=>e.value===a.Awards.color_scheme);return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(eN.A,{className:"h-5 w-5"}),(0,n.jsx)(r.ZB,{children:"Color Scheme"})]}),(0,n.jsx)(r.BT,{children:"Choose the color scheme for award ribbons"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsx)("div",{className:"grid grid-cols-2 gap-3",children:eW.map(e=>(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{id:"color-".concat(e.value),type:"radio",value:e.value,checked:a.Awards.color_scheme===e.value,onChange:()=>i(e.value),disabled:!a.General.enabled,className:"peer sr-only"}),(0,n.jsx)("label",{htmlFor:"color-".concat(e.value),className:"flex items-center justify-center p-3 border rounded-lg cursor-pointer transition-all ".concat(a.Awards.color_scheme===e.value?"border-primary bg-primary/5":"border-border hover:border-primary/50"," ").concat(!a.General.enabled?"opacity-50 cursor-not-allowed":""," ").concat(e.bgClass),children:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:"w-4 h-4 rounded border-2 ".concat(e.previewClass)}),(0,n.jsx)("span",{className:"text-sm font-medium ".concat(e.textClass),children:e.label})]})})]},e.value))}),a.General.enabled&&d&&(0,n.jsxs)("div",{className:"p-3 border rounded-lg bg-muted/50",children:[(0,n.jsx)("div",{className:"text-sm font-medium mb-2",children:"Preview:"}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:"w-8 h-8 rounded border-2 ".concat(d.previewClass)}),(0,n.jsxs)("span",{className:"text-sm text-muted-foreground",children:[d.label," scheme selected"]})]})]})]})]}),(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(eM.A,{className:"h-5 w-5"}),(0,n.jsx)(r.ZB,{children:"Award Sources"})]}),(0,n.jsx)(r.BT,{children:"Select which award types to detect and display"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsx)("div",{className:"max-h-64 overflow-y-auto border rounded-lg p-3",children:(0,n.jsx)("div",{className:"space-y-3",children:eV.map(e=>{let s=a.Awards.award_sources.includes(e.value);return(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(eL.S,{id:"award-".concat(e.value),checked:s,onCheckedChange:a=>l(e.value,a),disabled:!a.General.enabled}),(0,n.jsx)("label",{htmlFor:"award-".concat(e.value),className:"flex-1 text-sm cursor-pointer ".concat(a.General.enabled?"":"opacity-50"),children:e.label}),e.priority&&(0,n.jsx)(h.E,{variant:"outline",className:"text-xs",children:e.priority})]},e.value)})})}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Selected awards will be detected automatically. Priority order: Oscars → Cannes → Golden Globe → BAFTA → Emmy → Others"}),(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsxs)(h.E,{variant:"secondary",children:[a.Awards.award_sources.length," sources selected"]})})]})]}),a.General.enabled&&(0,n.jsxs)(r.Zp,{className:"border-blue-200 bg-blue-50/50",children:[(0,n.jsx)(r.aR,{children:(0,n.jsx)(r.ZB,{className:"text-blue-900",children:"Award Detection Info"})}),(0,n.jsx)(r.Wu,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-medium text-blue-800 mb-2",children:"Detection Sources:"}),(0,n.jsxs)("ul",{className:"space-y-1 text-blue-700",children:[(0,n.jsx)("li",{children:"• Static mapping database (140+ titles)"}),(0,n.jsx)("li",{children:"• TMDb API (real-time data)"}),(0,n.jsx)("li",{children:"• OMDB API (fallback data)"}),(0,n.jsx)("li",{children:"• 7-day API caching system"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-medium text-blue-800 mb-2",children:"Coverage:"}),(0,n.jsxs)("ul",{className:"space-y-1 text-blue-700",children:[(0,n.jsx)("li",{children:"• 80+ award-winning movies"}),(0,n.jsx)("li",{children:"• 60+ award-winning TV shows"}),(0,n.jsxs)("li",{children:["• ",a.Awards.award_sources.length," selected award types"]}),(0,n.jsx)("li",{children:"• Priority-based detection system"})]})]})]})})]})]})}function e$(e){let{settings:a,updateSetting:s,availableFonts:t=[]}=e,i=["AvenirNextLTProBold.otf","DejaVuSans.ttf","Arial","Helvetica","Times New Roman","Courier New",...t].filter((e,a,s)=>s.indexOf(e)===a);return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(_.A,{className:"h-5 w-5"}),"Text Settings"]}),(0,n.jsx)(r.BT,{children:"Configure font, size, and text appearance for awards badges"})]}),(0,n.jsx)(r.Wu,{className:"space-y-4",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"font",children:"Primary Font"}),(0,n.jsxs)(f.l6,{value:a.Text.font,onValueChange:e=>s("Text","font",e),disabled:!a.General.enabled,children:[(0,n.jsx)(f.bq,{children:(0,n.jsx)(f.yv,{placeholder:"Select a font..."})}),(0,n.jsx)(f.gC,{children:i.map(e=>(0,n.jsx)(f.eb,{value:e,children:e},e))})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"fallback-font",children:"Fallback Font"}),(0,n.jsxs)(f.l6,{value:a.Text.fallback_font,onValueChange:e=>s("Text","fallback_font",e),disabled:!a.General.enabled,children:[(0,n.jsx)(f.bq,{children:(0,n.jsx)(f.yv,{placeholder:"Select a font..."})}),(0,n.jsx)(f.gC,{children:i.map(e=>(0,n.jsx)(f.eb,{value:e,children:e},e))})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"text-color",children:"Text Color"}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"color",value:a.Text["text-color"],onChange:e=>s("Text","text-color",e.target.value),disabled:!a.General.enabled,className:"w-12 h-10 border rounded cursor-pointer disabled:opacity-50"}),(0,n.jsx)(m.p,{type:"text",value:a.Text["text-color"],onChange:e=>s("Text","text-color",e.target.value),disabled:!a.General.enabled,className:"flex-1",placeholder:"#FFFFFF"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"text-size",children:"Text Size"}),(0,n.jsx)(m.p,{id:"text-size",type:"number",min:"10",value:a.Text["text-size"],onChange:e=>s("Text","text-size",parseInt(e.target.value)||90),disabled:!a.General.enabled,placeholder:"90"}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Recommended: 90px for awards text visibility"})]})]})})]})}function eU(e){let{settings:a,updateSetting:s}=e;return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(eA.A,{className:"h-5 w-5"}),"Background Settings"]}),(0,n.jsx)(r.BT,{children:"Configure background color and opacity for awards badges"})]}),(0,n.jsx)(r.Wu,{className:"space-y-4",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"background-color",children:"Background Color"}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"color",value:a.Background["background-color"],onChange:e=>s("Background","background-color",e.target.value),disabled:!a.General.enabled,className:"w-12 h-10 border rounded cursor-pointer disabled:opacity-50"}),(0,n.jsx)(m.p,{type:"text",value:a.Background["background-color"],onChange:e=>s("Background","background-color",e.target.value),disabled:!a.General.enabled,className:"flex-1",placeholder:"#000000"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"background-opacity",children:"Background Opacity (%)"}),(0,n.jsx)(m.p,{id:"background-opacity",type:"number",min:"0",max:"100",value:a.Background.background_opacity,onChange:e=>s("Background","background_opacity",""===e.target.value?40:parseInt(e.target.value)),disabled:!a.General.enabled,placeholder:"40"}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Awards typically use lower opacity for ribbon visibility"})]})]})})]})}function eH(e){let{settings:a,updateSetting:s}=e;return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(eA.A,{className:"h-5 w-5"}),"Border Settings"]}),(0,n.jsx)(r.BT,{children:"Configure border appearance for awards badges"})]}),(0,n.jsx)(r.Wu,{className:"space-y-4",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"border-color",children:"Border Color"}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"color",value:a.Border["border-color"],onChange:e=>s("Border","border-color",e.target.value),disabled:!a.General.enabled,className:"w-12 h-10 border rounded cursor-pointer disabled:opacity-50"}),(0,n.jsx)(m.p,{type:"text",value:a.Border["border-color"],onChange:e=>s("Border","border-color",e.target.value),disabled:!a.General.enabled,className:"flex-1",placeholder:"#000000"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"border-width",children:"Border Width"}),(0,n.jsx)(m.p,{id:"border-width",type:"number",min:"0",value:a.Border.border_width,onChange:e=>s("Border","border_width",parseInt(e.target.value)||0),disabled:!a.General.enabled,placeholder:"1"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"border-radius",children:"Border Radius"}),(0,n.jsx)(m.p,{id:"border-radius",type:"number",min:"0",value:a.Border.border_radius,onChange:e=>s("Border","border_radius",parseInt(e.target.value)||10),disabled:!a.General.enabled,placeholder:"10"})]})]})})]})}function eY(e){let{settings:a,updateSetting:s}=e;return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(eE.A,{className:"h-5 w-5"}),"Shadow Settings"]}),(0,n.jsx)(r.BT,{children:"Configure shadow effects for awards badges"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,n.jsx)(b.d,{id:"shadow-enable",checked:a.Shadow.shadow_enable,onCheckedChange:e=>s("Shadow","shadow_enable",e),disabled:!a.General.enabled}),(0,n.jsx)(g.J,{htmlFor:"shadow-enable",children:"Enable Shadow"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"shadow-blur",children:"Shadow Blur"}),(0,n.jsx)(m.p,{id:"shadow-blur",type:"number",min:"0",value:a.Shadow.shadow_blur,onChange:e=>s("Shadow","shadow_blur",parseInt(e.target.value)||8),placeholder:"8",disabled:!a.Shadow.shadow_enable||!a.General.enabled})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"shadow-x",children:"Shadow X Offset"}),(0,n.jsx)(m.p,{id:"shadow-x",type:"number",value:a.Shadow.shadow_offset_x,onChange:e=>s("Shadow","shadow_offset_x",parseInt(e.target.value)||2),placeholder:"2",disabled:!a.Shadow.shadow_enable||!a.General.enabled})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"shadow-y",children:"Shadow Y Offset"}),(0,n.jsx)(m.p,{id:"shadow-y",type:"number",value:a.Shadow.shadow_offset_y,onChange:e=>s("Shadow","shadow_offset_y",parseInt(e.target.value)||2),placeholder:"2",disabled:!a.Shadow.shadow_enable||!a.General.enabled})]})]})]})]})}function eq(e){let{settings:a,updateSetting:s,addImageMapping:i,removeImageMapping:l,updateImageName:d}=e,[c,h]=(0,t.useState)({award:"",image:""}),[x,u]=(0,t.useState)({}),p=e=>{let n={...a.ImageBadges.image_mapping};delete n[e],s("ImageBadges","image_mapping",n),l&&l(e)},j=(e,n)=>{if(e===n||!n.trim())return;let t=a.ImageBadges.image_mapping[e],i={...a.ImageBadges.image_mapping};delete i[e],i[n]=t,s("ImageBadges","image_mapping",i),d&&d(e,n)};return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(eu.A,{className:"h-5 w-5"}),"Image Badge Settings"]}),(0,n.jsx)(r.BT,{children:"Configure image-based badges for award ribbons"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(b.d,{id:"enable-image-badges",checked:a.ImageBadges.enable_image_badges,onCheckedChange:e=>s("ImageBadges","enable_image_badges",e),disabled:!a.General.enabled}),(0,n.jsx)(g.J,{htmlFor:"enable-image-badges",children:"Use Image Badges"})]}),(0,n.jsxs)("div",{className:"p-3 border rounded-lg bg-muted/50",children:[(0,n.jsx)("div",{className:"text-sm font-medium mb-1",children:"Awards Image Configuration"}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Awards are image-only (no text fallback). Images are organized in color-coded subdirectories."})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"image-directory",children:"Awards Image Directory"}),(0,n.jsx)(m.p,{id:"image-directory",type:"text",value:a.ImageBadges.codec_image_directory,onChange:e=>s("ImageBadges","codec_image_directory",e.target.value),placeholder:"images/awards",disabled:!0,className:"opacity-50"}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"This directory contains color-coded subdirectories (black, gray, red, yellow)"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"image-padding",children:"Image Padding"}),(0,n.jsx)(m.p,{id:"image-padding",type:"number",min:"0",value:a.ImageBadges.image_padding,onChange:e=>s("ImageBadges","image_padding",parseInt(e.target.value)||0),placeholder:"0",disabled:!0,className:"opacity-50"}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Awards use 0 padding for flush positioning"})]})]})]})]}),(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"Award Image Mappings"}),(0,n.jsx)(r.BT,{children:"Map award names to image filenames (located in color-coded subdirectories)"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:[Object.entries(a.ImageBadges.image_mapping).map(e=>{let[t,i]=e;return(0,n.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-center",children:[(0,n.jsx)(m.p,{value:x[t]||t,onChange:e=>u(a=>({...a,[t]:e.target.value})),onBlur:e=>{let a=e.target.value.trim();a&&a!==t&&j(t,a),u(e=>{let a={...e};return delete a[t],a})},className:"col-span-5",placeholder:"Award Name",disabled:!a.ImageBadges.enable_image_badges||!a.General.enabled}),(0,n.jsx)(eF.A,{className:"col-span-1 h-4 w-4 text-muted-foreground justify-self-center"}),(0,n.jsx)(m.p,{value:i,onChange:e=>{let n={...a.ImageBadges.image_mapping};n[t]=e.target.value,s("ImageBadges","image_mapping",n)},className:"col-span-5",placeholder:"Image Name",disabled:!a.ImageBadges.enable_image_badges||!a.General.enabled}),(0,n.jsx)(o.$,{onClick:()=>p(t),variant:"ghost",size:"sm",className:"col-span-1 h-8 w-8 p-0 text-red-500 hover:bg-red-50 hover:text-red-600",disabled:!a.ImageBadges.enable_image_badges||!a.General.enabled,children:(0,n.jsx)(eR.A,{className:"h-4 w-4"})})]},t)}),(0,n.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-center mt-4 pt-4 border-t",children:[(0,n.jsx)(m.p,{value:c.award,onChange:e=>h(a=>({...a,award:e.target.value})),className:"col-span-5",placeholder:"Award Name",disabled:!a.ImageBadges.enable_image_badges||!a.General.enabled}),(0,n.jsx)(eF.A,{className:"col-span-1 h-4 w-4 text-muted-foreground justify-self-center"}),(0,n.jsx)(m.p,{value:c.image,onChange:e=>h(a=>({...a,image:e.target.value})),className:"col-span-5",placeholder:"Image Name",disabled:!a.ImageBadges.enable_image_badges||!a.General.enabled}),(0,n.jsx)(o.$,{onClick:()=>{c.award&&c.image&&(s("ImageBadges","image_mapping",{...a.ImageBadges.image_mapping,[c.award]:c.image}),h({award:"",image:""}),i&&i(c.award,c.image))},variant:"ghost",size:"sm",className:"col-span-1 h-8 w-8 p-0 text-green-500 hover:bg-green-50 hover:text-green-600",disabled:!a.ImageBadges.enable_image_badges||!a.General.enabled||!c.award||!c.image,children:(0,n.jsx)(E.A,{className:"h-4 w-4"})})]})]}),0===Object.keys(a.ImageBadges.image_mapping).length&&(0,n.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,n.jsx)(eu.A,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),(0,n.jsx)("p",{children:"No award image mappings configured"}),(0,n.jsx)("p",{className:"text-sm",children:"Add mappings above to use award badges"})]})]})]})]})}let eK="force-dynamic",eQ=[{id:"api",name:"API",component:function(){let[e,a]=(0,t.useState)(!1),[s,i]=(0,t.useState)(!1),[l,v]=(0,t.useState)(!1),[b,f]=(0,t.useState)(null),[y,_]=(0,t.useState)(!1),[N,w]=(0,t.useState)(null),[C,B]=(0,t.useState)(!1),[k,S]=(0,t.useState)(null),[A,T]=(0,t.useState)(!1),[I,E]=(0,t.useState)(null),[D,F]=(0,t.useState)(!1),[R,P]=(0,t.useState)(null),[z,J]=(0,t.useState)({url:"https://jellyfin.example.com",api_key:"",user_id:""}),[Z,M]=(0,t.useState)({api_key:"",cache_expiration:60}),[G,L]=(0,t.useState)({api_key:"",cache_expiration:60,language:"en",region:""}),[O,W]=(0,t.useState)({username:"",password:"",version:1,client_name:"",language:"en",cache_expiration:60}),[V,X]=(0,t.useState)({api_key:"",cache_expiration:60}),$=async()=>{a(!0);try{console.log("Loading API settings from settings.yaml...");let a=await fetch("".concat(j(),"/api/v1/config/settings.yaml"));if(!a.ok){if(404===a.status)return void console.log("No settings.yaml found yet, using defaults");throw Error("HTTP ".concat(a.status,": ").concat(a.statusText))}let s=await a.json();if(console.log("API settings loaded from settings.yaml:",s),s.config&&s.config.api_keys){let a=s.config;if(a.api_keys.Jellyfin&&a.api_keys.Jellyfin.length>0){let e=a.api_keys.Jellyfin[0];J({url:e.url||"",api_key:e.api_key||"",user_id:e.user_id||""})}if(a.api_keys.OMDB&&a.api_keys.OMDB.length>0){let e=a.api_keys.OMDB[0];M({api_key:e.api_key||"",cache_expiration:e.cache_expiration||60})}if(a.api_keys.TMDB&&a.api_keys.TMDB.length>0){let e=a.api_keys.TMDB[0];L({api_key:e.api_key||"",cache_expiration:e.cache_expiration||60,language:e.language||"en",region:e.region||""})}if(a.api_keys.aniDB){let s=a.api_keys.aniDB;if(Array.isArray(s)){var e;let a=(null==(e=s[0])?void 0:e.username)||"",n=s[1]||{};W({username:a,password:n.password||"",version:n.version||1,client_name:n.client_name||"",language:n.language||"en",cache_expiration:n.cache_expiration||60})}}if(a.api_keys.MDBList&&a.api_keys.MDBList.length>0){let e=a.api_keys.MDBList[0];X({api_key:e.api_key||"",cache_expiration:e.cache_expiration||60})}p.oR.success("API settings loaded successfully")}}catch(e){console.error("Error loading settings:",e),p.oR.error("Failed to load API settings")}finally{a(!1)}},U=async()=>{i(!0);try{let e={api_keys:{Jellyfin:[{url:z.url,api_key:z.api_key,user_id:z.user_id}],OMDB:[{api_key:Z.api_key,cache_expiration:Z.cache_expiration}],TMDB:[{api_key:G.api_key,cache_expiration:G.cache_expiration,language:G.language,region:G.region||null}],aniDB:[{username:O.username},{password:O.password,version:O.version,client_name:O.client_name,language:O.language,cache_expiration:O.cache_expiration}],MDBList:[{api_key:V.api_key,cache_expiration:V.cache_expiration}]}};if(!(await fetch("".concat(j(),"/api/v1/config/settings.yaml"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to save API settings");p.oR.success("API settings saved successfully!")}catch(e){console.error("Error saving settings:",e),p.oR.error("Failed to save API settings")}finally{i(!1)}},H=async()=>{if(!z.url||!z.api_key||!z.user_id)return void f({success:!1,message:"Please fill in all Jellyfin fields"});v(!0),f(null);try{let e=await fetch("".concat(j(),"/api/v1/config/test-jellyfin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:z.url,api_key:z.api_key,user_id:z.user_id})}),a=await e.json();if(e.ok){f({success:!0,message:a.message||"Connection successful!"});try{await U(),f({success:!0,message:(a.message||"Connection successful!")+" - Settings saved automatically!"})}catch(e){f({success:!0,message:(a.message||"Connection successful!")+" - Warning: Auto-save failed, please save manually."})}}else f({success:!1,message:a.error||"Connection failed"})}catch(e){f({success:!1,message:"Connection failed"})}finally{v(!1)}},Y=async()=>{if(!V.api_key)return void E({success:!1,message:"Please enter an MDBList API key"});T(!0),E(null);try{let e=await fetch("".concat(j(),"/api/v1/config/test-mdblist"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({api_key:V.api_key})}),a=await e.json();e.ok?E({success:!0,message:a.message||"Connection successful!"}):E({success:!1,message:a.error||"Connection failed"})}catch(e){E({success:!1,message:"Connection failed"})}finally{T(!1)}},q=async()=>{if(!O.username||!O.password)return void P({success:!1,message:"Please enter AniDB username and password"});F(!0),P(null);try{let e=await fetch("".concat(j(),"/api/v1/config/test-anidb"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:O.username,password:O.password,version:O.version,client_name:O.client_name,language:O.language})}),a=await e.json();e.ok?P({success:!0,message:a.message||"Connection successful!"}):P({success:!1,message:a.error||"Connection failed"})}catch(e){P({success:!1,message:"Connection failed"})}finally{F(!1)}},K=async()=>{if(!Z.api_key)return void w({success:!1,message:"Please enter an OMDB API key"});_(!0),w(null);try{let e=await fetch("".concat(j(),"/api/v1/config/test-omdb"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({api_key:Z.api_key})}),a=await e.json();e.ok?w({success:!0,message:a.message||"Connection successful!"}):w({success:!1,message:a.error||"Connection failed"})}catch(e){w({success:!1,message:"Connection failed"})}finally{_(!1)}},Q=async()=>{if(!G.api_key)return void S({success:!1,message:"Please enter a TMDB API key"});B(!0),S(null);try{let e=await fetch("".concat(j(),"/api/v1/config/test-tmdb"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({api_key:G.api_key})}),a=await e.json();e.ok?S({success:!0,message:a.message||"Connection successful!"}):S({success:!1,message:a.error||"Connection failed"})}catch(e){S({success:!1,message:"Connection failed"})}finally{B(!1)}};return((0,t.useEffect)(()=>{$()},[]),e)?(0,n.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,n.jsx)(d.A,{className:"h-8 w-8 animate-spin"}),(0,n.jsx)("span",{className:"ml-2",children:"Loading API settings..."})]}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-2xl font-bold",children:"API Settings"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Configure connections to external services"})]}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),U()},className:"space-y-6",children:[(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:["Jellyfin Connection",b&&(0,n.jsx)(h.E,{variant:b.success?"default":"destructive",children:b.success?"Connected":"Error"})]}),(0,n.jsx)(r.BT,{children:"Configure your Jellyfin media server connection"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"jellyfin-url",children:"Server URL"}),(0,n.jsx)(m.p,{id:"jellyfin-url",type:"text",placeholder:"https://jellyfin.example.com",value:z.url,onChange:e=>J(a=>({...a,url:e.target.value}))})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"jellyfin-api-key",children:"API Key"}),(0,n.jsx)(m.p,{id:"jellyfin-api-key",type:"text",placeholder:"Your Jellyfin API key",value:z.api_key,onChange:e=>J(a=>({...a,api_key:e.target.value}))})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"jellyfin-user-id",children:"User ID"}),(0,n.jsx)(m.p,{id:"jellyfin-user-id",type:"text",placeholder:"Your Jellyfin user ID",value:z.user_id,onChange:e=>J(a=>({...a,user_id:e.target.value}))})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)(o.$,{type:"button",variant:"outline",onClick:H,disabled:l,children:[l?(0,n.jsx)(d.A,{className:"h-4 w-4 animate-spin mr-2"}):(null==b?void 0:b.success)?(0,n.jsx)(c.A,{className:"h-4 w-4 mr-2"}):(null==b?void 0:b.success)===!1?(0,n.jsx)(x.A,{className:"h-4 w-4 mr-2"}):null,l?"Testing...":"Test Connection"]}),b&&(0,n.jsx)("span",{className:"text-sm ".concat(b.success?"text-green-600":"text-red-600"),children:b.message})]})]})]}),(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:["OMDB API",N&&(0,n.jsx)(h.E,{variant:N.success?"default":"destructive",children:N.success?"Connected":"Error"})]}),(0,n.jsx)(r.BT,{children:"Open Movie Database for additional metadata"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"omdb-api-key",children:"API Key"}),(0,n.jsx)(m.p,{id:"omdb-api-key",type:"text",placeholder:"Your OMDB API key",value:Z.api_key,onChange:e=>M(a=>({...a,api_key:e.target.value}))})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"omdb-cache",children:"Cache Expiration (minutes)"}),(0,n.jsx)(m.p,{id:"omdb-cache",type:"number",value:Z.cache_expiration,onChange:e=>M(a=>({...a,cache_expiration:parseInt(e.target.value)||60}))})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)(o.$,{type:"button",variant:"outline",onClick:K,disabled:y,children:[y?(0,n.jsx)(d.A,{className:"h-4 w-4 animate-spin mr-2"}):(null==N?void 0:N.success)?(0,n.jsx)(c.A,{className:"h-4 w-4 mr-2"}):(null==N?void 0:N.success)===!1?(0,n.jsx)(x.A,{className:"h-4 w-4 mr-2"}):null,y?"Testing...":"Test Connection"]}),N&&(0,n.jsx)("span",{className:"text-sm ".concat(N.success?"text-green-600":"text-red-600"),children:N.message})]})]})]}),(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:["TMDB API",k&&(0,n.jsx)(h.E,{variant:k.success?"default":"destructive",children:k.success?"Connected":"Error"})]}),(0,n.jsx)(r.BT,{children:"The Movie Database for comprehensive movie and TV data"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"tmdb-api-key",children:"API Read Access Token"}),(0,n.jsx)(m.p,{id:"tmdb-api-key",type:"text",placeholder:"Your TMDB API Read Access Token",value:G.api_key,onChange:e=>L(a=>({...a,api_key:e.target.value}))}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"Use your TMDB API Read Access Token (Bearer token), not the API Key"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"tmdb-language",children:"Language"}),(0,n.jsx)(m.p,{id:"tmdb-language",type:"text",placeholder:"en",value:G.language,onChange:e=>L(a=>({...a,language:e.target.value}))})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"tmdb-region",children:"Region"}),(0,n.jsx)(m.p,{id:"tmdb-region",type:"text",placeholder:"US",value:G.region,onChange:e=>L(a=>({...a,region:e.target.value}))})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"tmdb-cache",children:"Cache Expiration (minutes)"}),(0,n.jsx)(m.p,{id:"tmdb-cache",type:"number",value:G.cache_expiration,onChange:e=>L(a=>({...a,cache_expiration:parseInt(e.target.value)||60}))})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)(o.$,{type:"button",variant:"outline",onClick:Q,disabled:C,children:[C?(0,n.jsx)(d.A,{className:"h-4 w-4 animate-spin mr-2"}):(null==k?void 0:k.success)?(0,n.jsx)(c.A,{className:"h-4 w-4 mr-2"}):(null==k?void 0:k.success)===!1?(0,n.jsx)(x.A,{className:"h-4 w-4 mr-2"}):null,C?"Testing...":"Test Connection"]}),k&&(0,n.jsx)("span",{className:"text-sm ".concat(k.success?"text-green-600":"text-red-600"),children:k.message})]})]})]}),(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:["MDBList API",I&&(0,n.jsx)(h.E,{variant:I.success?"default":"destructive",children:I.success?"Connected":"Error"})]}),(0,n.jsx)(r.BT,{children:"MDBList for movie and TV show ratings and data"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"mdblist-api-key",children:"API Key"}),(0,n.jsx)(m.p,{id:"mdblist-api-key",type:"text",placeholder:"Your MDBList API key",value:V.api_key,onChange:e=>X(a=>({...a,api_key:e.target.value}))})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"mdblist-cache",children:"Cache Expiration (minutes)"}),(0,n.jsx)(m.p,{id:"mdblist-cache",type:"number",value:V.cache_expiration,onChange:e=>X(a=>({...a,cache_expiration:parseInt(e.target.value)||60}))})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)(o.$,{type:"button",variant:"outline",onClick:Y,disabled:A,children:[A?(0,n.jsx)(d.A,{className:"h-4 w-4 animate-spin mr-2"}):(null==I?void 0:I.success)?(0,n.jsx)(c.A,{className:"h-4 w-4 mr-2"}):(null==I?void 0:I.success)===!1?(0,n.jsx)(x.A,{className:"h-4 w-4 mr-2"}):null,A?"Testing...":"Test Connection"]}),I&&(0,n.jsx)("span",{className:"text-sm ".concat(I.success?"text-green-600":"text-red-600"),children:I.message})]})]})]}),(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:["AniDB API",R&&(0,n.jsx)(h.E,{variant:R.success?"default":"destructive",children:R.success?"Connected":"Error"})]}),(0,n.jsx)(r.BT,{children:"AniDB for anime database information"})]}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"anidb-username",children:"Username"}),(0,n.jsx)(m.p,{id:"anidb-username",type:"text",placeholder:"Your AniDB username",value:O.username,onChange:e=>W(a=>({...a,username:e.target.value}))})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"anidb-password",children:"Password"}),(0,n.jsx)(m.p,{id:"anidb-password",type:"password",placeholder:"Your AniDB password",value:O.password,onChange:e=>W(a=>({...a,password:e.target.value}))})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"anidb-client",children:"Client Name"}),(0,n.jsx)(m.p,{id:"anidb-client",type:"text",placeholder:"aphrodite",value:O.client_name,onChange:e=>W(a=>({...a,client_name:e.target.value}))})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"anidb-language",children:"Language"}),(0,n.jsx)(m.p,{id:"anidb-language",type:"text",placeholder:"en",value:O.language,onChange:e=>W(a=>({...a,language:e.target.value}))})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"anidb-version",children:"Version"}),(0,n.jsx)(m.p,{id:"anidb-version",type:"number",value:O.version,onChange:e=>W(a=>({...a,version:parseInt(e.target.value)||1}))})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(g.J,{htmlFor:"anidb-cache",children:"Cache Expiration (minutes)"}),(0,n.jsx)(m.p,{id:"anidb-cache",type:"number",value:O.cache_expiration,onChange:e=>W(a=>({...a,cache_expiration:parseInt(e.target.value)||60}))})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)(o.$,{type:"button",variant:"outline",onClick:q,disabled:D,children:[D?(0,n.jsx)(d.A,{className:"h-4 w-4 animate-spin mr-2"}):(null==R?void 0:R.success)?(0,n.jsx)(c.A,{className:"h-4 w-4 mr-2"}):(null==R?void 0:R.success)===!1?(0,n.jsx)(x.A,{className:"h-4 w-4 mr-2"}):null,D?"Testing...":"Test Connection"]}),R&&(0,n.jsx)("span",{className:"text-sm ".concat(R.success?"text-green-600":"text-red-600"),children:R.message})]})]})]}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsxs)(o.$,{type:"submit",disabled:s,children:[s?(0,n.jsx)(d.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,n.jsx)(u.A,{className:"h-4 w-4 mr-2"}),s?"Saving...":"Save Changes"]})})]})]})}},{id:"audio",name:"Audio",component:function(){let{loading:e,saving:a,settings:s,availableFonts:i,loadSettings:r,loadFonts:c,saveSettings:m,updateSetting:g,addAudioMapping:x,removeAudioMapping:j,updateCodecName:b,runAudioCoverageAnalysis:f,getCacheStats:_,clearAudioCache:N,testEnhancedDetection:C}=function(){let[e,a]=(0,t.useState)(!1),[s,n]=(0,t.useState)(!1),[i,r]=(0,t.useState)(q),[l,d]=(0,t.useState)([]),c=(0,t.useCallback)(async()=>{try{let e=await w();d(e)}catch(e){console.error("Error loading fonts:",e),d([])}},[]),o=(0,t.useCallback)(async()=>{a(!0);try{let e=await fetch("".concat("","/api/v1/config/badge_settings_audio.yml")),a=await e.json();if(a.config&&Object.keys(a.config).length>0){let e={...q,...a.config,General:{...q.General,...a.config.General},Text:{...q.Text,...a.config.Text},Background:{...q.Background,...a.config.Background},Border:{...q.Border,...a.config.Border},Shadow:{...q.Shadow,...a.config.Shadow},ImageBadges:{...q.ImageBadges,...a.config.ImageBadges},EnhancedDetection:{...q.EnhancedDetection,...a.config.EnhancedDetection},Performance:{...q.Performance,...a.config.Performance}};r(e)}else r(q)}catch(e){console.error("Error loading audio settings:",e),p.oR.error("Failed to load audio badge settings"),r(q)}finally{a(!1)}},[]),m=(0,t.useCallback)(async()=>{n(!0);try{await Y("badge_settings_audio.yml",i),p.oR.success("Audio badge settings saved successfully!")}catch(e){console.error("Error saving audio settings:",e),p.oR.error("Failed to save audio badge settings")}finally{n(!1)}},[i]),g=(0,t.useCallback)((e,a)=>{r(s=>{let n=e.split("."),t={...s},i=t;for(let e=0;e<n.length-1;e++)i[n[e]]={...i[n[e]]},i=i[n[e]];return i[n[n.length-1]]=a,t})},[]),h=(0,t.useCallback)((e,a)=>!!e&&!!a&&(r(s=>({...s,ImageBadges:{...s.ImageBadges,image_mapping:{...s.ImageBadges.image_mapping,[e]:a}}})),!0),[]),x=(0,t.useCallback)(e=>{r(a=>{let s={...a.ImageBadges.image_mapping};return delete s[e],{...a,ImageBadges:{...a.ImageBadges,image_mapping:s}}})},[]),u=(0,t.useCallback)((e,a)=>{e!==a&&a.trim()&&r(s=>{let n=s.ImageBadges.image_mapping[e],t={...s.ImageBadges.image_mapping};return delete t[e],t[a]=n,{...s,ImageBadges:{...s.ImageBadges,image_mapping:t}}})},[]),j=(0,t.useCallback)(async()=>{try{let e=await fetch("".concat("","/api/v1/settings/audio/coverage"));if(!e.ok)throw Error("Analysis failed: ".concat(e.statusText));return await e.json()}catch(e){return console.error("Audio coverage analysis failed:",e),p.oR.error("Failed to analyze audio coverage"),null}},[]),v=(0,t.useCallback)(async()=>{try{let e=await fetch("".concat("","/api/v1/settings/audio/cache/stats"));if(!e.ok)throw Error("Cache stats failed: ".concat(e.statusText));return await e.json()}catch(e){return console.error("Audio cache stats failed:",e),p.oR.error("Failed to get cache statistics"),null}},[]);return{loading:e,saving:s,settings:i,availableFonts:l,loadSettings:o,loadFonts:c,saveSettings:m,updateSetting:g,addAudioMapping:h,removeAudioMapping:x,updateCodecName:u,runAudioCoverageAnalysis:j,getCacheStats:v,clearAudioCache:(0,t.useCallback)(async()=>{try{let e=await fetch("".concat("","/api/v1/settings/audio/cache"),{method:"DELETE"});if(!e.ok)throw Error("Cache clear failed: ".concat(e.statusText));return p.oR.success("Audio cache cleared successfully"),!0}catch(e){return console.error("Audio cache clear failed:",e),p.oR.error("Failed to clear audio cache"),!1}},[]),testEnhancedDetection:(0,t.useCallback)(async e=>{try{let a=await fetch("".concat("","/api/v1/settings/audio/test"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e||{})});if(!a.ok)throw Error("Detection test failed: ".concat(a.statusText));return await a.json()}catch(e){return console.error("Audio detection test failed:",e),p.oR.error("Failed to test enhanced detection"),null}},[])}}();return((0,t.useEffect)(()=>{(async()=>{await c(),await r()})()},[]),e)?(0,n.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,n.jsx)(d.A,{className:"h-8 w-8 animate-spin"}),(0,n.jsx)("span",{className:"ml-2",children:"Loading audio badge settings..."})]}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(v.A,{className:"h-6 w-6"}),(0,n.jsx)("h2",{className:"text-2xl font-bold",children:"Enhanced Audio Badge Settings"}),(0,n.jsx)(h.E,{variant:"outline",children:"Advanced Configuration"})]}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),m()},className:"space-y-6",children:[(0,n.jsxs)(l.tU,{defaultValue:"general",className:"space-y-6",children:[(0,n.jsxs)(l.j7,{className:"grid w-full grid-cols-9",children:[(0,n.jsx)(l.Xi,{value:"general",children:"General"}),(0,n.jsx)(l.Xi,{value:"text",children:"Text"}),(0,n.jsx)(l.Xi,{value:"background",children:"Background"}),(0,n.jsx)(l.Xi,{value:"border",children:"Border"}),(0,n.jsx)(l.Xi,{value:"shadow",children:"Shadow"}),(0,n.jsx)(l.Xi,{value:"images",children:"Images"}),(0,n.jsx)(l.Xi,{value:"enhanced",children:"Enhanced"}),(0,n.jsx)(l.Xi,{value:"performance",children:"Performance"}),(0,n.jsx)(l.Xi,{value:"diagnostics",children:"Diagnostics"})]}),(0,n.jsx)(l.av,{value:"general",children:(0,n.jsx)(y,{settings:s,updateSetting:g})}),(0,n.jsx)(l.av,{value:"text",children:(0,n.jsx)(k,{settings:s,updateSetting:g,availableFonts:i})}),(0,n.jsx)(l.av,{value:"background",children:(0,n.jsx)(S,{settings:s,updateSetting:g})}),(0,n.jsx)(l.av,{value:"border",children:(0,n.jsx)(A,{settings:s,updateSetting:g})}),(0,n.jsx)(l.av,{value:"shadow",children:(0,n.jsx)(T,{settings:s,updateSetting:g})}),(0,n.jsx)(l.av,{value:"images",children:(0,n.jsx)(D,{settings:s,updateSetting:g,addAudioMapping:x,removeAudioMapping:j,updateCodecName:b})}),(0,n.jsx)(l.av,{value:"enhanced",children:(0,n.jsx)(P,{settings:s,updateSetting:g})}),(0,n.jsx)(l.av,{value:"performance",children:(0,n.jsx)(M,{settings:s,updateSetting:g})}),(0,n.jsx)(l.av,{value:"diagnostics",children:(0,n.jsx)(U,{settings:s,runAudioCoverageAnalysis:f,getCacheStats:_,clearAudioCache:N,testEnhancedDetection:C})})]}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsxs)(o.$,{type:"submit",disabled:a,children:[a?(0,n.jsx)(d.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,n.jsx)(u.A,{className:"h-4 w-4 mr-2"}),a?"Saving...":"Save Audio Settings"]})})]})]})}},{id:"resolution",name:"Resolution",component:function(){let{loading:e,saving:a,settings:s,availableFonts:i,loadSettings:r,loadFonts:c,saveSettings:m,updateSetting:g,addResolutionMapping:x,removeResolutionMapping:j,updateResolutionName:v,runImageCoverageAnalysis:b,getCacheStats:f,clearResolutionCache:y,testEnhancedDetection:_}=function(){let[e,a]=(0,t.useState)(!1),[s,n]=(0,t.useState)(!1),[i,r]=(0,t.useState)(e_),[l,d]=(0,t.useState)([]),c=async()=>{n(!0);try{console.log("Saving resolution settings:",i),await Y("badge_settings_resolution.yml",i),console.log("Save successful"),p.oR.success("Resolution badge settings saved successfully!",{description:"Your settings have been updated and saved.",duration:3e3})}catch(e){console.error("Error saving resolution settings:",e),p.oR.error("Failed to save resolution badge settings",{description:e instanceof Error?e.message:"Unknown error occurred",duration:5e3})}finally{n(!1)}};return{loading:e,saving:s,settings:i,availableFonts:l,loadSettings:async()=>{a(!0);try{console.log("Loading resolution settings...");let e=await fetch("".concat("","/api/v1/config/badge_settings_resolution.yml")),a=await e.json();if(console.log("Loaded resolution config:",a),a.config&&Object.keys(a.config).length>0){let e={...e_,...a.config,General:{...e_.General,...a.config.General},Text:{...e_.Text,...a.config.Text},Background:{...e_.Background,...a.config.Background},Border:{...e_.Border,...a.config.Border},Shadow:{...e_.Shadow,...a.config.Shadow},ImageBadges:{...e_.ImageBadges,...a.config.ImageBadges},enhanced_detection:{...e_.enhanced_detection,...a.config.enhanced_detection},performance:{...e_.performance,...a.config.performance}};r(e),console.log("Settings loaded successfully")}else console.log("No existing config found, using defaults"),r(e_)}catch(e){console.error("Error loading resolution settings:",e),p.oR.error("Failed to load resolution badge settings",{description:e instanceof Error?e.message:"Unknown error occurred",duration:5e3}),r(e_)}finally{a(!1)}},loadFonts:async()=>{try{console.log("Loading available fonts...");let e=await w();d(e)}catch(e){console.error("Error loading fonts:",e),d([])}},saveSettings:c,updateSetting:(e,a,s)=>{r(n=>({...n,[e]:{...n[e],[a]:s}}))},addResolutionMapping:(e,a)=>{e&&a&&(r(s=>({...s,ImageBadges:{...s.ImageBadges,image_mapping:{...s.ImageBadges.image_mapping,[e]:a}}})),p.oR.success("Added resolution mapping: ".concat(e," → ").concat(a),{duration:2e3}))},removeResolutionMapping:e=>{r(a=>{let s={...a.ImageBadges.image_mapping};return delete s[e],{...a,ImageBadges:{...a.ImageBadges,image_mapping:s}}}),p.oR.info("Removed resolution mapping: ".concat(e),{duration:2e3})},updateResolutionName:(e,a)=>{e!==a&&a.trim()&&r(s=>{let n=s.ImageBadges.image_mapping[e],t={...s.ImageBadges.image_mapping};return delete t[e],t[a]=n,{...s,ImageBadges:{...s.ImageBadges,image_mapping:t}}})},runImageCoverageAnalysis:async()=>{try{let e=await fetch("".concat("","/api/v1/settings/resolution/coverage"));return await e.json()}catch(e){throw console.error("Image coverage analysis failed:",e),e}},getCacheStats:async()=>{try{let e=await fetch("".concat("","/api/v1/settings/resolution/cache/stats"));return await e.json()}catch(e){throw console.error("Cache stats retrieval failed:",e),e}},clearResolutionCache:async()=>{try{let e=await fetch("".concat("","/api/v1/settings/resolution/cache"),{method:"DELETE"});return await e.json()}catch(e){throw console.error("Cache clear failed:",e),e}},testEnhancedDetection:async()=>{try{let e=await fetch("".concat("","/api/v1/settings/resolution/test"),{method:"POST"});return await e.json()}catch(e){throw console.error("Detection test failed:",e),e}}}}();return((0,t.useEffect)(()=>{(async()=>{await c(),await r()})()},[]),e)?(0,n.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,n.jsx)(d.A,{className:"h-8 w-8 animate-spin"}),(0,n.jsx)("span",{className:"ml-2",children:"Loading resolution badge settings..."})]}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(K.A,{className:"h-6 w-6"}),(0,n.jsx)("h2",{className:"text-2xl font-bold",children:"Resolution Badge Settings"}),(0,n.jsx)(h.E,{variant:"outline",children:"Badge Configuration"})]}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),m()},className:"space-y-6",children:[(0,n.jsxs)(l.tU,{defaultValue:"general",className:"space-y-6",children:[(0,n.jsxs)(l.j7,{className:"grid w-full grid-cols-9",children:[(0,n.jsx)(l.Xi,{value:"general",children:"General"}),(0,n.jsx)(l.Xi,{value:"text",children:"Text"}),(0,n.jsx)(l.Xi,{value:"background",children:"Background"}),(0,n.jsx)(l.Xi,{value:"border",children:"Border"}),(0,n.jsx)(l.Xi,{value:"shadow",children:"Shadow"}),(0,n.jsx)(l.Xi,{value:"images",children:"Images"}),(0,n.jsx)(l.Xi,{value:"enhanced",children:"Enhanced"}),(0,n.jsx)(l.Xi,{value:"performance",children:"Performance"}),(0,n.jsx)(l.Xi,{value:"diagnostics",children:"Diagnostics"})]}),(0,n.jsx)(l.av,{value:"general",children:(0,n.jsx)(Q,{settings:s,updateSetting:g})}),(0,n.jsx)(l.av,{value:"text",children:(0,n.jsx)(ee,{settings:s,updateSetting:g,availableFonts:i})}),(0,n.jsx)(l.av,{value:"background",children:(0,n.jsx)(ea,{settings:s,updateSetting:g})}),(0,n.jsx)(l.av,{value:"border",children:(0,n.jsx)(es,{settings:s,updateSetting:g})}),(0,n.jsx)(l.av,{value:"shadow",children:(0,n.jsx)(en,{settings:s,updateSetting:g})}),(0,n.jsx)(l.av,{value:"images",children:(0,n.jsx)(et,{settings:s,updateSetting:g,addResolutionMapping:x,removeResolutionMapping:j,updateResolutionName:v})}),(0,n.jsx)(l.av,{value:"enhanced",children:(0,n.jsx)(ed,{settings:s,updateSetting:g})}),(0,n.jsx)(l.av,{value:"performance",children:(0,n.jsx)(eg,{settings:s,updateSetting:g})}),(0,n.jsx)(l.av,{value:"diagnostics",children:(0,n.jsx)(ey,{settings:s,runImageCoverageAnalysis:b,getCacheStats:f,clearResolutionCache:y,testEnhancedDetection:_})})]}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsxs)(o.$,{type:"submit",disabled:a,children:[a?(0,n.jsx)(d.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,n.jsx)(u.A,{className:"h-4 w-4 mr-2"}),a?"Saving...":"Save Resolution Settings"]})})]})]})}},{id:"review",name:"Review",component:function(){let{loading:e,saving:a,settings:s,reviewSources:i,reviewSourceSettings:r,availableFonts:c,loadSettings:m,loadReviewSources:g,loadFonts:x,saveSettings:j,updateSetting:v,updateReviewSource:b,updateReviewSourceSettings:f,reorderSources:y,addImageMapping:_,removeImageMapping:N,updateImageName:w}=function(){let[e,a]=(0,t.useState)(!1),[s,n]=(0,t.useState)(!1),[i,r]=(0,t.useState)(ez),[l,d]=(0,t.useState)(eZ),[c,o]=(0,t.useState)(eJ),[m,g]=(0,t.useState)([]),h=async()=>{a(!0);try{console.log("Loading review settings...");let e=await fetch("".concat("","/api/v1/config/badge_settings_review.yml")),a=await e.json();if(console.log("Loaded review config:",a),a.config&&Object.keys(a.config).length>0){let e={...ez,...a.config,General:{...ez.General,...a.config.General},Sources:{...ez.Sources,...a.config.Sources},Text:{...ez.Text,...a.config.Text},Background:{...ez.Background,...a.config.Background},Border:{...ez.Border,...a.config.Border},Shadow:{...ez.Shadow,...a.config.Shadow},ImageBadges:{...ez.ImageBadges,...a.config.ImageBadges}};if(r(e),a.config.Sources){console.log("\uD83D\uDD04 Starting reviewSources sync with API data..."),console.log("\uD83D\uDCCA API Sources config:",a.config.Sources),console.log("\uD83D\uDCCB Default sources before sync:",eZ.map(e=>({name:e.source_name,enabled:e.enabled,priority:e.priority})));let e=a.config.Sources.source_priority||ez.Sources.source_priority;console.log("\uD83D\uDCCC Saved priority order:",e);let s=eZ.map(e=>{let s="";s="MyAnimeList"===e.source_name?"enable_myanimelist":"enable_".concat(e.source_name.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""));let n=a.config.Sources[s]||!1;return console.log("\uD83D\uDD17 Syncing ".concat(e.source_name,": ").concat(s," = ").concat(n," (API: ").concat(a.config.Sources[s],") - Original priority: ").concat(e.priority)),{...e,enabled:n}});s=s.map(a=>{let s="MyAnimeList"===a.source_name?"myanimelist":"IMDb"===a.source_name?"imdb":"Rotten Tomatoes Critics"===a.source_name?"rotten_tomatoes":"Rotten Tomatoes Audience"===a.source_name?"rotten_tomatoes_audience":"Metacritic"===a.source_name?"metacritic":"TMDb"===a.source_name?"tmdb":"AniDB"===a.source_name?"anidb":"Letterboxd"===a.source_name?"letterboxd":"Trakt"===a.source_name?"trakt":"MDBList"===a.source_name?"mdblist":a.source_name.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),n=e.findIndex(e=>e===s),t=-1!==n?n+1:a.priority;return console.log("\uD83D\uDCCC ".concat(a.source_name,": ").concat(s," found at index ").concat(n," -> priority ").concat(a.priority," -> ").concat(t)),{...a,priority:t,display_order:t}}),console.log("\uD83D\uDCCB Updated sources after sync:",s.map(e=>({name:e.source_name,enabled:e.enabled,priority:e.priority}))),console.log("\uD83C\uDFAF MyAnimeList specifically:",s.find(e=>"MyAnimeList"===e.source_name)),d(s),console.log("✅ Review sources synced with settings - Enabled sources:",s.filter(e=>e.enabled).map(e=>e.source_name))}else console.log("⚠️ No Sources config in API data, keeping defaults");console.log("✅ Review settings loaded successfully"),console.log("\uD83D\uDCCA Final settings state:",e.Sources),console.log("\uD83D\uDCCB Final reviewSources state will be set by sync above"),await b()}else console.log("No existing review config found, using defaults"),r(ez),d(eZ),o(eJ)}catch(e){console.error("Error loading review settings:",e),p.oR.error("Failed to load review badge settings",{description:e instanceof Error?e.message:"Unknown error occurred",duration:5e3}),r(ez),d(eZ),o(eJ)}finally{a(!1)}},x=async()=>{try{console.log("Loading review sources..."),console.log("Current reviewSources state:",l.map(e=>({name:e.source_name,enabled:e.enabled}))),l.some(e=>{var a;return e.enabled!==(null==(a=eZ.find(a=>a.id===e.id))?void 0:a.enabled)})?console.log("Synced data detected, keeping current reviewSources state"):(console.log("No synced data detected, using defaults"),d(eZ)),o(eJ)}catch(e){console.error("Error loading review sources:",e),l.some(e=>{var a;return e.enabled!==(null==(a=eZ.find(a=>a.id===e.id))?void 0:a.enabled)})||d(eZ),o(eJ)}},u=async()=>{try{console.log("Loading available fonts..."),g(["AvenirNextLTProBold.otf","DejaVuSans.ttf","Arial","Helvetica","Times New Roman","Courier New"])}catch(e){console.error("Error loading fonts:",e),g([])}},j=async()=>{n(!0);try{let e={...i.Sources};l.forEach(a=>{let s="";e[s="MyAnimeList"===a.source_name?"enable_myanimelist":"enable_".concat(a.source_name.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""))]=a.enabled,console.log("Syncing for save: ".concat(a.source_name," -> ").concat(s," = ").concat(a.enabled))});let a={...i,Sources:e};console.log("Saving review settings:",a),console.log("Sources being saved:",e),await Y("badge_settings_review.yml",a),console.log("Save successful"),r(a),p.oR.success("Review badge settings saved successfully!",{description:"Your settings have been updated and saved.",duration:3e3})}catch(e){console.error("Error saving review settings:",e),p.oR.error("Failed to save review badge settings",{description:e instanceof Error?e.message:"Unknown error occurred",duration:5e3})}finally{n(!1)}},v=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;try{console.log("Saving review source settings:",e);let a=await fetch("".concat("","/api/v1/config/review_source_settings"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.text();throw console.error("Save review source settings failed:",e),Error("Failed to save review source settings: ".concat(a.status))}let s=await a.json();console.log("Review source settings saved successfully:",s)}catch(e){console.error("Error saving review source settings:",e),p.oR.error("Failed to save review source settings",{description:e instanceof Error?e.message:"Unknown error occurred",duration:3e3})}},b=async()=>{try{console.log("Loading review source settings...");let e=await fetch("".concat("","/api/v1/config/review_source_settings"));if(e.ok){let a=await e.json();if(console.log("Loaded review source settings:",a),a.config&&Object.keys(a.config).length>0){let e={...eJ,...a.config};o(e),console.log("Review source settings loaded successfully:",e)}else console.log("No existing review source settings found, using defaults"),o(eJ)}else console.log("Review source settings endpoint not found, using defaults"),o(eJ)}catch(e){console.error("Error loading review source settings:",e),o(eJ)}};return(0,t.useEffect)(()=>{var e,a;console.log("\uD83D\uDD0D STATE CHANGE DETECTED:"),console.log("   \uD83D\uDCCA settings.Sources.enable_myanimelist:",null==(e=i.Sources)?void 0:e.enable_myanimelist),console.log("   \uD83D\uDCCB reviewSources MyAnimeList:",null==(a=l.find(e=>"MyAnimeList"===e.source_name))?void 0:a.enabled),console.log("   \uD83D\uDCCB reviewSources enabled count:",l.filter(e=>e.enabled).length),console.log("   \uD83D\uDCCB reviewSources enabled names:",l.filter(e=>e.enabled).map(e=>e.source_name))},[i.Sources,l]),{loading:e,saving:s,settings:i,reviewSources:l,reviewSourceSettings:c,availableFonts:m,loadSettings:h,loadReviewSources:x,loadFonts:u,saveSettings:j,updateSetting:(e,a,s)=>{r(n=>({...n,[e]:{...n[e],[a]:s}}))},updateReviewSource:e=>{d(a=>a.map(a=>a.id===e.id?e:a));let a="";a="MyAnimeList"===e.source_name?"enable_myanimelist":"enable_".concat(e.source_name.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"")),console.log("Updating ".concat(e.source_name,": ").concat(a," = ").concat(e.enabled)),r(s=>({...s,Sources:{...s.Sources,[a]:e.enabled}})),p.oR.info("Updated ".concat(e.source_name),{duration:2e3})},updateReviewSourceSettings:(e,a)=>{let s={...c,[e]:a};o(s),v(s)},reorderSources:e=>{console.log("\uD83D\uDD04 Reordering sources:",e.map(e=>({name:e.source_name,priority:e.priority}))),d(e);let a=e.map(e=>"MyAnimeList"===e.source_name?"myanimelist":"IMDb"===e.source_name?"imdb":"Rotten Tomatoes Critics"===e.source_name?"rotten_tomatoes":"Rotten Tomatoes Audience"===e.source_name?"rotten_tomatoes_audience":"Metacritic"===e.source_name?"metacritic":"TMDb"===e.source_name?"tmdb":"AniDB"===e.source_name?"anidb":"Letterboxd"===e.source_name?"letterboxd":"Trakt"===e.source_name?"trakt":"MDBList"===e.source_name?"mdblist":e.source_name.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""));console.log("\uD83D\uDCCC Updating source_priority array:",a),r(e=>({...e,Sources:{...e.Sources,source_priority:a}})),p.oR.success("Source priority updated",{duration:2e3})},addImageMapping:(e,a)=>{e&&a&&(r(s=>({...s,ImageBadges:{...s.ImageBadges,image_mapping:{...s.ImageBadges.image_mapping,[e]:a}}})),p.oR.success("Added image mapping: ".concat(e," → ").concat(a),{duration:2e3}))},removeImageMapping:e=>{r(a=>{let s={...a.ImageBadges.image_mapping};return delete s[e],{...a,ImageBadges:{...a.ImageBadges,image_mapping:s}}}),p.oR.info("Removed image mapping: ".concat(e),{duration:2e3})},updateImageName:(e,a)=>{e!==a&&a.trim()&&r(s=>{let n=s.ImageBadges.image_mapping[e],t={...s.ImageBadges.image_mapping};return delete t[e],t[a]=n,{...s,ImageBadges:{...s.ImageBadges,image_mapping:t}}})}}}();return((0,t.useEffect)(()=>{(async()=>{await x(),await m()})()},[]),e)?(0,n.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,n.jsx)(d.A,{className:"h-8 w-8 animate-spin"}),(0,n.jsx)("span",{className:"ml-2",children:"Loading review badge settings..."})]}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(eN.A,{className:"h-6 w-6"}),(0,n.jsx)("h2",{className:"text-2xl font-bold",children:"Review Badge Settings"}),(0,n.jsx)(h.E,{variant:"outline",children:"Badge Configuration"})]}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),j()},className:"space-y-6",children:[(0,n.jsxs)(l.tU,{defaultValue:"sources",className:"space-y-6",children:[(0,n.jsxs)(l.j7,{className:"grid w-full grid-cols-7",children:[(0,n.jsx)(l.Xi,{value:"sources",children:"Sources"}),(0,n.jsx)(l.Xi,{value:"general",children:"General"}),(0,n.jsx)(l.Xi,{value:"text",children:"Text"}),(0,n.jsx)(l.Xi,{value:"background",children:"Background"}),(0,n.jsx)(l.Xi,{value:"border",children:"Border"}),(0,n.jsx)(l.Xi,{value:"shadow",children:"Shadow"}),(0,n.jsx)(l.Xi,{value:"images",children:"Images"})]}),(0,n.jsx)(l.av,{value:"sources",children:(0,n.jsx)(ek,{settings:s,reviewSources:i,reviewSourceSettings:r,updateSetting:v,updateReviewSource:b,updateReviewSourceSettings:f,reorderSources:y})}),(0,n.jsx)(l.av,{value:"general",children:(0,n.jsx)(ew,{settings:s,updateSetting:v})}),(0,n.jsx)(l.av,{value:"text",children:(0,n.jsx)(eS,{settings:s,updateSetting:v,availableFonts:c})}),(0,n.jsx)(l.av,{value:"background",children:(0,n.jsx)(eT,{settings:s,updateSetting:v})}),(0,n.jsx)(l.av,{value:"border",children:(0,n.jsx)(eI,{settings:s,updateSetting:v})}),(0,n.jsx)(l.av,{value:"shadow",children:(0,n.jsx)(eD,{settings:s,updateSetting:v})}),(0,n.jsx)(l.av,{value:"images",children:(0,n.jsx)(eP,{settings:s,updateSetting:v,addImageMapping:_,removeImageMapping:N,updateImageName:w})})]}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsxs)(o.$,{type:"submit",disabled:a,children:[a?(0,n.jsx)(d.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,n.jsx)(u.A,{className:"h-4 w-4 mr-2"}),a?"Saving...":"Save Review Settings"]})})]})]})}},{id:"awards",name:"Awards",component:function(){let{loading:e,saving:a,settings:s,availableFonts:i,loadSettings:r,loadFonts:c,saveSettings:m,updateSetting:g,addImageMapping:x,removeImageMapping:j,updateImageName:v,updateAwardSources:b}=function(){let[e,a]=(0,t.useState)(!1),[s,n]=(0,t.useState)(!1),[i,r]=(0,t.useState)(eO),[l,d]=(0,t.useState)([]),c=async()=>{n(!0);try{console.log("Saving awards settings:",i),await Y("badge_settings_awards.yml",i),console.log("Save successful"),p.oR.success("Awards badge settings saved successfully!",{description:"Your settings have been updated and saved.",duration:3e3})}catch(e){console.error("Error saving awards settings:",e),p.oR.error("Failed to save awards badge settings",{description:e instanceof Error?e.message:"Unknown error occurred",duration:5e3})}finally{n(!1)}};return{loading:e,saving:s,settings:i,availableFonts:l,loadSettings:async()=>{a(!0);try{console.log("Loading awards settings...");let e=await fetch("".concat("","/api/v1/config/badge_settings_awards.yml")),a=await e.json();if(console.log("Loaded awards config:",a),a.config&&Object.keys(a.config).length>0){let e={...eO,...a.config,General:{...eO.General,...a.config.General},Awards:{...eO.Awards,...a.config.Awards},Text:{...eO.Text,...a.config.Text},Background:{...eO.Background,...a.config.Background},Border:{...eO.Border,...a.config.Border},Shadow:{...eO.Shadow,...a.config.Shadow},ImageBadges:{...eO.ImageBadges,...a.config.ImageBadges}};r(e),console.log("Awards settings loaded successfully")}else console.log("No existing awards config found, using defaults"),r(eO)}catch(e){console.error("Error loading awards settings:",e),p.oR.error("Failed to load awards badge settings",{description:e instanceof Error?e.message:"Unknown error occurred",duration:5e3}),r(eO)}finally{a(!1)}},loadFonts:async()=>{try{console.log("Loading available fonts..."),d(["AvenirNextLTProBold.otf","DejaVuSans.ttf","Arial","Helvetica","Times New Roman","Courier New"])}catch(e){console.error("Error loading fonts:",e),d([])}},saveSettings:c,updateSetting:(e,a,s)=>{r(n=>({...n,[e]:{...n[e],[a]:s}}))},addImageMapping:(e,a)=>{e&&a&&(r(s=>({...s,ImageBadges:{...s.ImageBadges,image_mapping:{...s.ImageBadges.image_mapping,[e]:a}}})),p.oR.success("Added image mapping: ".concat(e," → ").concat(a),{duration:2e3}))},removeImageMapping:e=>{r(a=>{let s={...a.ImageBadges.image_mapping};return delete s[e],{...a,ImageBadges:{...a.ImageBadges,image_mapping:s}}}),p.oR.info("Removed image mapping: ".concat(e),{duration:2e3})},updateImageName:(e,a)=>{e!==a&&a.trim()&&r(s=>{let n=s.ImageBadges.image_mapping[e],t={...s.ImageBadges.image_mapping};return delete t[e],t[a]=n,{...s,ImageBadges:{...s.ImageBadges,image_mapping:t}}})},updateAwardSources:e=>{r(a=>({...a,Awards:{...a.Awards,award_sources:e}}))}}}();return((0,t.useEffect)(()=>{(async()=>{await c(),await r()})()},[]),e)?(0,n.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,n.jsx)(d.A,{className:"h-8 w-8 animate-spin"}),(0,n.jsx)("span",{className:"ml-2",children:"Loading awards badge settings..."})]}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(eM.A,{className:"h-6 w-6"}),(0,n.jsx)("h2",{className:"text-2xl font-bold",children:"Awards Badge Settings"}),(0,n.jsx)(h.E,{variant:"outline",children:"Badge Configuration"})]}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),m()},className:"space-y-6",children:[(0,n.jsxs)(l.tU,{defaultValue:"general",className:"space-y-6",children:[(0,n.jsxs)(l.j7,{className:"grid w-full grid-cols-7",children:[(0,n.jsx)(l.Xi,{value:"general",children:"General"}),(0,n.jsx)(l.Xi,{value:"awards",children:"Awards"}),(0,n.jsx)(l.Xi,{value:"text",children:"Text"}),(0,n.jsx)(l.Xi,{value:"background",children:"Background"}),(0,n.jsx)(l.Xi,{value:"border",children:"Border"}),(0,n.jsx)(l.Xi,{value:"shadow",children:"Shadow"}),(0,n.jsx)(l.Xi,{value:"images",children:"Images"})]}),(0,n.jsx)(l.av,{value:"general",children:(0,n.jsx)(eG,{settings:s,updateSetting:g})}),(0,n.jsx)(l.av,{value:"awards",children:(0,n.jsx)(eX,{settings:s,updateSetting:g,updateAwardSources:b})}),(0,n.jsx)(l.av,{value:"text",children:(0,n.jsx)(e$,{settings:s,updateSetting:g,availableFonts:i})}),(0,n.jsx)(l.av,{value:"background",children:(0,n.jsx)(eU,{settings:s,updateSetting:g})}),(0,n.jsx)(l.av,{value:"border",children:(0,n.jsx)(eH,{settings:s,updateSetting:g})}),(0,n.jsx)(l.av,{value:"shadow",children:(0,n.jsx)(eY,{settings:s,updateSetting:g})}),(0,n.jsx)(l.av,{value:"images",children:(0,n.jsx)(eq,{settings:s,updateSetting:g,addImageMapping:x,removeImageMapping:j,updateImageName:v})})]}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsxs)(o.$,{type:"submit",disabled:a,children:[a?(0,n.jsx)(d.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,n.jsx)(u.A,{className:"h-4 w-4 mr-2"}),a?"Saving...":"Save Awards Settings"]})})]})]})}}],e0=[{file:"settings.yaml",key:"api",name:"API Settings"},{file:"badge_settings_audio.yml",key:"audio",name:"Audio Settings"},{file:"badge_settings_resolution.yml",key:"resolution",name:"Resolution Settings"},{file:"badge_settings_review.yml",key:"review",name:"Review Settings"},{file:"badge_settings_awards.yml",key:"awards",name:"Awards Settings"}];function e2(){return(0,n.jsx)(t.Suspense,{fallback:(0,n.jsx)(e1,{}),children:(0,n.jsx)(e4,{})})}function e1(){return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Settings"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Configure your Aphrodite system settings"})]}),(0,n.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,n.jsx)(d.A,{className:"h-8 w-8 animate-spin"})})]})}function e4(){let[e,a]=(0,t.useState)(!0),[o,m]=(0,t.useState)({api:!1,audio:!1,resolution:!1,review:!1,awards:!1}),g=(0,i.useSearchParams)(),h=(0,i.useRouter)(),[x,u]=(0,t.useState)(g.get("tab")||"api"),p=async()=>{a(!0);try{let{apiService:e}=await s.e(722).then(s.bind(s,722)),a=(await e.getConfigFiles()).config_files||[];console.log("Available config files:",a);let n=e0.map(async s=>{let{file:n,key:t,name:i}=s;try{a.includes(n)?(console.log("Checking ".concat(i,"...")),await e.getConfig(n),m(e=>({...e,[t]:!0})),console.log("✓ ".concat(i," accessible"))):(console.warn("".concat(i," not found, but that's ok")),m(e=>({...e,[t]:!0})))}catch(e){console.error("Error checking ".concat(i,":"),e),m(e=>({...e,[t]:!0}))}});await Promise.all(n),console.log("All configuration checks completed")}catch(e){console.error("Error checking configuration files:",e),m({api:!0,audio:!0,resolution:!0,review:!0,awards:!0})}finally{setTimeout(()=>{a(!1)},300)}};return((0,t.useEffect)(()=>{p()},[]),(0,t.useEffect)(()=>{let e=new URLSearchParams;"api"!==x&&e.set("tab",x);let a=e.toString()?"?".concat(e.toString()):"/settings";h.replace(a,{scroll:!1})},[x,h]),e)?(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Settings"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Configure your Aphrodite system settings"})]}),(0,n.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,n.jsxs)(r.Zp,{className:"w-full max-w-md",children:[(0,n.jsxs)(r.aR,{className:"text-center",children:[(0,n.jsx)("div",{className:"flex justify-center mb-4",children:(0,n.jsx)(d.A,{className:"h-8 w-8 animate-spin text-primary"})}),(0,n.jsx)(r.ZB,{children:"Loading settings..."}),(0,n.jsx)(r.BT,{children:"Checking configuration files"})]}),(0,n.jsx)(r.Wu,{className:"space-y-3",children:e0.map(e=>{let{name:a,key:s}=e;return(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[o[s]?(0,n.jsx)(c.A,{className:"h-4 w-4 text-green-600"}):(0,n.jsx)(d.A,{className:"h-4 w-4 animate-spin"}),(0,n.jsx)("span",{className:"text-sm",children:a})]},s)})})]})})]}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Settings"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Configure your Aphrodite system settings"})]}),(0,n.jsxs)(l.tU,{value:x,onValueChange:u,className:"w-full",children:[(0,n.jsx)(l.j7,{className:"grid w-full grid-cols-5",children:eQ.map(e=>(0,n.jsx)(l.Xi,{value:e.id,children:e.name},e.id))}),eQ.map(e=>{let a=e.component;return(0,n.jsx)(l.av,{value:e.id,children:(0,n.jsx)(r.Zp,{children:(0,n.jsx)(r.Wu,{className:"p-6",children:(0,n.jsx)(a,{})})})},e.id)})]})]})}},2523:(e,a,s)=>{"use strict";s.d(a,{p:()=>i});var n=s(5155);s(2115);var t=s(9434);function i(e){let{className:a,type:s,...i}=e;return(0,n.jsx)("input",{type:s,"data-slot":"input",className:(0,t.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...i})}},4944:(e,a,s)=>{"use strict";s.d(a,{k:()=>r});var n=s(5155);s(2115);var t=s(5863),i=s(9434);function r(e){let{className:a,value:s,...r}=e;return(0,n.jsx)(t.bL,{"data-slot":"progress",className:(0,i.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",a),...r,children:(0,n.jsx)(t.C1,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})}},5057:(e,a,s)=>{"use strict";s.d(a,{J:()=>r});var n=s(5155);s(2115);var t=s(968),i=s(9434);function r(e){let{className:a,...s}=e;return(0,n.jsx)(t.b,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...s})}},5365:(e,a,s)=>{"use strict";s.d(a,{Fc:()=>l,TN:()=>c,XL:()=>d});var n=s(5155);s(2115);var t=s(2085),i=s(9434);let r=(0,t.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function l(e){let{className:a,variant:s,...t}=e;return(0,n.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,i.cn)(r({variant:s}),a),...t})}function d(e){let{className:a,...s}=e;return(0,n.jsx)("div",{"data-slot":"alert-title",className:(0,i.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",a),...s})}function c(e){let{className:a,...s}=e;return(0,n.jsx)("div",{"data-slot":"alert-description",className:(0,i.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...s})}},6126:(e,a,s)=>{"use strict";s.d(a,{E:()=>d});var n=s(5155);s(2115);var t=s(9708),i=s(2085),r=s(9434);let l=(0,i.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:a,variant:s,asChild:i=!1,...d}=e,c=i?t.DX:"span";return(0,n.jsx)(c,{"data-slot":"badge",className:(0,r.cn)(l({variant:s}),a),...d})}},6695:(e,a,s)=>{"use strict";s.d(a,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>i,aR:()=>r});var n=s(5155);s(2115);var t=s(9434);function i(e){let{className:a,...s}=e;return(0,n.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...s})}function r(e){let{className:a,...s}=e;return(0,n.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...s})}function l(e){let{className:a,...s}=e;return(0,n.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",a),...s})}function d(e){let{className:a,...s}=e;return(0,n.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",a),...s})}function c(e){let{className:a,...s}=e;return(0,n.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",a),...s})}},7262:(e,a,s)=>{"use strict";s.d(a,{S:()=>l});var n=s(5155);s(2115);var t=s(6981),i=s(5196),r=s(9434);function l(e){let{className:a,...s}=e;return(0,n.jsx)(t.bL,{"data-slot":"checkbox",className:(0,r.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...s,children:(0,n.jsx)(t.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,n.jsx)(i.A,{className:"size-3.5"})})})}},7313:(e,a,s)=>{"use strict";s.d(a,{Xi:()=>d,av:()=>c,j7:()=>l,tU:()=>r});var n=s(5155);s(2115);var t=s(704),i=s(9434);function r(e){let{className:a,...s}=e;return(0,n.jsx)(t.bL,{"data-slot":"tabs",className:(0,i.cn)("flex flex-col gap-2",a),...s})}function l(e){let{className:a,...s}=e;return(0,n.jsx)(t.B8,{"data-slot":"tabs-list",className:(0,i.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...s})}function d(e){let{className:a,...s}=e;return(0,n.jsx)(t.l9,{"data-slot":"tabs-trigger",className:(0,i.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...s})}function c(e){let{className:a,...s}=e;return(0,n.jsx)(t.UC,{"data-slot":"tabs-content",className:(0,i.cn)("flex-1 outline-none",a),...s})}},9409:(e,a,s)=>{"use strict";s.d(a,{bq:()=>g,eb:()=>p,gC:()=>u,l6:()=>o,yv:()=>m});var n=s(5155),t=s(2115),i=s(2918),r=s(6474),l=s(7863),d=s(5196),c=s(9434);let o=i.bL;i.YJ;let m=i.WT,g=t.forwardRef((e,a)=>{let{className:s,children:t,...l}=e;return(0,n.jsxs)(i.l9,{ref:a,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...l,children:[t,(0,n.jsx)(i.In,{asChild:!0,children:(0,n.jsx)(r.A,{className:"h-4 w-4 opacity-50"})})]})});g.displayName=i.l9.displayName;let h=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,n.jsx)(i.PP,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,n.jsx)(l.A,{className:"h-4 w-4"})})});h.displayName=i.PP.displayName;let x=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,n.jsx)(i.wn,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,n.jsx)(r.A,{className:"h-4 w-4"})})});x.displayName=i.wn.displayName;let u=t.forwardRef((e,a)=>{let{className:s,children:t,position:r="popper",...l}=e;return(0,n.jsx)(i.ZL,{children:(0,n.jsxs)(i.UC,{ref:a,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...l,children:[(0,n.jsx)(h,{}),(0,n.jsx)(i.LM,{className:(0,c.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,n.jsx)(x,{})]})})});u.displayName=i.UC.displayName,t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,n.jsx)(i.JU,{ref:a,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t})}).displayName=i.JU.displayName;let p=t.forwardRef((e,a)=>{let{className:s,children:t,...r}=e;return(0,n.jsxs)(i.q7,{ref:a,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(i.VF,{children:(0,n.jsx)(d.A,{className:"h-4 w-4"})})}),(0,n.jsx)(i.p4,{children:t})]})});p.displayName=i.q7.displayName,t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,n.jsx)(i.wv,{ref:a,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",s),...t})}).displayName=i.wv.displayName},9434:(e,a,s)=>{"use strict";s.d(a,{cn:()=>i});var n=s(2596),t=s(9688);function i(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,t.QP)((0,n.$)(a))}}},e=>{var a=a=>e(e.s=a);e.O(0,[455,671,904,433,908,14,309,441,684,358],()=>a(1047)),_N_E=e.O()}]);