(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[745],{1132:(e,s,a)=>{Promise.resolve().then(a.bind(a,8418))},8418:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>$});var t=a(5155),l=a(2115),i=a(7313),c=a(285),r=a(1154),n=a(9397),d=a(2713),x=a(7924),o=a(7580),m=a(3109),h=a(722),u=a(6671),j=a(6695),p=a(6126),v=a(646),f=a(3786),g=a(4165),N=a(9409),y=a(4861),b=a(4186),_=a(1007),w=a(9074),A=a(5339),S=a(2355),C=a(3052);let R=e=>e?new Date(e).toLocaleString():"N/A",k=e=>{switch(e){case"completed":return(0,t.jsx)(v.A,{className:"h-4 w-4 text-green-600"});case"failed":return(0,t.jsx)(y.A,{className:"h-4 w-4 text-red-600"});case"running":case"processing":return(0,t.jsx)(r.A,{className:"h-4 w-4 text-blue-600 animate-spin"});default:return(0,t.jsx)(b.A,{className:"h-4 w-4 text-gray-600"})}},B=e=>{switch(e){case"completed":return"default";case"failed":return"destructive";case"running":case"processing":return"secondary";default:return"outline"}};function Z(e){let{open:s,onOpenChange:a,activityType:i,activityTypeName:n}=e,[d,x]=(0,l.useState)(!1),[o,m]=(0,l.useState)(null),[v,f]=(0,l.useState)(1),[y,Z]=(0,l.useState)("all"),[L,T]=(0,l.useState)(7),F=async()=>{if(s&&i){x(!0);try{let e={page:v,limit:20,days:L,..."all"!==y&&{status:y}},s=await h.A.getActivityTypeDetails(i,e);!1!==s.success?m(s):u.oR.error("Failed to load activity details")}catch(e){console.error("Failed to fetch activity details:",e),u.oR.error("Failed to load activity details")}finally{x(!1)}}};return(0,l.useEffect)(()=>{s&&(f(1),F())},[s,i,y,L]),(0,l.useEffect)(()=>{F()},[v]),(0,t.jsx)(g.lG,{open:s,onOpenChange:a,children:(0,t.jsxs)(g.Cf,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[(0,t.jsxs)(g.c7,{children:[(0,t.jsxs)(g.L3,{children:[n," Activities"]}),(0,t.jsxs)(g.rr,{children:["Detailed list of ",n.toLowerCase()," operations and their results"]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Status:"}),(0,t.jsxs)(N.l6,{value:y,onValueChange:Z,children:[(0,t.jsx)(N.bq,{className:"w-[120px]",children:(0,t.jsx)(N.yv,{})}),(0,t.jsxs)(N.gC,{children:[(0,t.jsx)(N.eb,{value:"all",children:"All"}),(0,t.jsx)(N.eb,{value:"completed",children:"Completed"}),(0,t.jsx)(N.eb,{value:"failed",children:"Failed"}),(0,t.jsx)(N.eb,{value:"running",children:"Running"}),(0,t.jsx)(N.eb,{value:"queued",children:"Queued"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Time Period:"}),(0,t.jsxs)(N.l6,{value:L.toString(),onValueChange:e=>T(parseInt(e)),children:[(0,t.jsx)(N.bq,{className:"w-[120px]",children:(0,t.jsx)(N.yv,{})}),(0,t.jsxs)(N.gC,{children:[(0,t.jsx)(N.eb,{value:"1",children:"Last 24h"}),(0,t.jsx)(N.eb,{value:"7",children:"Last 7 days"}),(0,t.jsx)(N.eb,{value:"30",children:"Last 30 days"}),(0,t.jsx)(N.eb,{value:"90",children:"Last 90 days"})]})]})]}),o&&(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[o.total_count," total activities found"]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:d?(0,t.jsxs)("div",{className:"flex items-center justify-center h-32",children:[(0,t.jsx)(r.A,{className:"h-6 w-6 animate-spin mr-2"}),(0,t.jsx)("span",{children:"Loading activities..."})]}):(null==o?void 0:o.activities.length)===0?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No activities found for the selected filters."}):(0,t.jsx)("div",{className:"space-y-3",children:null==o?void 0:o.activities.map(e=>(0,t.jsx)(j.Zp,{className:"p-4",children:(0,t.jsx)(j.Wu,{className:"p-0",children:(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[k(e.status),(0,t.jsx)("h4",{className:"font-medium",children:e.name}),(0,t.jsx)(p.E,{variant:B(e.status),children:e.status})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(_.A,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"User:"}),(0,t.jsx)("span",{children:e.user_id})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(w.A,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"Created:"}),(0,t.jsx)("span",{children:R(e.created_at)})]}),e.started_at&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(b.A,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"Started:"}),(0,t.jsx)("span",{children:R(e.started_at)})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 mt-3 text-sm",children:[(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Total:"})," ",(0,t.jsx)("span",{className:"font-medium",children:e.total_posters})]}),(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Completed:"})," ",(0,t.jsx)("span",{className:"font-medium text-green-600",children:e.completed_posters})]}),(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Failed:"})," ",(0,t.jsx)("span",{className:"font-medium text-red-600",children:e.failed_posters})]}),e.total_posters>0&&(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Progress:"})," ",(0,t.jsxs)("span",{className:"font-medium",children:[Math.round(e.completed_posters/e.total_posters*100),"%"]})]})]}),e.badge_types&&e.badge_types.length>0&&(0,t.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Badge Types:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:e.badge_types.map(e=>(0,t.jsx)(p.E,{variant:"outline",className:"text-xs",children:e},e))})]}),e.error_summary&&(0,t.jsxs)("div",{className:"flex items-start space-x-2 mt-2 p-2 bg-red-50 rounded",children:[(0,t.jsx)(A.A,{className:"h-4 w-4 text-red-600 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm font-medium text-red-700",children:"Error:"}),(0,t.jsx)("p",{className:"text-sm text-red-600",children:e.error_summary})]})]})]})})})},e.id))})}),o&&o.pagination.total_pages>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Page ",o.pagination.page," of ",o.pagination.total_pages]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>{(null==o?void 0:o.pagination.has_prev)&&f(v-1)},disabled:!o.pagination.has_prev,children:[(0,t.jsx)(S.A,{className:"h-4 w-4"}),"Previous"]}),(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>{(null==o?void 0:o.pagination.has_next)&&f(v+1)},disabled:!o.pagination.has_next,children:["Next",(0,t.jsx)(C.A,{className:"h-4 w-4"})]})]})]})]})})}let L=e=>e?e<1e3?"".concat(e,"ms"):e<6e4?"".concat((e/1e3).toFixed(1),"s"):"".concat((e/6e4).toFixed(1),"m"):"N/A",T=e=>e?new Date(e).toLocaleString():"N/A";function F(e){let{systemOverview:s}=e,[a,i]=(0,l.useState)(null),[r,x]=(0,l.useState)(!1),m=e=>{i(e),x(!0)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(j.ZB,{className:"text-sm font-medium",children:"Total Activities"}),(0,t.jsx)(n.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(j.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:s.summary.total_activities.toLocaleString()}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Last ",s.analysis_period.days," days"]})]})]}),(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(j.ZB,{className:"text-sm font-medium",children:"Success Rate"}),(0,t.jsx)(v.A,{className:"h-4 w-4 text-green-600"})]}),(0,t.jsxs)(j.Wu,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[s.summary.success_rate.toFixed(1),"%"]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[s.overall_statistics.totals.successful.toLocaleString()," successful"]})]})]}),(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(j.ZB,{className:"text-sm font-medium",children:"Active Users"}),(0,t.jsx)(o.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(j.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:s.summary.active_users}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Unique users with activity"})]})]}),(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(j.ZB,{className:"text-sm font-medium",children:"Batch Jobs"}),(0,t.jsx)(d.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(j.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:s.summary.active_batches}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Recent batch operations"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{children:[(0,t.jsx)(j.ZB,{children:"Activity Type Breakdown"}),(0,t.jsx)(j.BT,{children:"Distribution of activity types and their success rates"})]}),(0,t.jsx)(j.Wu,{children:(0,t.jsx)("div",{className:"space-y-2",children:s.overall_statistics.activity_type_breakdown.map(e=>(0,t.jsx)("div",{className:"group",children:(0,t.jsxs)(c.$,{variant:"ghost",className:"w-full p-3 h-auto justify-between hover:bg-muted/50",onClick:()=>m(e.activity_type),children:[(0,t.jsxs)("div",{className:"flex flex-col items-start",children:[(0,t.jsx)("span",{className:"font-medium capitalize",children:e.activity_type.replace("_"," ")}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e.total.toLocaleString()," total"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(p.E,{variant:e.success_rate>=90?"default":e.success_rate>=70?"secondary":"destructive",children:[e.success_rate.toFixed(1),"%"]}),(0,t.jsxs)("div",{className:"flex space-x-1",children:[(0,t.jsx)("span",{className:"text-xs text-green-600",children:e.successful}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"/"}),(0,t.jsx)("span",{className:"text-xs text-red-600",children:e.failed})]}),(0,t.jsx)(f.A,{className:"h-4 w-4 opacity-0 group-hover:opacity-100 transition-opacity"})]})]})},e.activity_type))})})]}),(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{children:[(0,t.jsx)(j.ZB,{children:"Recent Batch Jobs"}),(0,t.jsx)(j.BT,{children:"Latest batch operations and their status"})]}),(0,t.jsx)(j.Wu,{children:(0,t.jsx)("div",{className:"space-y-4",children:s.recent_batches.batches.slice(0,5).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("span",{className:"font-mono text-sm",children:[e.batch_job_id.substring(0,8),"..."]}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:T(e.start_time)})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(p.E,{variant:e.success_rate>=90?"default":e.success_rate>=70?"secondary":"destructive",children:[e.success_rate.toFixed(1),"%"]}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.total_activities," items"]}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:L(e.batch_duration_ms)})]})]},e.batch_job_id))})})]})]}),(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{children:[(0,t.jsx)(j.ZB,{children:"Most Active Users"}),(0,t.jsxs)(j.BT,{children:["Users with the highest activity in the last ",s.analysis_period.days," days"]})]}),(0,t.jsx)(j.Wu,{children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.top_users.users.map(e=>(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"font-medium truncate",children:e.user_id}),(0,t.jsxs)(p.E,{variant:e.success_rate>=90?"default":e.success_rate>=70?"secondary":"destructive",children:[e.success_rate.toFixed(1),"%"]})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.total_activities.toLocaleString()," activities"]}),(0,t.jsxs)("div",{className:"flex justify-between text-xs mt-1",children:[(0,t.jsxs)("span",{className:"text-green-600",children:[e.successful," successful"]}),(0,t.jsxs)("span",{className:"text-red-600",children:[e.failed," failed"]})]})]},e.user_id))})})]})]}),a&&(0,t.jsx)(Z,{open:r,onOpenChange:x,activityType:a,activityTypeName:(e=>{switch(e){case"badge_application":return"Badge Application";case"poster_replacement":return"Poster Replacement";default:return e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())}})(a)})]})}var E=a(2523);let P=e=>e?e<1e3?"".concat(e,"ms"):e<6e4?"".concat((e/1e3).toFixed(1),"s"):"".concat((e/6e4).toFixed(1),"m"):"N/A",U=e=>e?new Date(e).toLocaleString():"N/A";function W(e){var s,a,l,i,n;let{searchParams:d,setSearchParams:o,searchResults:m,searchLoading:h,suggestions:u,onSearch:f}=e;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{children:[(0,t.jsx)(j.ZB,{children:"Advanced Activity Search"}),(0,t.jsx)(j.BT,{children:"Search and filter activities with advanced criteria"})]}),(0,t.jsxs)(j.Wu,{children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:u&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Activity Types"}),(0,t.jsxs)(N.l6,{value:(null==(s=d.activity_types)?void 0:s[0])||"all",onValueChange:e=>o(s=>({...s,activity_types:"all"===e?void 0:[e]})),children:[(0,t.jsx)(N.bq,{children:(0,t.jsx)(N.yv,{placeholder:"All types"})}),(0,t.jsxs)(N.gC,{children:[(0,t.jsx)(N.eb,{value:"all",children:"All types"}),null==(a=u.activity_types)?void 0:a.map(e=>(0,t.jsx)(N.eb,{value:e,children:e.replace("_"," ")},e))]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),(0,t.jsxs)(N.l6,{value:(null==(l=d.statuses)?void 0:l[0])||"all",onValueChange:e=>o(s=>({...s,statuses:"all"===e?void 0:[e]})),children:[(0,t.jsx)(N.bq,{children:(0,t.jsx)(N.yv,{placeholder:"All statuses"})}),(0,t.jsxs)(N.gC,{children:[(0,t.jsx)(N.eb,{value:"all",children:"All statuses"}),null==(i=u.statuses)?void 0:i.map(e=>(0,t.jsx)(N.eb,{value:e,children:e},e))]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Success"}),(0,t.jsxs)(N.l6,{value:void 0!==d.success?d.success.toString():"all",onValueChange:e=>o(s=>({...s,success:"all"===e?void 0:"true"===e})),children:[(0,t.jsx)(N.bq,{children:(0,t.jsx)(N.yv,{placeholder:"All results"})}),(0,t.jsxs)(N.gC,{children:[(0,t.jsx)(N.eb,{value:"all",children:"All results"}),(0,t.jsx)(N.eb,{value:"true",children:"Successful only"}),(0,t.jsx)(N.eb,{value:"false",children:"Failed only"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"User ID"}),(0,t.jsx)(E.p,{placeholder:"Enter user ID",value:d.user_id||"",onChange:e=>o(s=>({...s,user_id:e.target.value||void 0}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Error Text"}),(0,t.jsx)(E.p,{placeholder:"Search in error messages",value:d.error_text||"",onChange:e=>o(s=>({...s,error_text:e.target.value||void 0}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Sort By"}),(0,t.jsxs)(N.l6,{value:d.sort_by||"created_at",onValueChange:e=>o(s=>({...s,sort_by:e})),children:[(0,t.jsx)(N.bq,{children:(0,t.jsx)(N.yv,{})}),(0,t.jsx)(N.gC,{children:null==(n=u.sort_options)?void 0:n.map(e=>(0,t.jsx)(N.eb,{value:e.value,children:e.label},e.value))})]})]})]})}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(c.$,{onClick:f,disabled:h,children:[h?(0,t.jsx)(r.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,t.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Search"]}),(0,t.jsx)(c.$,{variant:"outline",onClick:()=>{o({limit:50,offset:0,sort_by:"created_at",sort_order:"desc",include_details:!1})},children:"Clear Filters"})]})]})]}),m&&(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{children:[(0,t.jsx)(j.ZB,{children:"Search Results"}),(0,t.jsxs)(j.BT,{children:["Found ",m.pagination.total_count.toLocaleString()," activities (showing ",m.pagination.returned_count,")"]})]}),(0,t.jsxs)(j.Wu,{children:[(0,t.jsx)("div",{className:"space-y-2",children:m.activities.map(e=>{var s;return(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(p.E,{variant:"outline",children:null==(s=e.activity_type)?void 0:s.replace("_"," ")}),(0,t.jsx)("span",{className:"font-mono text-sm text-muted-foreground",children:e.media_id})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:[U(e.created_at)," â€¢ Duration: ",P(e.processing_duration_ms)]}),e.error_message&&(0,t.jsx)("div",{className:"text-sm text-red-600 mt-1 truncate max-w-md",children:e.error_message})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[!0===e.success&&(0,t.jsx)(v.A,{className:"h-4 w-4 text-green-600"}),!1===e.success&&(0,t.jsx)(y.A,{className:"h-4 w-4 text-red-600"}),null===e.success&&(0,t.jsx)(b.A,{className:"h-4 w-4 text-yellow-600"}),(0,t.jsx)(p.E,{variant:!0===e.success?"default":!1===e.success?"destructive":"secondary",children:e.status})]})]},e.id)})}),m.pagination.total_pages>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Page ",m.pagination.current_page," of ",m.pagination.total_pages]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(c.$,{variant:"outline",size:"sm",disabled:!m.pagination.has_prev,onClick:()=>{o(e=>({...e,offset:Math.max(0,(e.offset||0)-(e.limit||50))})),f()},children:"Previous"}),(0,t.jsx)(c.$,{variant:"outline",size:"sm",disabled:!m.pagination.has_next,onClick:()=>{o(e=>({...e,offset:(e.offset||0)+(e.limit||50)})),f()},children:"Next"})]})]})]})]})]})}function D(){return(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{children:[(0,t.jsx)(j.ZB,{children:"User Analytics"}),(0,t.jsx)(j.BT,{children:"User-specific activity patterns and performance metrics"})]}),(0,t.jsx)(j.Wu,{children:(0,t.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"User analytics features will be implemented here. This will include individual user activity summaries, timeline views, and behavioral pattern analysis."})})]})})}function q(){return(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{children:[(0,t.jsx)(j.ZB,{children:"Performance Analytics"}),(0,t.jsx)(j.BT,{children:"System performance metrics and bottleneck analysis"})]}),(0,t.jsx)(j.Wu,{children:(0,t.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"Performance analytics dashboard will be displayed here. This will include CPU usage, memory consumption, processing times, and bottleneck identification across different operation types."})})]})})}function $(){let[e,s]=(0,l.useState)(!0),[a,j]=(0,l.useState)(!1),[p,v]=(0,l.useState)(null),[f,g]=(0,l.useState)(null),[N,y]=(0,l.useState)({limit:50,offset:0,sort_by:"created_at",sort_order:"desc",include_details:!1}),[b,_]=(0,l.useState)(null),[w,A]=(0,l.useState)(!1),[S,C]=(0,l.useState)(null),[R,k]=(0,l.useState)("overview"),B=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||j(!0);try{let s=await h.A.getSystemAnalyticsOverview(7);s.success&&g(s.data);let a=await h.A.getSearchSuggestions();a.success&&C(a.suggestions),v(new Date),e||u.oR.success("Analytics data refreshed")}catch(e){console.error("Failed to refresh analytics:",e),u.oR.error("Failed to refresh analytics data")}finally{j(!1),s(!1)}},Z=async()=>{A(!0);try{let e=await h.A.advancedActivitySearch(N);e.success?_(e.data):u.oR.error("Search failed: "+e.error)}catch(e){console.error("Search failed:",e),u.oR.error("Search failed")}finally{A(!1)}};return((0,l.useEffect)(()=>{B(!0);let e=setInterval(()=>B(!0),3e5);return()=>clearInterval(e)},[]),(0,l.useEffect)(()=>{"search"!==R||b||Z()},[R]),e)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(r.A,{className:"h-5 w-5 animate-spin"}),(0,t.jsx)("span",{children:"Loading analytics..."})]})}):(0,t.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Activity Tracking Analytics"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:"Comprehensive insights into system activity, performance, and user patterns"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[p&&(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Last updated: ",p.toLocaleTimeString()]}),(0,t.jsxs)(c.$,{onClick:()=>B(),disabled:a,variant:"outline",children:[a?(0,t.jsx)(r.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,t.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),(0,t.jsxs)(i.tU,{value:R,onValueChange:k,className:"space-y-6",children:[(0,t.jsxs)(i.j7,{className:"grid w-full grid-cols-4",children:[(0,t.jsxs)(i.Xi,{value:"overview",className:"flex items-center space-x-2",children:[(0,t.jsx)(d.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Overview"})]}),(0,t.jsxs)(i.Xi,{value:"search",className:"flex items-center space-x-2",children:[(0,t.jsx)(x.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Advanced Search"})]}),(0,t.jsxs)(i.Xi,{value:"users",className:"flex items-center space-x-2",children:[(0,t.jsx)(o.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"User Analytics"})]}),(0,t.jsxs)(i.Xi,{value:"performance",className:"flex items-center space-x-2",children:[(0,t.jsx)(m.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Performance"})]})]}),(0,t.jsx)(i.av,{value:"overview",className:"space-y-6",children:f&&(0,t.jsx)(F,{systemOverview:f})}),(0,t.jsx)(i.av,{value:"search",className:"space-y-6",children:(0,t.jsx)(W,{searchParams:N,setSearchParams:y,searchResults:b,searchLoading:w,suggestions:S,onSearch:Z})}),(0,t.jsx)(i.av,{value:"users",className:"space-y-6",children:(0,t.jsx)(D,{})}),(0,t.jsx)(i.av,{value:"performance",className:"space-y-6",children:(0,t.jsx)(q,{})})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[455,671,904,433,900,382,841,441,684,358],()=>s(1132)),_N_E=e.O()}]);