(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[745],{1132:(e,s,t)=>{Promise.resolve().then(t.bind(t,7115))},7115:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>et});var a=t(5155),l=t(2115),c=t(7313),i=t(285),r=t(1154),n=t(9397),d=t(2713),x=t(7924),o=t(3109),m=t(722),h=t(6671),u=t(6695),j=t(6126),p=t(646),f=t(7580),v=t(3786),g=t(4165),N=t(9409),y=t(4861),b=t(4186),_=t(1007),w=t(9074),A=t(5339),S=t(2355),F=t(3052);let R=e=>e?new Date(e).toLocaleString():"N/A",Z=e=>{switch(e){case"completed":return(0,a.jsx)(p.A,{className:"h-4 w-4 text-green-600"});case"failed":return(0,a.jsx)(y.A,{className:"h-4 w-4 text-red-600"});case"running":case"processing":return(0,a.jsx)(r.A,{className:"h-4 w-4 text-blue-600 animate-spin"});default:return(0,a.jsx)(b.A,{className:"h-4 w-4 text-gray-600"})}},C=e=>{switch(e){case"completed":return"default";case"failed":return"destructive";case"running":case"processing":return"secondary";default:return"outline"}};function B(e){let{open:s,onOpenChange:t,activityType:c,activityTypeName:n}=e,[d,x]=(0,l.useState)(!1),[o,p]=(0,l.useState)(null),[f,v]=(0,l.useState)(1),[y,B]=(0,l.useState)("all"),[L,k]=(0,l.useState)(7),T=async()=>{if(s&&c){x(!0);try{let e={page:f,limit:20,days:L,..."all"!==y&&{status:y}},s=await m.A.getActivityTypeDetails(c,e);!1!==s.success?p(s):h.oR.error("Failed to load activity details")}catch(e){console.error("Failed to fetch activity details:",e),h.oR.error("Failed to load activity details")}finally{x(!1)}}};return(0,l.useEffect)(()=>{s&&(v(1),T())},[s,c,y,L]),(0,l.useEffect)(()=>{T()},[f]),(0,a.jsx)(g.lG,{open:s,onOpenChange:t,children:(0,a.jsxs)(g.Cf,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[(0,a.jsxs)(g.c7,{children:[(0,a.jsxs)(g.L3,{children:[n," Activities"]}),(0,a.jsxs)(g.rr,{children:["Detailed list of ",n.toLowerCase()," operations and their results"]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Status:"}),(0,a.jsxs)(N.l6,{value:y,onValueChange:B,children:[(0,a.jsx)(N.bq,{className:"w-[120px]",children:(0,a.jsx)(N.yv,{})}),(0,a.jsxs)(N.gC,{children:[(0,a.jsx)(N.eb,{value:"all",children:"All"}),(0,a.jsx)(N.eb,{value:"completed",children:"Completed"}),(0,a.jsx)(N.eb,{value:"failed",children:"Failed"}),(0,a.jsx)(N.eb,{value:"running",children:"Running"}),(0,a.jsx)(N.eb,{value:"queued",children:"Queued"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Time Period:"}),(0,a.jsxs)(N.l6,{value:L.toString(),onValueChange:e=>k(parseInt(e)),children:[(0,a.jsx)(N.bq,{className:"w-[120px]",children:(0,a.jsx)(N.yv,{})}),(0,a.jsxs)(N.gC,{children:[(0,a.jsx)(N.eb,{value:"1",children:"Last 24h"}),(0,a.jsx)(N.eb,{value:"7",children:"Last 7 days"}),(0,a.jsx)(N.eb,{value:"30",children:"Last 30 days"}),(0,a.jsx)(N.eb,{value:"90",children:"Last 90 days"})]})]})]}),o&&(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[o.total_count," total activities found"]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:d?(0,a.jsxs)("div",{className:"flex items-center justify-center h-32",children:[(0,a.jsx)(r.A,{className:"h-6 w-6 animate-spin mr-2"}),(0,a.jsx)("span",{children:"Loading activities..."})]}):(null==o?void 0:o.activities.length)===0?(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No activities found for the selected filters."}):(0,a.jsx)("div",{className:"space-y-3",children:null==o?void 0:o.activities.map(e=>(0,a.jsx)(u.Zp,{className:"p-4",children:(0,a.jsx)(u.Wu,{className:"p-0",children:(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[Z(e.status),(0,a.jsx)("h4",{className:"font-medium",children:e.name}),(0,a.jsx)(j.E,{variant:C(e.status),children:e.status})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(_.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"User:"}),(0,a.jsx)("span",{children:e.user_id})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(w.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"Created:"}),(0,a.jsx)("span",{children:R(e.created_at)})]}),e.started_at&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(b.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"Started:"}),(0,a.jsx)("span",{children:R(e.started_at)})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-3 text-sm",children:[(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Total:"})," ",(0,a.jsx)("span",{className:"font-medium",children:e.total_posters})]}),(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Completed:"})," ",(0,a.jsx)("span",{className:"font-medium text-green-600",children:e.completed_posters})]}),(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Failed:"})," ",(0,a.jsx)("span",{className:"font-medium text-red-600",children:e.failed_posters})]}),e.total_posters>0&&(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Progress:"})," ",(0,a.jsxs)("span",{className:"font-medium",children:[Math.round(e.completed_posters/e.total_posters*100),"%"]})]})]}),e.badge_types&&e.badge_types.length>0&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Badge Types:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.badge_types.map(e=>(0,a.jsx)(j.E,{variant:"outline",className:"text-xs",children:e},e))})]}),e.error_summary&&(0,a.jsxs)("div",{className:"flex items-start space-x-2 mt-2 p-2 bg-red-50 rounded",children:[(0,a.jsx)(A.A,{className:"h-4 w-4 text-red-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-red-700",children:"Error:"}),(0,a.jsx)("p",{className:"text-sm text-red-600",children:e.error_summary})]})]})]})})})},e.id))})}),o&&o.pagination.total_pages>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Page ",o.pagination.page," of ",o.pagination.total_pages]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>{(null==o?void 0:o.pagination.has_prev)&&v(f-1)},disabled:!o.pagination.has_prev,children:[(0,a.jsx)(S.A,{className:"h-4 w-4"}),"Previous"]}),(0,a.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>{(null==o?void 0:o.pagination.has_next)&&v(f+1)},disabled:!o.pagination.has_next,children:["Next",(0,a.jsx)(F.A,{className:"h-4 w-4"})]})]})]})]})})}let L=e=>e?e<1e3?"".concat(e,"ms"):e<6e4?"".concat((e/1e3).toFixed(1),"s"):"".concat((e/6e4).toFixed(1),"m"):"N/A",k=e=>e?new Date(e).toLocaleString():"N/A";function T(e){let{systemOverview:s}=e,[t,c]=(0,l.useState)(null),[r,x]=(0,l.useState)(!1),o=e=>{c(e),x(!0)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(u.ZB,{className:"text-sm font-medium",children:"Total Activities"}),(0,a.jsx)(n.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(u.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.summary.total_activities.toLocaleString()}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Last ",s.analysis_period.days," days"]})]})]}),(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(u.ZB,{className:"text-sm font-medium",children:"Success Rate"}),(0,a.jsx)(p.A,{className:"h-4 w-4 text-green-600"})]}),(0,a.jsxs)(u.Wu,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[s.summary.success_rate.toFixed(1),"%"]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[s.overall_statistics.totals.successful.toLocaleString()," successful"]})]})]}),(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(u.ZB,{className:"text-sm font-medium",children:"Active Users"}),(0,a.jsx)(f.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(u.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.summary.active_users}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Unique users with activity"})]})]}),(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(u.ZB,{className:"text-sm font-medium",children:"Batch Jobs"}),(0,a.jsx)(d.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(u.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.summary.active_batches}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Recent batch operations"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{children:[(0,a.jsx)(u.ZB,{children:"Activity Type Breakdown"}),(0,a.jsx)(u.BT,{children:"Distribution of activity types and their success rates"})]}),(0,a.jsx)(u.Wu,{children:(0,a.jsx)("div",{className:"space-y-2",children:s.overall_statistics.activity_type_breakdown.map(e=>(0,a.jsx)("div",{className:"group",children:(0,a.jsxs)(i.$,{variant:"ghost",className:"w-full p-3 h-auto justify-between hover:bg-muted/50",onClick:()=>o(e.activity_type),children:[(0,a.jsxs)("div",{className:"flex flex-col items-start",children:[(0,a.jsx)("span",{className:"font-medium capitalize",children:e.activity_type.replace("_"," ")}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e.total.toLocaleString()," total"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(j.E,{variant:e.success_rate>=90?"default":e.success_rate>=70?"secondary":"destructive",children:[e.success_rate.toFixed(1),"%"]}),(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)("span",{className:"text-xs text-green-600",children:e.successful}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"/"}),(0,a.jsx)("span",{className:"text-xs text-red-600",children:e.failed})]}),(0,a.jsx)(v.A,{className:"h-4 w-4 opacity-0 group-hover:opacity-100 transition-opacity"})]})]})},e.activity_type))})})]}),(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{children:[(0,a.jsx)(u.ZB,{children:"Recent Batch Jobs"}),(0,a.jsx)(u.BT,{children:"Latest batch operations and their status"})]}),(0,a.jsx)(u.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:s.recent_batches.batches.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("span",{className:"font-mono text-sm",children:[e.batch_job_id.substring(0,8),"..."]}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:k(e.start_time)})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(j.E,{variant:e.success_rate>=90?"default":e.success_rate>=70?"secondary":"destructive",children:[e.success_rate.toFixed(1),"%"]}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.total_activities," items"]}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:L(e.batch_duration_ms)})]})]},e.batch_job_id))})})]})]}),(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{children:[(0,a.jsx)(u.ZB,{children:"Most Active Users"}),(0,a.jsxs)(u.BT,{children:["Users with the highest activity in the last ",s.analysis_period.days," days"]})]}),(0,a.jsx)(u.Wu,{children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.top_users.users.map(e=>(0,a.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"font-medium truncate",children:e.user_id}),(0,a.jsxs)(j.E,{variant:e.success_rate>=90?"default":e.success_rate>=70?"secondary":"destructive",children:[e.success_rate.toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.total_activities.toLocaleString()," activities"]}),(0,a.jsxs)("div",{className:"flex justify-between text-xs mt-1",children:[(0,a.jsxs)("span",{className:"text-green-600",children:[e.successful," successful"]}),(0,a.jsxs)("span",{className:"text-red-600",children:[e.failed," failed"]})]})]},e.user_id))})})]})]}),t&&(0,a.jsx)(B,{open:r,onOpenChange:x,activityType:t,activityTypeName:(e=>{switch(e){case"badge_application":return"Badge Application";case"poster_replacement":return"Poster Replacement";default:return e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())}})(t)})]})}var P=t(2523);let E=e=>e?e<1e3?"".concat(e,"ms"):e<6e4?"".concat((e/1e3).toFixed(1),"s"):"".concat((e/6e4).toFixed(1),"m"):"N/A",D=e=>e?new Date(e).toLocaleString():"N/A";function W(e){var s,t,l,c,n;let{searchParams:d,setSearchParams:o,searchResults:m,searchLoading:h,suggestions:f,onSearch:v}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{children:[(0,a.jsx)(u.ZB,{children:"Advanced Activity Search"}),(0,a.jsx)(u.BT,{children:"Search and filter activities with advanced criteria"})]}),(0,a.jsxs)(u.Wu,{children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:f&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Activity Types"}),(0,a.jsxs)(N.l6,{value:(null==(s=d.activity_types)?void 0:s[0])||"all",onValueChange:e=>o(s=>({...s,activity_types:"all"===e?void 0:[e]})),children:[(0,a.jsx)(N.bq,{children:(0,a.jsx)(N.yv,{placeholder:"All types"})}),(0,a.jsxs)(N.gC,{children:[(0,a.jsx)(N.eb,{value:"all",children:"All types"}),null==(t=f.activity_types)?void 0:t.map(e=>(0,a.jsx)(N.eb,{value:e,children:e.replace("_"," ")},e))]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),(0,a.jsxs)(N.l6,{value:(null==(l=d.statuses)?void 0:l[0])||"all",onValueChange:e=>o(s=>({...s,statuses:"all"===e?void 0:[e]})),children:[(0,a.jsx)(N.bq,{children:(0,a.jsx)(N.yv,{placeholder:"All statuses"})}),(0,a.jsxs)(N.gC,{children:[(0,a.jsx)(N.eb,{value:"all",children:"All statuses"}),null==(c=f.statuses)?void 0:c.map(e=>(0,a.jsx)(N.eb,{value:e,children:e},e))]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Success"}),(0,a.jsxs)(N.l6,{value:void 0!==d.success?d.success.toString():"all",onValueChange:e=>o(s=>({...s,success:"all"===e?void 0:"true"===e})),children:[(0,a.jsx)(N.bq,{children:(0,a.jsx)(N.yv,{placeholder:"All results"})}),(0,a.jsxs)(N.gC,{children:[(0,a.jsx)(N.eb,{value:"all",children:"All results"}),(0,a.jsx)(N.eb,{value:"true",children:"Successful only"}),(0,a.jsx)(N.eb,{value:"false",children:"Failed only"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"User ID"}),(0,a.jsx)(P.p,{placeholder:"Enter user ID",value:d.user_id||"",onChange:e=>o(s=>({...s,user_id:e.target.value||void 0}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Error Text"}),(0,a.jsx)(P.p,{placeholder:"Search in error messages",value:d.error_text||"",onChange:e=>o(s=>({...s,error_text:e.target.value||void 0}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Sort By"}),(0,a.jsxs)(N.l6,{value:d.sort_by||"created_at",onValueChange:e=>o(s=>({...s,sort_by:e})),children:[(0,a.jsx)(N.bq,{children:(0,a.jsx)(N.yv,{})}),(0,a.jsx)(N.gC,{children:null==(n=f.sort_options)?void 0:n.map(e=>(0,a.jsx)(N.eb,{value:e.value,children:e.label},e.value))})]})]})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(i.$,{onClick:v,disabled:h,children:[h?(0,a.jsx)(r.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Search"]}),(0,a.jsx)(i.$,{variant:"outline",onClick:()=>{o({limit:50,offset:0,sort_by:"created_at",sort_order:"desc",include_details:!1})},children:"Clear Filters"})]})]})]}),m&&(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{children:[(0,a.jsx)(u.ZB,{children:"Search Results"}),(0,a.jsxs)(u.BT,{children:["Found ",m.pagination.total_count.toLocaleString()," activities (showing ",m.pagination.returned_count,")"]})]}),(0,a.jsxs)(u.Wu,{children:[(0,a.jsx)("div",{className:"space-y-2",children:m.activities.map(e=>{var s;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(j.E,{variant:"outline",children:null==(s=e.activity_type)?void 0:s.replace("_"," ")}),(0,a.jsx)("span",{className:"font-mono text-sm text-muted-foreground",children:e.media_id})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:[D(e.created_at)," • Duration: ",E(e.processing_duration_ms)]}),e.error_message&&(0,a.jsx)("div",{className:"text-sm text-red-600 mt-1 truncate max-w-md",children:e.error_message})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[!0===e.success&&(0,a.jsx)(p.A,{className:"h-4 w-4 text-green-600"}),!1===e.success&&(0,a.jsx)(y.A,{className:"h-4 w-4 text-red-600"}),null===e.success&&(0,a.jsx)(b.A,{className:"h-4 w-4 text-yellow-600"}),(0,a.jsx)(j.E,{variant:!0===e.success?"default":!1===e.success?"destructive":"secondary",children:e.status})]})]},e.id)})}),m.pagination.total_pages>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Page ",m.pagination.current_page," of ",m.pagination.total_pages]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(i.$,{variant:"outline",size:"sm",disabled:!m.pagination.has_prev,onClick:()=>{o(e=>({...e,offset:Math.max(0,(e.offset||0)-(e.limit||50))})),v()},children:"Previous"}),(0,a.jsx)(i.$,{variant:"outline",size:"sm",disabled:!m.pagination.has_next,onClick:()=>{o(e=>({...e,offset:(e.offset||0)+(e.limit||50)})),v()},children:"Next"})]})]})]})]})]})}var U=t(3904),$=t(6561),q=t(6785),V=t(1539),I=t(8611);let J=e=>e?e<60?"".concat(e.toFixed(1),"s"):e<3600?"".concat((e/60).toFixed(1),"m"):"".concat((e/3600).toFixed(1),"h"):"N/A";function M(e){let{metrics:s}=e;return s?(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(u.ZB,{className:"text-sm font-medium",children:"Average Duration"}),(0,a.jsx)($.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(u.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:J(s.avg_job_duration_seconds)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Per job completion"})]})]}),(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(u.ZB,{className:"text-sm font-medium",children:"Success Rate"}),(0,a.jsx)(q.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(u.Wu,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[s.success_rate_percentage.toFixed(1),"%"]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[s.total_jobs_processed," jobs processed"]})]})]}),(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(u.ZB,{className:"text-sm font-medium",children:"Throughput"}),(0,a.jsx)(V.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(u.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.average_throughput_posters_per_job.toFixed(1)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Posters per job"})]})]}),(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(u.ZB,{className:"text-sm font-medium",children:"Processing Rate"}),(0,a.jsx)(I.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(u.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.jobs_per_hour_24h.toFixed(1)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Jobs per hour (24h)"})]})]})]}):(0,a.jsxs)(u.Zp,{children:[(0,a.jsx)(u.aR,{children:(0,a.jsx)(u.ZB,{children:"Performance Metrics"})}),(0,a.jsx)(u.Wu,{children:(0,a.jsxs)("div",{className:"text-center text-muted-foreground py-8",children:[(0,a.jsx)(n.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"No performance data available"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Metrics will appear once jobs start processing."})]})})]})}var O=t(8500);let z=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}),X=e=>e>=5?"text-red-600":e>=2?"text-yellow-600":"text-green-600",H=e=>e>=95?"default":e>=80?"secondary":"destructive";function G(e){let{metrics:s}=e;if(!s||0===s.system_load_trends.length)return(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{children:[(0,a.jsx)(u.ZB,{children:"System Load Trends"}),(0,a.jsx)(u.BT,{children:"Daily processing load over the last 7 days"})]}),(0,a.jsx)(u.Wu,{children:(0,a.jsxs)("div",{className:"text-center text-muted-foreground py-8",children:[(0,a.jsx)(w.A,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{className:"text-sm",children:"No trend data available"})]})})]});let t=s.system_load_trends,l=t.length>=2?t[t.length-1].load_score-t[t.length-2].load_score:0;return(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{children:[(0,a.jsxs)(u.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{children:"System Load Trends"}),l>0?(0,a.jsx)(o.A,{className:"h-4 w-4 text-red-500"}):l<0?(0,a.jsx)(O.A,{className:"h-4 w-4 text-green-500"}):null]}),(0,a.jsx)(u.BT,{children:"Daily processing load and success rates over the last 7 days"})]}),(0,a.jsxs)(u.Wu,{children:[(0,a.jsx)("div",{className:"space-y-3",children:t.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"font-medium",children:z(e.date)}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.total_jobs," jobs • ",e.total_posters," posters"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)(j.E,{variant:H(e.success_rate),children:[e.success_rate.toFixed(1),"%"]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-sm font-medium ".concat(X(e.load_score)),children:["Load: ",e.load_score.toFixed(1)]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:s===t.length-1?"Latest":s===t.length-2?"Previous":""})]})]})]},e.date))}),t.length>0&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-muted rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"7-day Summary:"}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("span",{children:["Avg Load: ",(t.reduce((e,s)=>e+s.load_score,0)/t.length).toFixed(1)]}),(0,a.jsxs)("span",{children:["Avg Success: ",(t.reduce((e,s)=>e+s.success_rate,0)/t.length).toFixed(1),"%"]})]})]})})]})]})}let Q=e=>e?e<60?"".concat(e.toFixed(1),"s"):e<3600?"".concat((e/60).toFixed(1),"m"):"".concat((e/3600).toFixed(1),"h"):"N/A",K=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),Y=e=>e>=2?"default":e>=1?"secondary":"outline";function ee(e){let{metrics:s}=e;return s?(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{children:[(0,a.jsx)(u.ZB,{children:"Processing Efficiency"}),(0,a.jsx)(u.BT,{children:"Job duration analysis and performance variance"})]}),(0,a.jsx)(u.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Fastest Job"}),(0,a.jsx)("span",{className:"text-sm text-green-600",children:Q(s.processing_efficiency.fastest_job_duration)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Slowest Job"}),(0,a.jsx)("span",{className:"text-sm text-red-600",children:Q(s.processing_efficiency.slowest_job_duration)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Median Duration"}),(0,a.jsx)("span",{className:"text-sm",children:Q(s.processing_efficiency.median_duration)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Performance Variance"}),(0,a.jsx)("span",{className:"text-sm",children:Q(s.processing_efficiency.efficiency_variance)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"High Throughput Jobs"}),(0,a.jsx)(j.E,{variant:"secondary",children:s.processing_efficiency.high_throughput_jobs})]})]})})]}),(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{children:[(0,a.jsx)(u.ZB,{children:"Peak Processing Times"}),(0,a.jsx)(u.BT,{children:"Hours with highest processing activity"})]}),(0,a.jsxs)(u.Wu,{children:[(0,a.jsx)("div",{className:"space-y-3",children:0===s.peak_processing_times.length?(0,a.jsxs)("div",{className:"text-center text-muted-foreground py-4",children:[(0,a.jsx)(b.A,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{className:"text-sm",children:"No peak times data available"})]}):s.peak_processing_times.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"font-medium",children:K(e.hour)}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.jobs_count," jobs • ",e.total_posters," posters"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(j.E,{variant:Y(e.efficiency_score),children:[(0,a.jsx)(V.A,{className:"h-3 w-3 mr-1"}),e.efficiency_score.toFixed(1)]}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:Q(e.avg_duration_seconds)})]})]},s))}),s.peak_processing_times.length>0&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-muted rounded-lg",children:(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,a.jsx)("strong",{children:"Peak Performance:"})," Efficiency score measures posters processed per second"]})})]})]})]}):null}function es(){let[e,s]=(0,l.useState)(!0),[t,c]=(0,l.useState)(!1),[n,d]=(0,l.useState)(null),[x,o]=(0,l.useState)(null),u=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||c(!0);try{let s=await m.A.getPerformanceMetrics();s&&(d(s),o(new Date),e||h.oR.success("Performance metrics updated"))}catch(e){console.error("Failed to fetch performance metrics:",e),h.oR.error("Failed to load performance metrics")}finally{c(!1),s(!1)}};return((0,l.useEffect)(()=>{u(!0);let e=setInterval(()=>u(!0),12e4);return()=>clearInterval(e)},[]),e)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(r.A,{className:"h-5 w-5 animate-spin"}),(0,a.jsx)("span",{children:"Loading performance metrics..."})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Performance Analytics"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"System performance metrics and processing efficiency analysis"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[x&&(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Last updated: ",x.toLocaleTimeString()]}),(0,a.jsxs)(i.$,{onClick:()=>u(),disabled:t,variant:"outline",size:"sm",children:[t?(0,a.jsx)(r.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,a.jsx)(U.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),(0,a.jsx)(M,{metrics:n}),(0,a.jsx)(G,{metrics:n}),(0,a.jsx)(ee,{metrics:n})]})}function et(){let[e,s]=(0,l.useState)(!0),[t,u]=(0,l.useState)(!1),[j,p]=(0,l.useState)(null),[f,v]=(0,l.useState)(null),[g,N]=(0,l.useState)({limit:50,offset:0,sort_by:"created_at",sort_order:"desc",include_details:!1}),[y,b]=(0,l.useState)(null),[_,w]=(0,l.useState)(!1),[A,S]=(0,l.useState)(null),[F,R]=(0,l.useState)("overview"),Z=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||u(!0);try{let s=await m.A.getSystemAnalyticsOverview(7);s.success&&v(s.data);let t=await m.A.getSearchSuggestions();t.success&&S(t.suggestions),p(new Date),e||h.oR.success("Analytics data refreshed")}catch(e){console.error("Failed to refresh analytics:",e),h.oR.error("Failed to refresh analytics data")}finally{u(!1),s(!1)}},C=async()=>{w(!0);try{let e=await m.A.advancedActivitySearch(g);e.success?b(e.data):h.oR.error("Search failed: "+e.error)}catch(e){console.error("Search failed:",e),h.oR.error("Search failed")}finally{w(!1)}};return((0,l.useEffect)(()=>{Z(!0);let e=setInterval(()=>Z(!0),3e5);return()=>clearInterval(e)},[]),(0,l.useEffect)(()=>{"search"!==F||y||C()},[F]),e)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(r.A,{className:"h-5 w-5 animate-spin"}),(0,a.jsx)("span",{children:"Loading analytics..."})]})}):(0,a.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Activity Tracking Analytics"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"Comprehensive insights into system activity, performance, and user patterns"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[j&&(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Last updated: ",j.toLocaleTimeString()]}),(0,a.jsxs)(i.$,{onClick:()=>Z(),disabled:t,variant:"outline",children:[t?(0,a.jsx)(r.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,a.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),(0,a.jsxs)(c.tU,{value:F,onValueChange:R,className:"space-y-6",children:[(0,a.jsxs)(c.j7,{className:"grid w-full grid-cols-3",children:[(0,a.jsxs)(c.Xi,{value:"overview",className:"flex items-center space-x-2",children:[(0,a.jsx)(d.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Overview"})]}),(0,a.jsxs)(c.Xi,{value:"search",className:"flex items-center space-x-2",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Advanced Search"})]}),(0,a.jsxs)(c.Xi,{value:"performance",className:"flex items-center space-x-2",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Performance"})]})]}),(0,a.jsx)(c.av,{value:"overview",className:"space-y-6",children:f&&(0,a.jsx)(T,{systemOverview:f})}),(0,a.jsx)(c.av,{value:"search",className:"space-y-6",children:(0,a.jsx)(W,{searchParams:g,setSearchParams:N,searchResults:y,searchLoading:_,suggestions:A,onSearch:C})}),(0,a.jsx)(c.av,{value:"performance",className:"space-y-6",children:(0,a.jsx)(es,{})})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[455,671,904,433,900,290,841,441,684,358],()=>s(1132)),_N_E=e.O()}]);