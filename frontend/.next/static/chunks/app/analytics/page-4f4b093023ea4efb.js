(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[745],{1132:(e,s,a)=>{Promise.resolve().then(a.bind(a,2774))},2774:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>C});var t=a(5155),c=a(2115),i=a(7313),l=a(285),r=a(1154),n=a(9397),d=a(2713),x=a(7924),o=a(7580),m=a(3109),h=a(722),u=a(6671),j=a(6695),v=a(6126),f=a(646);let p=e=>e?e<1e3?"".concat(e,"ms"):e<6e4?"".concat((e/1e3).toFixed(1),"s"):"".concat((e/6e4).toFixed(1),"m"):"N/A",y=e=>e?new Date(e).toLocaleString():"N/A";function N(e){let{systemOverview:s}=e;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(j.ZB,{className:"text-sm font-medium",children:"Total Activities"}),(0,t.jsx)(n.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(j.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:s.summary.total_activities.toLocaleString()}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Last ",s.analysis_period.days," days"]})]})]}),(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(j.ZB,{className:"text-sm font-medium",children:"Success Rate"}),(0,t.jsx)(f.A,{className:"h-4 w-4 text-green-600"})]}),(0,t.jsxs)(j.Wu,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[s.summary.success_rate.toFixed(1),"%"]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[s.overall_statistics.totals.successful.toLocaleString()," successful"]})]})]}),(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(j.ZB,{className:"text-sm font-medium",children:"Active Users"}),(0,t.jsx)(o.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(j.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:s.summary.active_users}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Unique users with activity"})]})]}),(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(j.ZB,{className:"text-sm font-medium",children:"Batch Jobs"}),(0,t.jsx)(d.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(j.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:s.summary.active_batches}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Recent batch operations"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{children:[(0,t.jsx)(j.ZB,{children:"Activity Type Breakdown"}),(0,t.jsx)(j.BT,{children:"Distribution of activity types and their success rates"})]}),(0,t.jsx)(j.Wu,{children:(0,t.jsx)("div",{className:"space-y-4",children:s.overall_statistics.activity_type_breakdown.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-medium capitalize",children:e.activity_type.replace("_"," ")}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e.total.toLocaleString()," total"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(v.E,{variant:e.success_rate>=90?"default":e.success_rate>=70?"secondary":"destructive",children:[e.success_rate.toFixed(1),"%"]}),(0,t.jsxs)("div",{className:"flex space-x-1",children:[(0,t.jsx)("span",{className:"text-xs text-green-600",children:e.successful}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"/"}),(0,t.jsx)("span",{className:"text-xs text-red-600",children:e.failed})]})]})]},e.activity_type))})})]}),(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{children:[(0,t.jsx)(j.ZB,{children:"Recent Batch Jobs"}),(0,t.jsx)(j.BT,{children:"Latest batch operations and their status"})]}),(0,t.jsx)(j.Wu,{children:(0,t.jsx)("div",{className:"space-y-4",children:s.recent_batches.batches.slice(0,5).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("span",{className:"font-mono text-sm",children:[e.batch_job_id.substring(0,8),"..."]}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:y(e.start_time)})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(v.E,{variant:e.success_rate>=90?"default":e.success_rate>=70?"secondary":"destructive",children:[e.success_rate.toFixed(1),"%"]}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.total_activities," items"]}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:p(e.batch_duration_ms)})]})]},e.batch_job_id))})})]})]}),(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{children:[(0,t.jsx)(j.ZB,{children:"Most Active Users"}),(0,t.jsxs)(j.BT,{children:["Users with the highest activity in the last ",s.analysis_period.days," days"]})]}),(0,t.jsx)(j.Wu,{children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.top_users.users.map(e=>(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"font-medium truncate",children:e.user_id}),(0,t.jsxs)(v.E,{variant:e.success_rate>=90?"default":e.success_rate>=70?"secondary":"destructive",children:[e.success_rate.toFixed(1),"%"]})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.total_activities.toLocaleString()," activities"]}),(0,t.jsxs)("div",{className:"flex justify-between text-xs mt-1",children:[(0,t.jsxs)("span",{className:"text-green-600",children:[e.successful," successful"]}),(0,t.jsxs)("span",{className:"text-red-600",children:[e.failed," failed"]})]})]},e.user_id))})})]})]})}var g=a(2523),b=a(9409),_=a(4861),w=a(4186);let A=e=>e?e<1e3?"".concat(e,"ms"):e<6e4?"".concat((e/1e3).toFixed(1),"s"):"".concat((e/6e4).toFixed(1),"m"):"N/A",S=e=>e?new Date(e).toLocaleString():"N/A";function B(e){var s,a,c,i,n;let{searchParams:d,setSearchParams:o,searchResults:m,searchLoading:h,suggestions:u,onSearch:p}=e;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{children:[(0,t.jsx)(j.ZB,{children:"Advanced Activity Search"}),(0,t.jsx)(j.BT,{children:"Search and filter activities with advanced criteria"})]}),(0,t.jsxs)(j.Wu,{children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:u&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Activity Types"}),(0,t.jsxs)(b.l6,{value:(null==(s=d.activity_types)?void 0:s[0])||"",onValueChange:e=>o(s=>({...s,activity_types:e?[e]:void 0})),children:[(0,t.jsx)(b.bq,{children:(0,t.jsx)(b.yv,{placeholder:"All types"})}),(0,t.jsxs)(b.gC,{children:[(0,t.jsx)(b.eb,{value:"",children:"All types"}),null==(a=u.activity_types)?void 0:a.map(e=>(0,t.jsx)(b.eb,{value:e,children:e.replace("_"," ")},e))]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),(0,t.jsxs)(b.l6,{value:(null==(c=d.statuses)?void 0:c[0])||"",onValueChange:e=>o(s=>({...s,statuses:e?[e]:void 0})),children:[(0,t.jsx)(b.bq,{children:(0,t.jsx)(b.yv,{placeholder:"All statuses"})}),(0,t.jsxs)(b.gC,{children:[(0,t.jsx)(b.eb,{value:"",children:"All statuses"}),null==(i=u.statuses)?void 0:i.map(e=>(0,t.jsx)(b.eb,{value:e,children:e},e))]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Success"}),(0,t.jsxs)(b.l6,{value:void 0!==d.success?d.success.toString():"",onValueChange:e=>o(s=>({...s,success:""===e?void 0:"true"===e})),children:[(0,t.jsx)(b.bq,{children:(0,t.jsx)(b.yv,{placeholder:"All results"})}),(0,t.jsxs)(b.gC,{children:[(0,t.jsx)(b.eb,{value:"",children:"All results"}),(0,t.jsx)(b.eb,{value:"true",children:"Successful only"}),(0,t.jsx)(b.eb,{value:"false",children:"Failed only"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"User ID"}),(0,t.jsx)(g.p,{placeholder:"Enter user ID",value:d.user_id||"",onChange:e=>o(s=>({...s,user_id:e.target.value||void 0}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Error Text"}),(0,t.jsx)(g.p,{placeholder:"Search in error messages",value:d.error_text||"",onChange:e=>o(s=>({...s,error_text:e.target.value||void 0}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Sort By"}),(0,t.jsxs)(b.l6,{value:d.sort_by||"created_at",onValueChange:e=>o(s=>({...s,sort_by:e})),children:[(0,t.jsx)(b.bq,{children:(0,t.jsx)(b.yv,{})}),(0,t.jsx)(b.gC,{children:null==(n=u.sort_options)?void 0:n.map(e=>(0,t.jsx)(b.eb,{value:e.value,children:e.label},e.value))})]})]})]})}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(l.$,{onClick:p,disabled:h,children:[h?(0,t.jsx)(r.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,t.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Search"]}),(0,t.jsx)(l.$,{variant:"outline",onClick:()=>{o({limit:50,offset:0,sort_by:"created_at",sort_order:"desc",include_details:!1})},children:"Clear Filters"})]})]})]}),m&&(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{children:[(0,t.jsx)(j.ZB,{children:"Search Results"}),(0,t.jsxs)(j.BT,{children:["Found ",m.pagination.total_count.toLocaleString()," activities (showing ",m.pagination.returned_count,")"]})]}),(0,t.jsxs)(j.Wu,{children:[(0,t.jsx)("div",{className:"space-y-2",children:m.activities.map(e=>{var s;return(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(v.E,{variant:"outline",children:null==(s=e.activity_type)?void 0:s.replace("_"," ")}),(0,t.jsx)("span",{className:"font-mono text-sm text-muted-foreground",children:e.media_id})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:[S(e.created_at)," â€¢ Duration: ",A(e.processing_duration_ms)]}),e.error_message&&(0,t.jsx)("div",{className:"text-sm text-red-600 mt-1 truncate max-w-md",children:e.error_message})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[!0===e.success&&(0,t.jsx)(f.A,{className:"h-4 w-4 text-green-600"}),!1===e.success&&(0,t.jsx)(_.A,{className:"h-4 w-4 text-red-600"}),null===e.success&&(0,t.jsx)(w.A,{className:"h-4 w-4 text-yellow-600"}),(0,t.jsx)(v.E,{variant:!0===e.success?"default":!1===e.success?"destructive":"secondary",children:e.status})]})]},e.id)})}),m.pagination.total_pages>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Page ",m.pagination.current_page," of ",m.pagination.total_pages]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(l.$,{variant:"outline",size:"sm",disabled:!m.pagination.has_prev,onClick:()=>{o(e=>({...e,offset:Math.max(0,(e.offset||0)-(e.limit||50))})),p()},children:"Previous"}),(0,t.jsx)(l.$,{variant:"outline",size:"sm",disabled:!m.pagination.has_next,onClick:()=>{o(e=>({...e,offset:(e.offset||0)+(e.limit||50)})),p()},children:"Next"})]})]})]})]})]})}function Z(){return(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{children:[(0,t.jsx)(j.ZB,{children:"User Analytics"}),(0,t.jsx)(j.BT,{children:"User-specific activity patterns and performance metrics"})]}),(0,t.jsx)(j.Wu,{children:(0,t.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"User analytics features will be implemented here. This will include individual user activity summaries, timeline views, and behavioral pattern analysis."})})]})})}function k(){return(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{children:[(0,t.jsx)(j.ZB,{children:"Performance Analytics"}),(0,t.jsx)(j.BT,{children:"System performance metrics and bottleneck analysis"})]}),(0,t.jsx)(j.Wu,{children:(0,t.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"Performance analytics dashboard will be displayed here. This will include CPU usage, memory consumption, processing times, and bottleneck identification across different operation types."})})]})})}function C(){let[e,s]=(0,c.useState)(!0),[a,j]=(0,c.useState)(!1),[v,f]=(0,c.useState)(null),[p,y]=(0,c.useState)(null),[g,b]=(0,c.useState)({limit:50,offset:0,sort_by:"created_at",sort_order:"desc",include_details:!1}),[_,w]=(0,c.useState)(null),[A,S]=(0,c.useState)(!1),[C,R]=(0,c.useState)(null),[T,F]=(0,c.useState)("overview"),L=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||j(!0);try{let s=await h.A.getSystemAnalyticsOverview(7);s.success&&y(s.data);let a=await h.A.getSearchSuggestions();a.success&&R(a.suggestions),f(new Date),e||u.oR.success("Analytics data refreshed")}catch(e){console.error("Failed to refresh analytics:",e),u.oR.error("Failed to refresh analytics data")}finally{j(!1),s(!1)}},E=async()=>{S(!0);try{let e=await h.A.advancedActivitySearch(g);e.success?w(e.data):u.oR.error("Search failed: "+e.error)}catch(e){console.error("Search failed:",e),u.oR.error("Search failed")}finally{S(!1)}};return((0,c.useEffect)(()=>{L(!0);let e=setInterval(()=>L(!0),3e5);return()=>clearInterval(e)},[]),(0,c.useEffect)(()=>{"search"!==T||_||E()},[T]),e)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(r.A,{className:"h-5 w-5 animate-spin"}),(0,t.jsx)("span",{children:"Loading analytics..."})]})}):(0,t.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Activity Tracking Analytics"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:"Comprehensive insights into system activity, performance, and user patterns"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[v&&(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Last updated: ",v.toLocaleTimeString()]}),(0,t.jsxs)(l.$,{onClick:()=>L(),disabled:a,variant:"outline",children:[a?(0,t.jsx)(r.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,t.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),(0,t.jsxs)(i.tU,{value:T,onValueChange:F,className:"space-y-6",children:[(0,t.jsxs)(i.j7,{className:"grid w-full grid-cols-4",children:[(0,t.jsxs)(i.Xi,{value:"overview",className:"flex items-center space-x-2",children:[(0,t.jsx)(d.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Overview"})]}),(0,t.jsxs)(i.Xi,{value:"search",className:"flex items-center space-x-2",children:[(0,t.jsx)(x.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Advanced Search"})]}),(0,t.jsxs)(i.Xi,{value:"users",className:"flex items-center space-x-2",children:[(0,t.jsx)(o.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"User Analytics"})]}),(0,t.jsxs)(i.Xi,{value:"performance",className:"flex items-center space-x-2",children:[(0,t.jsx)(m.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Performance"})]})]}),(0,t.jsx)(i.av,{value:"overview",className:"space-y-6",children:p&&(0,t.jsx)(N,{systemOverview:p})}),(0,t.jsx)(i.av,{value:"search",className:"space-y-6",children:(0,t.jsx)(B,{searchParams:g,setSearchParams:b,searchResults:_,searchLoading:A,suggestions:C,onSearch:E})}),(0,t.jsx)(i.av,{value:"users",className:"space-y-6",children:(0,t.jsx)(Z,{})}),(0,t.jsx)(i.av,{value:"performance",className:"space-y-6",children:(0,t.jsx)(k,{})})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[455,671,904,433,438,299,269,441,684,358],()=>s(1132)),_N_E=e.O()}]);