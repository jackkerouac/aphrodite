(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[547],{333:(e,s,a)=>{"use strict";a.d(s,{d:()=>l});var t=a(5155);a(2115);var c=a(4884),n=a(9434);function l(e){let{className:s,...a}=e;return(0,t.jsx)(c.bL,{"data-slot":"switch",className:(0,n.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:(0,t.jsx)(c.zi,{"data-slot":"switch-thumb",className:(0,n.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}},722:(e,s,a)=>{"use strict";a.d(s,{Ay:()=>i,Kp:()=>l});let t="http://localhost:8000";class c extends Error{constructor(e,s,a){super(e),this.status=s,this.response=a,this.name="ApiError"}}async function n(e){if(!e.ok){let s="HTTP ".concat(e.status,": ").concat(e.statusText);try{let a=await e.json();s=a.error||a.message||s}catch(e){}throw new c(s,e.status)}try{return await e.json()}catch(e){return{}}}let l={getConfig:async e=>n(await fetch("".concat(t,"/api/v1/config/").concat(e))),updateConfig:async(e,s)=>n(await fetch("".concat(t,"/api/v1/config/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})),getConfigFiles:async()=>n(await fetch("".concat(t,"/api/v1/config/files"))),testJellyfinConnection:async e=>n(await fetch("".concat(t,"/api/v1/config/test-jellyfin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),testConnection:async(e,s)=>n(await fetch("".concat(t,"/api/v1/config/test-").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})),getSystemStatus:async()=>n(await fetch("".concat(t,"/health/detailed"))),getSystemConfig:async()=>n(await fetch("".concat(t,"/api/v1/config/system"))),getPreviewBadgeTypes:async()=>n(await fetch("".concat(t,"/api/v1/preview/badge-types"))),generatePreview:async e=>n(await fetch("".concat(t,"/api/v1/preview/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),getPreviewLibraries:async()=>n(await fetch("".concat(t,"/api/v1/preview/libraries"))),async getPreviewMedia(e){let s=new URLSearchParams;(null==e?void 0:e.library_id)&&s.set("library_id",e.library_id),(null==e?void 0:e.search)&&s.set("search",e.search),(null==e?void 0:e.page)&&s.set("page",e.page.toString()),(null==e?void 0:e.limit)&&s.set("limit",e.limit.toString());let a="".concat(t,"/api/v1/preview/media").concat(s.toString()?"?"+s.toString():"");return n(await fetch(a))},async getMedia(e){let s=new URLSearchParams;(null==e?void 0:e.page)&&s.set("page",e.page.toString()),(null==e?void 0:e.per_page)&&s.set("per_page",e.per_page.toString()),(null==e?void 0:e.search)&&s.set("search",e.search),(null==e?void 0:e.media_type)&&s.set("media_type",e.media_type);let a="".concat(t,"/api/v1/media").concat(s.toString()?"?"+s.toString():"");return n(await fetch(a))},getMediaItem:async e=>n(await fetch("".concat(t,"/api/v1/media/").concat(e))),scanLibrary:async()=>n(await fetch("".concat(t,"/api/v1/media/scan"),{method:"POST"})),async getJobs(e){let s=new URLSearchParams;(null==e?void 0:e.page)&&s.set("page",e.page.toString()),(null==e?void 0:e.per_page)&&s.set("per_page",e.per_page.toString()),(null==e?void 0:e.status)&&s.set("status",e.status);let a="".concat(t,"/api/v1/jobs").concat(s.toString()?"?"+s.toString():"");return n(await fetch(a))},createJob:async e=>n(await fetch("".concat(t,"/api/v1/jobs"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),getJob:async e=>n(await fetch("".concat(t,"/api/v1/jobs/").concat(e))),async getSchedules(e){let s=new URLSearchParams;(null==e?void 0:e.skip)&&s.set("skip",e.skip.toString()),(null==e?void 0:e.limit)&&s.set("limit",e.limit.toString());let a="".concat(t,"/api/v1/schedules").concat(s.toString()?"?"+s.toString():"");return n(await fetch(a))},createSchedule:async e=>n(await fetch("".concat(t,"/api/v1/schedules"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),updateSchedule:async(e,s)=>n(await fetch("".concat(t,"/api/v1/schedules/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})),deleteSchedule:async e=>n(await fetch("".concat(t,"/api/v1/schedules/").concat(e),{method:"DELETE"})),async getScheduleHistory(e){let s=new URLSearchParams;(null==e?void 0:e.skip)&&s.set("skip",e.skip.toString()),(null==e?void 0:e.limit)&&s.set("limit",e.limit.toString()),(null==e?void 0:e.schedule_id)&&s.set("schedule_id",e.schedule_id),(null==e?void 0:e.status)&&s.set("status",e.status);let a="".concat(t,"/api/v1/schedules/executions/history").concat(s.toString()?"?"+s.toString():"");return n(await fetch(a))},executeSchedule:async e=>n(await fetch("".concat(t,"/api/v1/schedules/").concat(e,"/execute"),{method:"POST"})),getScheduleBadgeTypes:async()=>n(await fetch("".concat(t,"/api/v1/schedules/config/badge-types"))),getScheduleCronPresets:async()=>n(await fetch("".concat(t,"/api/v1/schedules/config/cron-presets"))),getScheduleLibraries:async()=>n(await fetch("".concat(t,"/api/v1/schedules/config/libraries"))),getAnalyticsOverview:async()=>n(await fetch("".concat(t,"/api/v1/analytics/overview"))),getJobStatusDistribution:async()=>n(await fetch("".concat(t,"/api/v1/analytics/jobs/status-distribution"))),async getProcessingTrends(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return n(await fetch("".concat(t,"/api/v1/analytics/jobs/trends?days=").concat(e)))},getJobTypeDistribution:async()=>n(await fetch("".concat(t,"/api/v1/analytics/jobs/types"))),getScheduleAnalytics:async()=>n(await fetch("".concat(t,"/api/v1/analytics/schedules"))),getSystemPerformance:async()=>n(await fetch("".concat(t,"/api/v1/analytics/performance")))},i=l},5057:(e,s,a)=>{"use strict";a.d(s,{J:()=>l});var t=a(5155);a(2115);var c=a(968),n=a(9434);function l(e){let{className:s,...a}=e;return(0,t.jsx)(c.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...a})}},5967:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>J});var t=a(5155),c=a(2115),n=a(7313),l=a(285),i=a(6695),r=a(6126),d=a(333),o=a(4165),h=a(4616),u=a(4186),m=a(5690),x=a(3717),p=a(2525),g=a(722),j=a(6671);function y(e){let{onCreateSchedule:s,onEditSchedule:a}=e,[n,y]=(0,c.useState)([]),[v,f]=(0,c.useState)(!0),[b,N]=(0,c.useState)(!1),[w,S]=(0,c.useState)(null),[_,C]=(0,c.useState)(!1),k=async()=>{try{f(!0);let e=await g.Kp.getSchedules();y(e)}catch(e){console.error("Failed to fetch schedules:",e),j.oR.error("Failed to load schedules")}finally{f(!1)}};(0,c.useEffect)(()=>{k()},[]);let A=async e=>{try{await g.Kp.updateSchedule(e.id,{enabled:!e.enabled}),await k(),j.oR.success("Schedule ".concat(e.enabled?"disabled":"enabled"))}catch(e){console.error("Failed to toggle schedule:",e),j.oR.error("Failed to update schedule")}},T=async e=>{S(e),N(!0)},E=async()=>{if(w)try{C(!0),await g.Kp.deleteSchedule(w.id),await k(),j.oR.success("Schedule deleted successfully")}catch(e){console.error("Failed to delete schedule:",e),j.oR.error("Failed to delete schedule")}finally{C(!1),N(!1),S(null)}},F=async e=>{try{await g.Kp.executeSchedule(e.id),j.oR.success("Schedule execution started")}catch(e){console.error("Failed to execute schedule:",e),j.oR.error("Failed to execute schedule")}},P=e=>({"0 * * * *":"Every hour","0 2 * * *":"Daily at 2:00 AM","0 2 * * 0":"Weekly (Sunday 2:00 AM)","0 2 1 * *":"Monthly (1st day 2:00 AM)","0 */6 * * *":"Every 6 hours","0 2 * * 1-5":"Weekdays at 2:00 AM","0 2 * * 6,0":"Weekends at 2:00 AM","0 2,14 * * *":"Twice daily (2:00 AM & 2:00 PM)"})[e]||e;return v?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Active Schedules"}),(0,t.jsxs)(l.$,{onClick:s,disabled:!0,children:[(0,t.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Create Schedule"]})]}),(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(u.A,{className:"h-8 w-8 mx-auto mb-2 animate-spin"}),(0,t.jsx)("p",{children:"Loading schedules..."})]})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Active Schedules"}),(0,t.jsxs)(l.$,{onClick:s,children:[(0,t.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Create Schedule"]})]}),0===n.length?(0,t.jsx)(i.Zp,{children:(0,t.jsxs)(i.Wu,{className:"text-center py-8",children:[(0,t.jsx)(u.A,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No schedules found"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"Create your first schedule to automate poster processing"}),(0,t.jsxs)(l.$,{onClick:s,children:[(0,t.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Create Schedule"]})]})}):(0,t.jsx)("div",{className:"grid gap-4",children:n.map(e=>(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[e.name,(0,t.jsx)(r.E,{variant:e.enabled?"default":"secondary",children:e.enabled?"Enabled":"Disabled"})]}),(0,t.jsxs)(i.BT,{children:[P(e.cron_expression)," • ",e.timezone]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.d,{checked:e.enabled,onCheckedChange:()=>A(e)}),(0,t.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>F(e),disabled:!e.enabled,children:(0,t.jsx)(m.A,{className:"h-4 w-4"})}),(0,t.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>a(e),children:(0,t.jsx)(x.A,{className:"h-4 w-4"})}),(0,t.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>T(e),children:(0,t.jsx)(p.A,{className:"h-4 w-4"})})]})]})}),(0,t.jsx)(i.Wu,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Badge Types: "}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:e.badge_types.length>0?e.badge_types.join(", "):"None"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Target Libraries: "}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:e.target_libraries.length>0?"".concat(e.target_libraries.length," selected"):"All libraries"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Reprocess All: "}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:e.reprocess_all?"Yes":"No"})]})]})})]},e.id))}),(0,t.jsx)(o.lG,{open:b,onOpenChange:N,children:(0,t.jsxs)(o.Cf,{children:[(0,t.jsxs)(o.c7,{children:[(0,t.jsx)(o.L3,{children:"Delete Schedule"}),(0,t.jsxs)(o.rr,{children:['Are you sure you want to delete "',null==w?void 0:w.name,'"? This action cannot be undone.']})]}),(0,t.jsxs)(o.Es,{children:[(0,t.jsx)(l.$,{variant:"outline",onClick:()=>{N(!1),S(null)},children:"Cancel"}),(0,t.jsx)(l.$,{variant:"destructive",onClick:E,disabled:_,children:_?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete Schedule"})]})]})})]})}var v=a(9409),f=a(646),b=a(4861),N=a(3904),w=a(5339);function S(){let[e,s]=(0,c.useState)([]),[a,n]=(0,c.useState)(!0),[d,o]=(0,c.useState)("all"),h=async()=>{try{n(!0);let e={limit:50};"all"!==d&&(e.status=d);let a=await g.Kp.getScheduleHistory(e);s(a)}catch(e){console.error("Failed to fetch schedule history:",e),j.oR.error("Failed to load schedule history")}finally{n(!1)}};(0,c.useEffect)(()=>{h()},[d]);let m=e=>{switch(e){case"completed":return(0,t.jsx)(f.A,{className:"h-4 w-4 text-green-500"});case"failed":return(0,t.jsx)(b.A,{className:"h-4 w-4 text-red-500"});case"running":return(0,t.jsx)(N.A,{className:"h-4 w-4 text-blue-500 animate-spin"});case"pending":return(0,t.jsx)(u.A,{className:"h-4 w-4 text-yellow-500"});default:return(0,t.jsx)(w.A,{className:"h-4 w-4 text-gray-500"})}},x=e=>{switch(e){case"completed":return"default";case"failed":return"destructive";case"running":default:return"secondary";case"pending":return"outline"}},p=e=>new Date(e).toLocaleString(),y=(e,s)=>{let a=new Date(e),t=Math.round(((s?new Date(s):new Date).getTime()-a.getTime())/1e3);if(t<60)return"".concat(t,"s");{if(t<3600)return"".concat(Math.floor(t/60),"m ").concat(t%60,"s");let e=Math.floor(t/3600),s=Math.floor(t%3600/60);return"".concat(e,"h ").concat(s,"m")}};return a?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Schedule History"})}),(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(u.A,{className:"h-8 w-8 mx-auto mb-2 animate-spin"}),(0,t.jsx)("p",{children:"Loading history..."})]})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Schedule History"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(v.l6,{value:d,onValueChange:o,children:[(0,t.jsx)(v.bq,{className:"w-32",children:(0,t.jsx)(v.yv,{})}),(0,t.jsxs)(v.gC,{children:[(0,t.jsx)(v.eb,{value:"all",children:"All Status"}),(0,t.jsx)(v.eb,{value:"completed",children:"Completed"}),(0,t.jsx)(v.eb,{value:"failed",children:"Failed"}),(0,t.jsx)(v.eb,{value:"running",children:"Running"}),(0,t.jsx)(v.eb,{value:"pending",children:"Pending"})]})]}),(0,t.jsxs)(l.$,{variant:"outline",onClick:h,children:[(0,t.jsx)(N.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),0===e.length?(0,t.jsx)(i.Zp,{children:(0,t.jsxs)(i.Wu,{className:"text-center py-8",children:[(0,t.jsx)(u.A,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No execution history"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Schedule executions will appear here once they start running"})]})}):(0,t.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)(i.ZB,{className:"flex items-center gap-2 text-base",children:[m(e.status),"Execution ",e.id.slice(0,8),(0,t.jsx)(r.E,{variant:x(e.status),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),(0,t.jsxs)(i.BT,{children:["Created: ",p(e.created_at)]})]}),(0,t.jsx)("div",{className:"text-right text-sm text-muted-foreground",children:e.started_at&&(0,t.jsxs)("div",{children:["Duration: ",y(e.started_at,e.completed_at)]})})]})}),(0,t.jsx)(i.Wu,{className:"pt-0",children:(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[e.started_at&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Started: "}),(0,t.jsx)("span",{className:"text-muted-foreground",children:p(e.started_at)})]}),e.completed_at&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Completed: "}),(0,t.jsx)("span",{className:"text-muted-foreground",children:p(e.completed_at)})]}),e.items_processed&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Items Processed: "}),(0,t.jsx)("span",{className:"text-muted-foreground",children:e.items_processed})]}),e.error_message&&(0,t.jsxs)("div",{className:"p-2 bg-destructive/10 rounded border",children:[(0,t.jsx)("span",{className:"font-medium text-destructive",children:"Error: "}),(0,t.jsx)("span",{className:"text-destructive text-xs",children:e.error_message})]})]})})]},e.id))})]})}var _=a(2523),C=a(5057),k=a(7262),A=a(2346),T=a(4416),E=a(4788),F=a(4229);let P=["UTC","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","America/Toronto","Europe/London","Europe/Berlin","Asia/Tokyo","Australia/Sydney"],M={hourly:{label:"Every Hour",cron:"0 * * * *"},daily_2am:{label:"Daily at 2:00 AM",cron:"0 2 * * *"},weekly:{label:"Weekly (Sunday 2:00 AM)",cron:"0 2 * * 0"},monthly:{label:"Monthly (1st day 2:00 AM)",cron:"0 2 1 * *"},every_6_hours:{label:"Every 6 Hours",cron:"0 */6 * * *"},weekdays_2am:{label:"Weekdays at 2:00 AM",cron:"0 2 * * 1-5"},weekends_2am:{label:"Weekends at 2:00 AM",cron:"0 2 * * 6,0"},twice_daily:{label:"Twice Daily (2:00 AM & 2:00 PM)",cron:"0 2,14 * * *"}};function R(e){let{editingSchedule:s,onSave:a,onCancel:n}=e,[o,h]=(0,c.useState)({name:"",timezone:"UTC",cron_expression:"0 2 * * *",badge_types:[],reprocess_all:!1,enabled:!0,target_libraries:[]}),[m,x]=(0,c.useState)([]),[p,y]=(0,c.useState)([]),[f,b]=(0,c.useState)("custom"),[N,w]=(0,c.useState)(!1),[S,R]=(0,c.useState)(!1);(0,c.useEffect)(()=>{(async()=>{try{console.log("\uD83D\uDD0D Loading schedule editor data...");let e=await g.Kp.getScheduleBadgeTypes();console.log("\uD83D\uDCCA Badge types response:",e);let s=(null==e?void 0:e.badge_types)||[];x(s),console.log("✅ Badge types loaded:",s);try{let e=await g.Kp.getScheduleLibraries();console.log("\uD83D\uDCCA Libraries response:",e);let s=(null==e?void 0:e.libraries)||[];y(s),console.log("✅ Libraries loaded:",s)}catch(e){console.warn("⚠️ Failed to load libraries:",e),y([])}}catch(e){console.error("❌ Failed to load editor data:",e),j.oR.error("Failed to load configuration data")}})()},[]),(0,c.useEffect)(()=>{if(s){h({name:s.name,timezone:s.timezone,cron_expression:s.cron_expression,badge_types:s.badge_types,reprocess_all:s.reprocess_all,enabled:s.enabled,target_libraries:s.target_libraries});let e=Object.entries(M).find(e=>{let[a,t]=e;return t.cron===s.cron_expression});b(e?e[0]:"custom")}},[s]);let J=e=>{h(s=>({...s,badge_types:s.badge_types.includes(e)?s.badge_types.filter(s=>s!==e):[...s.badge_types,e]}))},L=e=>{h(s=>({...s,target_libraries:s.target_libraries.includes(e)?s.target_libraries.filter(s=>s!==e):[...s.target_libraries,e]}))},O=async e=>{if(e.preventDefault(),!o.name.trim())return void j.oR.error("Schedule name is required");if(!o.cron_expression.trim())return void j.oR.error("Cron expression is required");try{w(!0),s?(await g.Kp.updateSchedule(s.id,o),j.oR.success("Schedule updated successfully")):(await g.Kp.createSchedule(o),j.oR.success("Schedule created successfully")),a()}catch(e){console.error("Failed to save schedule:",e),j.oR.error("Failed to save schedule")}finally{w(!1)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:s?"Edit Schedule":"Create New Schedule"}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)(l.$,{variant:"outline",onClick:n,children:[(0,t.jsx)(T.A,{className:"h-4 w-4 mr-2"}),"Cancel"]})})]}),(0,t.jsxs)("form",{onSubmit:O,className:"space-y-6",children:[(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsx)(i.ZB,{children:"Basic Information"}),(0,t.jsx)(i.BT,{children:"Configure the schedule name and timing"})]}),(0,t.jsxs)(i.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C.J,{htmlFor:"name",children:"Schedule Name"}),(0,t.jsx)(_.p,{id:"name",placeholder:"Enter schedule name",value:o.name,onChange:e=>h(s=>({...s,name:e.target.value})),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C.J,{htmlFor:"timezone",children:"Timezone"}),(0,t.jsxs)(v.l6,{value:o.timezone,onValueChange:e=>h(s=>({...s,timezone:e})),children:[(0,t.jsx)(v.bq,{children:(0,t.jsx)(v.yv,{})}),(0,t.jsx)(v.gC,{children:P.map(e=>(0,t.jsx)(v.eb,{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C.J,{children:"Quick Presets"}),(0,t.jsxs)(v.l6,{value:f,onValueChange:e=>{b(e),"custom"!==e&&M[e]&&h(s=>({...s,cron_expression:M[e].cron}))},children:[(0,t.jsx)(v.bq,{children:(0,t.jsx)(v.yv,{})}),(0,t.jsxs)(v.gC,{children:[(0,t.jsx)(v.eb,{value:"custom",children:"Custom Expression"}),Object.entries(M).map(e=>{let[s,a]=e;return(0,t.jsx)(v.eb,{value:s,children:a.label},s)})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(C.J,{htmlFor:"cron",children:"Cron Expression"}),(0,t.jsx)(l.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>R(!S),children:(0,t.jsx)(E.A,{className:"h-4 w-4"})})]}),(0,t.jsx)(_.p,{id:"cron",placeholder:"0 2 * * *",value:o.cron_expression,onChange:e=>{h(s=>({...s,cron_expression:e.target.value})),b("custom")},required:!0}),S&&(0,t.jsxs)("div",{className:"p-3 bg-muted rounded text-sm",children:[(0,t.jsx)("p",{className:"font-medium mb-2",children:"Cron Expression Format:"}),(0,t.jsx)("p",{className:"font-mono",children:"minute hour day month weekday"}),(0,t.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,t.jsxs)("p",{children:["• ",(0,t.jsx)("code",{children:"0 2 * * *"})," - Daily at 2:00 AM"]}),(0,t.jsxs)("p",{children:["• ",(0,t.jsx)("code",{children:"0 */6 * * *"})," - Every 6 hours"]}),(0,t.jsxs)("p",{children:["• ",(0,t.jsx)("code",{children:"0 2 * * 1-5"})," - Weekdays at 2:00 AM"]}),(0,t.jsxs)("p",{children:["• ",(0,t.jsx)("code",{children:"0 2 1 * *"})," - Monthly on 1st day at 2:00 AM"]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.d,{id:"enabled",checked:o.enabled,onCheckedChange:e=>h(s=>({...s,enabled:e}))}),(0,t.jsx)(C.J,{htmlFor:"enabled",children:"Enable Schedule"})]})]})]}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsx)(i.ZB,{children:"Processing Options"}),(0,t.jsx)(i.BT,{children:"Configure what will be processed when the schedule runs"})]}),(0,t.jsxs)(i.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(C.J,{children:"Badge Types to Apply"}),0===m.length?(0,t.jsxs)("div",{className:"text-center py-4",children:[(0,t.jsx)(u.A,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading badge types..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:m.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(k.S,{id:"badge-".concat(e),checked:o.badge_types.includes(e),onCheckedChange:()=>J(e)}),(0,t.jsx)(C.J,{htmlFor:"badge-".concat(e),className:"capitalize",children:e})]},e))}),0===o.badge_types.length&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No badge types selected. Schedule will not process any items."})]})]}),(0,t.jsx)(A.w,{}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.d,{id:"reprocess_all",checked:o.reprocess_all,onCheckedChange:e=>h(s=>({...s,reprocess_all:e}))}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(C.J,{htmlFor:"reprocess_all",children:"Reprocess All Items"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"When enabled, processes all items regardless of existing 'aphrodite-overlay' metadata"})]})]})]})]}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsx)(i.ZB,{children:"Target Libraries"}),(0,t.jsx)(i.BT,{children:"Select which Jellyfin libraries to process (leave all unchecked to process all libraries)"})]}),(0,t.jsx)(i.Wu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[0===p.length?(0,t.jsxs)("div",{className:"text-center py-4",children:[(0,t.jsx)(u.A,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading libraries..."}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"If this persists, check that Jellyfin is configured and running"})]}):(0,t.jsx)("div",{className:"space-y-2",children:p.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(k.S,{id:"library-".concat(e.id),checked:o.target_libraries.includes(e.id),onCheckedChange:()=>L(e.id)}),(0,t.jsxs)(C.J,{htmlFor:"library-".concat(e.id),className:"flex items-center gap-2",children:[e.name,(0,t.jsx)(r.E,{variant:"outline",className:"text-xs",children:e.type})]})]},e.id))}),0===o.target_libraries.length&&p.length>0&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"No libraries selected. Schedule will process all movie and TV show libraries."})]})})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(l.$,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),(0,t.jsx)(l.$,{type:"submit",disabled:N,children:N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F.A,{className:"h-4 w-4 mr-2"}),s?"Update Schedule":"Create Schedule"]})})]})]})]})}function J(){let[e,s]=(0,c.useState)("schedules"),[a,l]=(0,c.useState)(null);return(0,t.jsxs)("div",{className:"container mx-auto p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Schedules"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:"Manage automated poster processing schedules"})]}),(0,t.jsxs)(n.tU,{value:e,onValueChange:s,className:"space-y-6",children:[(0,t.jsxs)(n.j7,{children:[(0,t.jsx)(n.Xi,{value:"schedules",children:"Schedules"}),(0,t.jsx)(n.Xi,{value:"history",children:"History"}),(0,t.jsx)(n.Xi,{value:"editor",children:a?"Edit Schedule":"Create Schedule"})]}),(0,t.jsx)(n.av,{value:"schedules",children:(0,t.jsx)(y,{onCreateSchedule:()=>{l(null),s("editor")},onEditSchedule:e=>{l(e),s("editor")}})}),(0,t.jsx)(n.av,{value:"history",children:(0,t.jsx)(S,{})}),(0,t.jsx)(n.av,{value:"editor",children:(0,t.jsx)(R,{editingSchedule:a,onSave:()=>{l(null),s("schedules")},onCancel:()=>{l(null),s("schedules")}})})]})]})}},7366:(e,s,a)=>{Promise.resolve().then(a.bind(a,5967))}},e=>{var s=s=>e(e.s=s);e.O(0,[455,671,52,433,46,223,10,441,684,358],()=>s(7366)),_N_E=e.O()}]);