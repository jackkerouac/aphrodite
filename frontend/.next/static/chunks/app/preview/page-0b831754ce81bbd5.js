(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[517],{381:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(9946).A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3786:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(9946).A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},6233:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>N});var r=a(5155),t=a(2115);let l={availableBadgeTypes:[{id:"audio",name:"Audio",description:"Audio codec badges (DTS-X, Atmos, etc.)"},{id:"resolution",name:"Resolution",description:"Resolution badges (4K, 1080p, etc.)"},{id:"review",name:"Review",description:"Review/rating badges (IMDb, TMDb, etc.)"},{id:"awards",name:"Awards",description:"Awards badges (Oscars, Emmys, etc.)"}],selectedBadgeTypes:["audio","resolution"],currentPreview:{isGenerating:!1},libraries:[],mediaItems:[],configuration:{selectedBadgeTypes:["audio","resolution"],previewOptions:{useExamplePoster:!0,overlayOpacity:.8,showBeforeAfter:!0}},processingQueue:{jobs:[],activeJobs:0,maxConcurrent:3,totalCompleted:0,totalFailed:0},isLoading:!1,activeTab:"simple"};var i=a(6671),n=a(6695),c=a(7262),o=a(285),d=a(6126),p=a(381),m=a(133);function h(e){let{availableBadgeTypes:s,selectedBadgeTypes:a,onToggleBadgeType:t,onGeneratePreview:l,isGenerating:i,className:h=""}=e;return(0,r.jsxs)(n.Zp,{className:h,children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(p.A,{className:"h-5 w-5"}),"Badge Configuration"]}),(0,r.jsx)(n.BT,{children:"Select which badges to apply to the preview poster. Aphrodite will use an example poster to demonstrate how badges look."})]}),(0,r.jsxs)(n.Wu,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h4",{className:"text-sm font-medium",children:"Badge Types"}),(0,r.jsxs)(d.E,{variant:"secondary",className:"text-xs",children:[a.length," selected"]})]}),(0,r.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)(c.S,{id:"badge-".concat(e.id),checked:a.includes(e.id),onCheckedChange:()=>t(e.id),className:"mt-0.5"}),(0,r.jsxs)("div",{className:"grid gap-1.5 leading-none",children:[(0,r.jsx)("label",{htmlFor:"badge-".concat(e.id),className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:e.name}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})]})]},e.id))})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(o.$,{onClick:l,disabled:i||0===a.length,className:"w-full",size:"lg",children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),"Generating Preview..."]}):"Generate Preview"}),(0,r.jsxs)(o.$,{variant:"outline",onClick:()=>{let e=["audio","resolution"];a.forEach(s=>{e.includes(s)||t(s)}),e.forEach(e=>{a.includes(e)||t(e)})},disabled:i,className:"w-full",size:"sm",children:[(0,r.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Reset to Defaults"]})]}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1",children:[(0,r.jsx)("p",{children:"• Preview uses realistic demo data for consistent results"}),(0,r.jsx)("p",{children:"• All badge settings from Settings page are applied"}),(0,r.jsx)("p",{children:"• Select at least one badge type to generate preview"})]})]})]})}var x=a(5339),g=a(7213);let u=(0,a(9946).A)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]);var v=a(1788),w=a(3786),j=a(5365),y=a(4165);function f(e){let{isGenerating:s,previewUrl:a,sourcePoster:l,selectedBadgeTypes:i,error:c,className:p=""}=e,[m,h]=(0,t.useState)(!1),[f,N]=(0,t.useState)(!1),b=e=>{if(!e)return e;let s=e.includes("?")?"&":"?";return"".concat(e).concat(s,"t=").concat(Date.now())},k=async()=>{if(a)try{let e=await fetch(a),s=await e.blob(),r=window.URL.createObjectURL(s),t=document.createElement("a");t.href=r,t.download="aphrodite-preview-".concat(Date.now(),".png"),document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(r),document.body.removeChild(t)}catch(e){console.error("Error downloading preview:",e)}};return(0,r.jsxs)(n.Zp,{className:p,children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(g.A,{className:"h-5 w-5"}),"Preview Poster"]}),(0,r.jsx)(n.BT,{children:"See how your selected badges will look on a poster"})]}),(0,r.jsx)(n.Wu,{children:c?(0,r.jsxs)(j.Fc,{variant:"destructive",children:[(0,r.jsx)(x.A,{className:"h-4 w-4"}),(0,r.jsx)(j.TN,{children:c})]}):s?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-muted border-t-primary"}),(0,r.jsx)(g.A,{className:"absolute top-1/2 left-1/2 h-6 w-6 -translate-x-1/2 -translate-y-1/2 text-muted-foreground"})]}),(0,r.jsxs)("div",{className:"text-center space-y-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:"Generating preview..."}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Applying ",i.length," badge type",1!==i.length?"s":""]})]})]}):a&&!m?(console.log("\uD83D\uDDBC️ Rendering image with URL:",a),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("img",{src:b(a),alt:"Preview Poster",className:"w-full h-auto rounded-lg shadow-md transition-transform group-hover:scale-[1.02]",style:{maxHeight:"500px",objectFit:"contain"},onError:()=>{console.error("\uD83D\uDDBC️ Image failed to load:",a),h(!0)},onLoad:()=>{console.log("\uD83D\uDDBC️ Image loaded successfully:",a),h(!1)},crossOrigin:"anonymous"}),(0,r.jsxs)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity space-x-2",children:[(0,r.jsxs)(y.lG,{open:f,onOpenChange:N,children:[(0,r.jsx)(y.zM,{asChild:!0,children:(0,r.jsx)(o.$,{size:"sm",variant:"secondary",className:"backdrop-blur-sm",children:(0,r.jsx)(u,{className:"h-4 w-4"})})}),(0,r.jsxs)(y.Cf,{className:"max-w-4xl w-full h-[90vh]",children:[(0,r.jsxs)(y.c7,{children:[(0,r.jsx)(y.L3,{children:"Preview Poster - Full Size"}),(0,r.jsxs)(y.rr,{children:["Enhanced with ",i.join(", ")," badges",l&&' using "'.concat(l,'"')]})]}),(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center overflow-auto",children:(0,r.jsx)("img",{src:b(a),alt:"Preview Poster - Full Size",className:"max-w-full max-h-full object-contain",crossOrigin:"anonymous"})})]})]}),(0,r.jsx)(o.$,{size:"sm",variant:"secondary",onClick:k,className:"backdrop-blur-sm",children:(0,r.jsx)(v.A,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)("div",{className:"text-center space-y-2",children:[(0,r.jsx)("div",{className:"flex flex-wrap gap-1 justify-center",children:i.map(e=>(0,r.jsx)(d.E,{variant:"secondary",className:"text-xs",children:e},e))}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Preview generated with ",i.length," badge type",1!==i.length?"s":"",l&&(0,r.jsxs)("span",{className:"block text-xs mt-1",children:['Using "',l,'"']})]})]}),(0,r.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,r.jsxs)(o.$,{variant:"outline",size:"sm",onClick:k,children:[(0,r.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Download Preview"]}),(0,r.jsxs)(o.$,{variant:"outline",size:"sm",onClick:()=>N(!0),children:[(0,r.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"View Full Size"]})]})]})):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 space-y-4",children:[(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)(g.A,{className:"h-16 w-16 text-muted-foreground/30"})}),(0,r.jsxs)("div",{className:"text-center space-y-2",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Your poster preview will appear here"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:'Select badge types and click "Generate Preview"'})]})]})})]})}function N(){let{loading:e,data:s,loadPreviewData:a}=function(){let[e,s]=(0,t.useState)(!1),[a,r]=(0,t.useState)(l),n=async()=>{s(!0);try{console.log("Loading preview page data...");let e=await fetch("".concat("http://localhost:8000","/api/v1/preview/badge-types")),s=await e.json();console.log("Loaded preview data:",{badgeTypesData:s}),r(e=>({...e,availableBadgeTypes:s.success?s.badgeTypes:l.availableBadgeTypes})),console.log("Preview page data loaded successfully")}catch(e){console.error("Error loading preview page data:",e),i.oR.error("Failed to load preview information",{description:e instanceof Error?e.message:"Unknown error occurred",duration:5e3})}finally{s(!1)}},c=async()=>{await n()};return{loading:e,data:a,loadPreviewData:n,refreshData:c,setData:r}}(),{selectedBadgeTypes:n,isGenerating:c,currentPreview:o,generatePreview:d,toggleBadgeType:p}=function(){let[e,s]=(0,t.useState)(["audio","resolution"]),[a,r]=(0,t.useState)(!1),[l,n]=(0,t.useState)({}),c=async()=>{if(0===e.length)return i.oR.error("Please select at least one badge type"),!1;r(!0),n({error:void 0,previewUrl:void 0});try{let a=await fetch("".concat("http://localhost:8000","/api/v1/preview/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({badgeTypes:e})}),r=await a.json();if(!r.success)return n({error:r.message||"Failed to generate preview"}),i.oR.error(r.message||"Failed to generate preview"),!1;{var s;console.log("\uD83C\uDFA8 Preview generation successful:",r),console.log("\uD83D\uDDBC️ Setting preview URL:",r.posterUrl),n({previewUrl:r.posterUrl,sourcePoster:"Random Selection",error:void 0});let a=(null==(s=r.appliedBadges)?void 0:s.length)||e.length,t=r.processingTime||0;return i.oR.success("Preview generated with ".concat(a," badges (").concat(t.toFixed(2),"s)")),!0}}catch(s){console.error("Error generating preview:",s);let e=s instanceof Error?s.message:"Failed to generate preview";return n({error:e}),i.oR.error(e),!1}finally{r(!1)}};return{selectedBadgeTypes:e,isGenerating:a,currentPreview:l,generatePreview:c,toggleBadgeType:e=>{s(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},clearPreview:()=>{n({})},setSelectedBadgeTypes:s}}();return(0,t.useEffect)(()=>{a()},[]),(0,r.jsxs)("div",{className:"container mx-auto py-6 space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Preview"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Generate poster previews with badges to see how they'll look before applying changes"})]}),(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsx)(h,{availableBadgeTypes:s.availableBadgeTypes,selectedBadgeTypes:n,onToggleBadgeType:p,onGeneratePreview:d,isGenerating:c})}),(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsx)(f,{isGenerating:c,previewUrl:o.previewUrl,sourcePoster:o.sourcePoster,selectedBadgeTypes:n,error:o.error})})]})})]})}a(2523),a(9409),a(4944),a(2346)},7213:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(9946).A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},7400:(e,s,a)=>{Promise.resolve().then(a.bind(a,6233))}},e=>{var s=s=>e(e.s=s);e.O(0,[455,671,904,433,47,780,369,441,684,358],()=>s(7400)),_N_E=e.O()}]);