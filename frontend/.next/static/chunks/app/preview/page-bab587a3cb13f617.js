(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[517],{381:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1243:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},1867:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>O});var t=a(5155),r=a(2115),l=a(7313);let i={availableBadgeTypes:[{id:"audio",name:"Audio",description:"Audio codec badges (DTS-X, Atmos, etc.)"},{id:"resolution",name:"Resolution",description:"Resolution badges (4K, 1080p, etc.)"},{id:"review",name:"Review",description:"Review/rating badges (IMDb, TMDb, etc.)"},{id:"awards",name:"Awards",description:"Awards badges (Oscars, Emmys, etc.)"}],selectedBadgeTypes:["audio","resolution"],currentPreview:{isGenerating:!1},libraries:[],mediaItems:[],configuration:{selectedBadgeTypes:["audio","resolution"],previewOptions:{useExamplePoster:!0,overlayOpacity:.8,showBeforeAfter:!0}},processingQueue:{jobs:[],activeJobs:0,maxConcurrent:3,totalCompleted:0,totalFailed:0},isLoading:!1,activeTab:"simple"};var c=a(6671),n=a(6695),d=a(7262),o=a(285),m=a(6126),x=a(381),h=a(133);function u(e){let{availableBadgeTypes:s,selectedBadgeTypes:a,onToggleBadgeType:r,onGeneratePreview:l,isGenerating:i,className:c=""}=e;return(0,t.jsxs)(n.Zp,{className:c,children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(x.A,{className:"h-5 w-5"}),"Badge Configuration"]}),(0,t.jsx)(n.BT,{children:"Select which badges to apply to the preview poster. Aphrodite will use an example poster to demonstrate how badges look."})]}),(0,t.jsxs)(n.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"Badge Types"}),(0,t.jsxs)(m.E,{variant:"secondary",className:"text-xs",children:[a.length," selected"]})]}),(0,t.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)(d.S,{id:"badge-".concat(e.id),checked:a.includes(e.id),onCheckedChange:()=>r(e.id),className:"mt-0.5"}),(0,t.jsxs)("div",{className:"grid gap-1.5 leading-none",children:[(0,t.jsx)("label",{htmlFor:"badge-".concat(e.id),className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})]})]},e.id))})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(o.$,{onClick:l,disabled:i||0===a.length,className:"w-full",size:"lg",children:i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),"Generating Preview..."]}):"Generate Preview"}),(0,t.jsxs)(o.$,{variant:"outline",onClick:()=>{let e=["audio","resolution"];a.forEach(s=>{e.includes(s)||r(s)}),e.forEach(e=>{a.includes(e)||r(e)})},disabled:i,className:"w-full",size:"sm",children:[(0,t.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Reset to Defaults"]})]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1",children:[(0,t.jsx)("p",{children:"• Preview uses realistic demo data for consistent results"}),(0,t.jsx)("p",{children:"• All badge settings from Settings page are applied"}),(0,t.jsx)("p",{children:"• Select at least one badge type to generate preview"})]})]})]})}var p=a(5339),g=a(7213),j=a(9946);let v=(0,j.A)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]);var y=a(1788),f=a(3786),N=a(5365),b=a(4165);function w(e){let{isGenerating:s,previewUrl:a,sourcePoster:l,selectedBadgeTypes:i,error:c,className:d=""}=e,[x,h]=(0,r.useState)(!1),[u,j]=(0,r.useState)(!1),w=async()=>{if(a)try{let e=await fetch(a),s=await e.blob(),t=window.URL.createObjectURL(s),r=document.createElement("a");r.href=t,r.download="aphrodite-preview-".concat(Date.now(),".png"),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(t),document.body.removeChild(r)}catch(e){console.error("Error downloading preview:",e)}};return(0,t.jsxs)(n.Zp,{className:d,children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(g.A,{className:"h-5 w-5"}),"Preview Poster"]}),(0,t.jsx)(n.BT,{children:"See how your selected badges will look on a poster"})]}),(0,t.jsx)(n.Wu,{children:c?(0,t.jsxs)(N.Fc,{variant:"destructive",children:[(0,t.jsx)(p.A,{className:"h-4 w-4"}),(0,t.jsx)(N.TN,{children:c})]}):s?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-muted border-t-primary"}),(0,t.jsx)(g.A,{className:"absolute top-1/2 left-1/2 h-6 w-6 -translate-x-1/2 -translate-y-1/2 text-muted-foreground"})]}),(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Generating preview..."}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Applying ",i.length," badge type",1!==i.length?"s":""]})]})]}):a&&!x?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("img",{src:a,alt:"Preview Poster",className:"w-full h-auto rounded-lg shadow-md transition-transform group-hover:scale-[1.02]",style:{maxHeight:"500px",objectFit:"contain"},onError:()=>{h(!0)},onLoad:()=>{h(!1)}}),(0,t.jsxs)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity space-x-2",children:[(0,t.jsxs)(b.lG,{open:u,onOpenChange:j,children:[(0,t.jsx)(b.zM,{asChild:!0,children:(0,t.jsx)(o.$,{size:"sm",variant:"secondary",className:"backdrop-blur-sm",children:(0,t.jsx)(v,{className:"h-4 w-4"})})}),(0,t.jsxs)(b.Cf,{className:"max-w-4xl w-full h-[90vh]",children:[(0,t.jsxs)(b.c7,{children:[(0,t.jsx)(b.L3,{children:"Preview Poster - Full Size"}),(0,t.jsxs)(b.rr,{children:["Enhanced with ",i.join(", ")," badges",l&&' using "'.concat(l,'"')]})]}),(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center overflow-auto",children:(0,t.jsx)("img",{src:a,alt:"Preview Poster - Full Size",className:"max-w-full max-h-full object-contain"})})]})]}),(0,t.jsx)(o.$,{size:"sm",variant:"secondary",onClick:w,className:"backdrop-blur-sm",children:(0,t.jsx)(y.A,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)("div",{className:"flex flex-wrap gap-1 justify-center",children:i.map(e=>(0,t.jsx)(m.E,{variant:"secondary",className:"text-xs",children:e},e))}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Preview generated with ",i.length," badge type",1!==i.length?"s":"",l&&(0,t.jsxs)("span",{className:"block text-xs mt-1",children:['Using "',l,'"']})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,t.jsxs)(o.$,{variant:"outline",size:"sm",onClick:w,children:[(0,t.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Download Preview"]}),(0,t.jsxs)(o.$,{variant:"outline",size:"sm",onClick:()=>j(!0),children:[(0,t.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"View Full Size"]})]})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 space-y-4",children:[(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)(g.A,{className:"h-16 w-16 text-muted-foreground/30"})}),(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Your poster preview will appear here"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:'Select badge types and click "Generate Preview"'})]})]})})]})}var k=a(2523),A=a(9409),S=a(1066),T=a(6618);let P=(0,j.A)("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),C=(0,j.A)("book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);var E=a(8719),B=a(1243),R=a(7924);function M(e){let{libraries:s,selectedLibrary:a,mediaItems:l,selectedMedia:i,loading:c,onSelectLibrary:d,onSelectMedia:x,onLoadLibraries:h,onLoadMedia:u,className:p=""}=e,[g,j]=r.useState(""),v=e=>{switch(e){case"movies":return(0,t.jsx)(S.A,{className:"h-4 w-4"});case"series":return(0,t.jsx)(T.A,{className:"h-4 w-4"});case"music":return(0,t.jsx)(P,{className:"h-4 w-4"});case"books":return(0,t.jsx)(C,{className:"h-4 w-4"});default:return(0,t.jsx)(E.A,{className:"h-4 w-4"})}},y=e=>({movie:"Movie",series:"TV Series",episode:"Episode",season:"Season"})[e]||e;return(0,t.jsxs)(n.Zp,{className:p,children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(E.A,{className:"h-5 w-5"}),"Media Library Browser"]}),(0,t.jsx)(n.BT,{children:"Browse your Jellyfin libraries and select media for preview (coming soon)"})]}),(0,t.jsxs)(n.Wu,{className:"space-y-6",children:[(0,t.jsxs)(N.Fc,{children:[(0,t.jsx)(B.A,{className:"h-4 w-4"}),(0,t.jsx)(N.TN,{children:"Library browsing is coming in a future update. Currently using example poster for consistent preview experience."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Select Library"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(A.l6,{value:a,onValueChange:d,disabled:c.libraries||0===s.length,children:[(0,t.jsx)(A.bq,{className:"flex-1",children:(0,t.jsx)(A.yv,{placeholder:"Choose a library..."})}),(0,t.jsx)(A.gC,{children:s.map(e=>(0,t.jsx)(A.eb,{value:e.id,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[v(e.type),e.name,e.itemCount&&(0,t.jsx)(m.E,{variant:"secondary",className:"ml-auto text-xs",children:e.itemCount})]})},e.id))})]}),(0,t.jsx)(o.$,{variant:"outline",onClick:h,disabled:c.libraries,children:c.libraries?(0,t.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-background border-t-foreground"}):"Refresh"})]})]}),a&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Search Media"}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u({search:g})},className:"flex gap-2",children:[(0,t.jsx)(k.p,{placeholder:"Search for movies, shows, etc...",value:g,onChange:e=>j(e.target.value),disabled:c.media}),(0,t.jsx)(o.$,{type:"submit",variant:"outline",disabled:c.media,children:(0,t.jsx)(R.A,{className:"h-4 w-4"})})]})]}),a&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Media Items"}),l.length>0&&(0,t.jsxs)(m.E,{variant:"secondary",className:"text-xs",children:[l.length," items"]})]}),c.media?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-muted border-t-primary"})}):l.length>0?(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 max-h-64 overflow-y-auto",children:l.map(e=>(0,t.jsxs)("div",{className:"\n                      cursor-pointer rounded-lg border p-2 transition-colors hover:bg-accent\n                      ".concat(i===e.id?"border-primary bg-accent":"border-muted","\n                    "),onClick:()=>x(e.id),children:[(0,t.jsx)("div",{className:"aspect-[2/3] bg-muted rounded mb-2 flex items-center justify-center",children:e.poster_url?(0,t.jsx)("img",{src:e.poster_url,alt:e.name,className:"w-full h-full object-cover rounded"}):(0,t.jsx)(S.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-xs font-medium truncate",title:e.name,children:e.name}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(m.E,{variant:"outline",className:"text-xs",children:y(e.type)}),e.year&&(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:e.year})]})]})]},e.id))}):a?(0,t.jsxs)("div",{className:"text-center py-8 text-sm text-muted-foreground",children:["No media items found",g&&(0,t.jsx)("span",{className:"block mt-1",children:"Try a different search term"})]}):null]}),i&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Selected Media"}),(()=>{let e=l.find(e=>e.id===i);return e?(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 border rounded-lg bg-accent/50",children:[(0,t.jsx)("div",{className:"w-12 h-16 bg-muted rounded flex items-center justify-center",children:e.poster_url?(0,t.jsx)("img",{src:e.poster_url,alt:e.name,className:"w-full h-full object-cover rounded"}):(0,t.jsx)(S.A,{className:"h-6 w-6 text-muted-foreground"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"font-medium truncate",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(m.E,{variant:"outline",className:"text-xs",children:y(e.type)}),e.year&&(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:e.year})]}),e.overview&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:e.overview})]})]}):null})()]})]})]})}var _=a(4944),F=a(2346),L=a(5690),z=a(9869),U=a(8979),$=a(2525);function G(e){let{jobs:s,loading:a,onAddJob:r,onCancelJob:l,onLoadJobs:i,selectedMedia:c,selectedBadgeTypes:d,className:h=""}=e,u=s.filter(e=>"running"===e.status),p=s.filter(e=>"pending"===e.status),g=s.filter(e=>"completed"===e.status),j=s.filter(e=>"failed"===e.status),v=async()=>{c&&0!==d.length&&r&&await r([c],d)},f=async()=>{0!==d.length&&r&&console.log("Batch processing not yet implemented")},b=e=>({preview:"Preview",apply:"Apply Changes",batch:"Batch Processing",badge_processing:"Badge Processing"})[e]||e,w=e=>{switch(e){case"pending":return"bg-yellow-500";case"running":return"bg-blue-500";case"completed":return"bg-green-500";case"failed":return"bg-red-500";default:return"bg-gray-500"}};return(0,t.jsxs)(n.Zp,{className:h,children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(L.A,{className:"h-5 w-5"}),"Processing Controls"]}),(0,t.jsx)(n.BT,{children:"Apply changes to Jellyfin and manage processing queue (coming soon)"})]}),(0,t.jsxs)(n.Wu,{className:"space-y-6",children:[(0,t.jsxs)(N.Fc,{children:[(0,t.jsx)(B.A,{className:"h-4 w-4"}),(0,t.jsx)(N.TN,{children:"Processing controls are coming in a future update. Currently focused on preview functionality."})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"Quick Actions"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)(o.$,{variant:"outline",onClick:v,disabled:!c||0===d.length,className:"h-auto py-3 flex-col gap-1",children:[(0,t.jsx)(z.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-xs",children:"Apply to Selected"})]}),(0,t.jsxs)(o.$,{variant:"outline",onClick:f,disabled:0===d.length,className:"h-auto py-3 flex-col gap-1",children:[(0,t.jsx)(x.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-xs",children:"Batch Process"})]})]})]}),(0,t.jsx)(F.w,{}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"Queue Status"}),(0,t.jsx)(o.$,{variant:"ghost",size:"sm",onClick:i,disabled:a,children:a?(0,t.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-background border-t-foreground"}):"Refresh"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:u.length}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Active"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:p.length}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Pending"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:g.length}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Completed"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-red-600",children:j.length}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Failed"})]})]})]}),u.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F.w,{}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"Active Jobs"}),(0,t.jsx)("div",{className:"space-y-2",children:u.map(e=>(0,t.jsxs)("div",{className:"p-3 border rounded-lg space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(w(e.status))}),(0,t.jsx)("span",{className:"text-sm font-medium",children:b(e.type)})]}),(0,t.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>null==l?void 0:l(e.id),children:(0,t.jsx)(U.A,{className:"h-4 w-4"})})]}),(0,t.jsx)(_.k,{value:e.progress,className:"h-1"}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{children:[e.progress,"% complete"]}),(0,t.jsxs)("span",{children:[e.media_ids.length," items"]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:e.badge_types.map(e=>(0,t.jsx)(m.E,{variant:"secondary",className:"text-xs",children:e},e))})]},e.id))})]})]}),(g.length>0||j.length>0)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F.w,{}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"Recent Jobs"}),(0,t.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[...g,...j].sort((e,s)=>new Date(s.updated_at).getTime()-new Date(e.updated_at).getTime()).slice(0,5).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(w(e.status))}),(0,t.jsx)("span",{children:b(e.type)}),(0,t.jsxs)(m.E,{variant:"outline",className:"text-xs",children:[e.media_ids.length," items"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["completed"===e.status&&(0,t.jsx)(o.$,{variant:"ghost",size:"sm",children:(0,t.jsx)(y.A,{className:"h-4 w-4"})}),(0,t.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>null==l?void 0:l(e.id),children:(0,t.jsx)($.A,{className:"h-4 w-4"})})]})]},e.id))})]})]}),0===s.length&&!a&&(0,t.jsx)("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No processing jobs found"})]})]})}var q=a(2657),J=a(1539);function O(){let{loading:e,data:s,loadPreviewData:a}=function(){let[e,s]=(0,r.useState)(!1),[a,t]=(0,r.useState)(i),l=async()=>{s(!0);try{console.log("Loading preview page data...");let e=await fetch("".concat("http://localhost:8000","/api/v1/preview/badge-types")),s=await e.json();console.log("Loaded preview data:",{badgeTypesData:s}),t(e=>({...e,availableBadgeTypes:s.success?s.badgeTypes:i.availableBadgeTypes})),console.log("Preview page data loaded successfully")}catch(e){console.error("Error loading preview page data:",e),c.oR.error("Failed to load preview information",{description:e instanceof Error?e.message:"Unknown error occurred",duration:5e3})}finally{s(!1)}},n=async()=>{await l()};return{loading:e,data:a,loadPreviewData:l,refreshData:n,setData:t}}(),{selectedBadgeTypes:n,isGenerating:d,currentPreview:o,generatePreview:m,toggleBadgeType:x}=function(){let[e,s]=(0,r.useState)(["audio","resolution"]),[a,t]=(0,r.useState)(!1),[l,i]=(0,r.useState)({}),n=async()=>{if(0===e.length)return c.oR.error("Please select at least one badge type"),!1;t(!0),i({error:void 0,previewUrl:void 0});try{let a=await fetch("".concat("http://localhost:8000","/api/v1/preview/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({badgeTypes:e})}),t=await a.json();if(!t.success)return i({error:t.message||"Failed to generate preview"}),c.oR.error(t.message||"Failed to generate preview"),!1;{var s;i({previewUrl:t.posterUrl,sourcePoster:"Random Selection",error:void 0});let a=(null==(s=t.appliedBadges)?void 0:s.length)||e.length,r=t.processingTime||0;return c.oR.success("Preview generated with ".concat(a," badges (").concat(r.toFixed(2),"s)")),!0}}catch(s){console.error("Error generating preview:",s);let e=s instanceof Error?s.message:"Failed to generate preview";return i({error:e}),c.oR.error(e),!1}finally{t(!1)}};return{selectedBadgeTypes:e,isGenerating:a,currentPreview:l,generatePreview:n,toggleBadgeType:e=>{s(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},clearPreview:()=>{i({})},setSelectedBadgeTypes:s}}(),{libraries:h,selectedLibrary:p,mediaItems:g,selectedMedia:j,loading:v,loadLibraries:y,loadMedia:f,selectLibrary:N,selectMedia:b}=function(){let[e,s]=(0,r.useState)([]),[a,t]=(0,r.useState)(""),[l,i]=(0,r.useState)([]),[n,d]=(0,r.useState)(""),[o,m]=(0,r.useState)({libraries:!1,media:!1}),x=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(a||e.library_id){m(e=>({...e,media:!0}));try{let s=new URLSearchParams,t=e.library_id||a;t&&s.set("library_id",t),e.search&&s.set("search",e.search),e.page&&s.set("page",e.page.toString()),e.limit&&s.set("limit",e.limit.toString());let r=await fetch("".concat("http://localhost:8000","/api/v1/preview/media?").concat(s)),l=await r.json();l.success?i(l.media||[]):c.oR.error("Failed to load media items")}catch(e){console.error("Error loading media:",e),c.oR.error("Error loading media items")}finally{m(e=>({...e,media:!1}))}}};return{libraries:e,selectedLibrary:a,mediaItems:l,selectedMedia:n,loading:o,loadLibraries:async()=>{m(e=>({...e,libraries:!0}));try{let e=await fetch("".concat("http://localhost:8000","/api/v1/preview/libraries")),a=await e.json();a.success?s(a.libraries||[]):c.oR.error("Failed to load libraries")}catch(e){console.error("Error loading libraries:",e),c.oR.error("Error loading libraries")}finally{m(e=>({...e,libraries:!1}))}},loadMedia:x,selectLibrary:e=>{t(e),d(""),i([]),e&&x({library_id:e})},selectMedia:e=>{d(e)}}}(),{jobs:k,loading:A,loadJobs:S,addJob:T,cancelJob:P}=function(){let[e,s]=(0,r.useState)([]),[a,t]=(0,r.useState)(!1),l=async()=>{t(!0);try{let e=await fetch("".concat("http://localhost:8000","/api/v1/jobs?status=pending,running")),a=await e.json();a.success&&s(a.jobs||[])}catch(e){console.error("Error loading jobs:",e)}finally{t(!1)}},i=async(e,s)=>{try{let a=await fetch("".concat("http://localhost:8000","/api/v1/jobs"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({media_ids:e,job_type:"badge_processing",parameters:{badge_types:s}})}),t=await a.json();if(t.success)return c.oR.success("Job added to queue"),await l(),!0;return c.oR.error(t.message||"Failed to add job"),!1}catch(e){return console.error("Error adding job:",e),c.oR.error("Error adding job to queue"),!1}},n=async e=>{try{let s=await fetch("".concat("http://localhost:8000","/api/v1/jobs/").concat(e),{method:"DELETE"}),a=await s.json();if(a.success)return c.oR.success("Job cancelled"),await l(),!0;return c.oR.error(a.message||"Failed to cancel job"),!1}catch(e){return console.error("Error cancelling job:",e),c.oR.error("Error cancelling job"),!1}};return{jobs:e,loading:a,loadJobs:l,addJob:i,cancelJob:n}}();return(0,r.useEffect)(()=>{a()},[]),(0,t.jsxs)("div",{className:"container mx-auto py-6 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Preview"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Generate poster previews with badges to see how they'll look before applying changes"})]}),(0,t.jsxs)(l.tU,{defaultValue:"simple",className:"space-y-6",children:[(0,t.jsxs)(l.j7,{className:"grid w-full grid-cols-2",children:[(0,t.jsxs)(l.Xi,{value:"simple",className:"flex items-center gap-2",children:[(0,t.jsx)(q.A,{className:"h-4 w-4"}),"Simple Preview"]}),(0,t.jsxs)(l.Xi,{value:"advanced",className:"flex items-center gap-2",children:[(0,t.jsx)(J.A,{className:"h-4 w-4"}),"Advanced Mode"]})]}),(0,t.jsx)(l.av,{value:"simple",className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsx)(u,{availableBadgeTypes:s.availableBadgeTypes,selectedBadgeTypes:n,onToggleBadgeType:x,onGeneratePreview:m,isGenerating:d})}),(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsx)(w,{isGenerating:d,previewUrl:o.previewUrl,sourcePoster:o.sourcePoster,selectedBadgeTypes:n,error:o.error})})]})}),(0,t.jsx)(l.av,{value:"advanced",className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(M,{libraries:h,selectedLibrary:p,mediaItems:g,selectedMedia:j,loading:v,onSelectLibrary:N,onSelectMedia:b,onLoadLibraries:y,onLoadMedia:f}),(0,t.jsx)(u,{availableBadgeTypes:s.availableBadgeTypes,selectedBadgeTypes:n,onToggleBadgeType:x,onGeneratePreview:m,isGenerating:d})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(w,{isGenerating:d,previewUrl:o.previewUrl,sourcePoster:o.sourcePoster,selectedBadgeTypes:n,error:o.error}),(0,t.jsx)(G,{jobs:k,loading:A,onAddJob:T,onCancelJob:P,onLoadJobs:S,selectedMedia:j,selectedBadgeTypes:n})]})]})})]})]})}},2525:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2657:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3786:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},4944:(e,s,a)=>{"use strict";a.d(s,{k:()=>i});var t=a(5155);a(2115);var r=a(5863),l=a(9434);function i(e){let{className:s,value:a,...i}=e;return(0,t.jsx)(r.bL,{"data-slot":"progress",className:(0,l.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...i,children:(0,t.jsx)(r.C1,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})}},5365:(e,s,a)=>{"use strict";a.d(s,{Fc:()=>c,TN:()=>n});var t=a(5155);a(2115);var r=a(2085),l=a(9434);let i=(0,r.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function c(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,l.cn)(i({variant:a}),s),...r})}function n(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"alert-description",className:(0,l.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...a})}},7213:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},7400:(e,s,a)=>{Promise.resolve().then(a.bind(a,1867))},9869:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[455,671,52,433,46,464,10,441,684,358],()=>s(7400)),_N_E=e.O()}]);