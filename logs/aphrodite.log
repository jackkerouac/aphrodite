2025-06-14 15:23:00 - ERROR - Error applying review badge: [Errno 2] No such file or directory: 'E:/programming/aphrodite/aphrodite-v2/api/static/posters/sample_poster.jpg'
Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\review_applicator.py", line 63, in apply_review_badge
    poster = Image.open(poster_path).convert("RGBA")
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\PIL\Image.py", line 3243, in open
    fp = builtins.open(filename, "rb")
FileNotFoundError: [Errno 2] No such file or directory: 'E:/programming/aphrodite/aphrodite-v2/api/static/posters/sample_poster.jpg'
2025-06-15 20:24:31 - ERROR - Failed to create review container
2025-06-15 20:27:22 - ERROR - Failed to create review container
2025-06-15 20:27:22 - ERROR - Review badge applicator returned None - check applicator logs
2025-06-16 08:51:43 - ERROR - Database session factory not initialized
2025-06-18 07:24:18 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:24:18 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:24:18 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:24:18 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:24:18 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:24:18 - ERROR - Database session factory not initialized
2025-06-18 07:24:18 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:24:18 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:24:18 - WARNING - No real reviews found using v2 detector
2025-06-18 07:24:18 - WARNING - No reviews found, skipping review badge
2025-06-18 07:24:18 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:24:18 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:24:18 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:24:18 - WARNING - No badges applied, using resized poster
2025-06-18 07:24:18 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:24:18 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:24:18 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:24:18 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:24:18 - ERROR - Database session factory not initialized
2025-06-18 07:24:18 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:24:18 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:24:18 - WARNING - No real reviews found using v2 detector
2025-06-18 07:24:18 - WARNING - No reviews found, skipping review badge
2025-06-18 07:24:18 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:24:18 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:24:18 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:24:18 - WARNING - No badges applied, using resized poster
2025-06-18 07:24:19 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:24:19 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:24:19 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:24:19 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:24:19 - ERROR - Database session factory not initialized
2025-06-18 07:24:19 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:24:19 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:24:19 - WARNING - No real reviews found using v2 detector
2025-06-18 07:24:19 - WARNING - No reviews found, skipping review badge
2025-06-18 07:24:19 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:24:19 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:24:19 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:24:19 - WARNING - No badges applied, using resized poster
2025-06-18 07:24:19 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:24:19 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:24:19 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:24:19 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:24:19 - ERROR - Database session factory not initialized
2025-06-18 07:24:19 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:24:19 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:24:19 - WARNING - No real reviews found using v2 detector
2025-06-18 07:24:19 - WARNING - No reviews found, skipping review badge
2025-06-18 07:24:19 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:24:19 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:24:19 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:24:19 - WARNING - No badges applied, using resized poster
2025-06-18 07:24:19 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:24:19 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:24:19 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:24:19 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:24:19 - ERROR - Database session factory not initialized
2025-06-18 07:24:19 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:24:19 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:24:19 - WARNING - No real reviews found using v2 detector
2025-06-18 07:24:19 - WARNING - No reviews found, skipping review badge
2025-06-18 07:24:19 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:24:19 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:24:19 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:24:19 - WARNING - No badges applied, using resized poster
2025-06-18 07:28:29 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:28:29 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:28:29 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:28:29 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:28:29 - ERROR - Database session factory not initialized
2025-06-18 07:28:29 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:28:29 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:28:29 - WARNING - No real reviews found using v2 detector
2025-06-18 07:28:29 - WARNING - No reviews found, skipping review badge
2025-06-18 07:28:29 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:28:29 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:28:29 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:28:29 - WARNING - No badges applied, using resized poster
2025-06-18 07:28:29 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:28:29 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:28:29 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:28:29 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:28:29 - ERROR - Database session factory not initialized
2025-06-18 07:28:29 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:28:29 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:28:29 - WARNING - No real reviews found using v2 detector
2025-06-18 07:28:29 - WARNING - No reviews found, skipping review badge
2025-06-18 07:28:29 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:28:29 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:28:29 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:28:29 - WARNING - No badges applied, using resized poster
2025-06-18 07:28:29 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:28:29 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:28:29 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:28:29 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:28:29 - ERROR - Database session factory not initialized
2025-06-18 07:28:29 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:28:29 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:28:29 - WARNING - No real reviews found using v2 detector
2025-06-18 07:28:29 - WARNING - No reviews found, skipping review badge
2025-06-18 07:28:29 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:28:29 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:28:29 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:28:29 - WARNING - No badges applied, using resized poster
2025-06-18 07:28:29 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:28:29 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:28:29 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:28:29 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:28:29 - ERROR - Database session factory not initialized
2025-06-18 07:28:29 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:28:29 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:28:29 - WARNING - No real reviews found using v2 detector
2025-06-18 07:28:29 - WARNING - No reviews found, skipping review badge
2025-06-18 07:28:29 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:28:29 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:28:29 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:28:29 - WARNING - No badges applied, using resized poster
2025-06-18 07:28:29 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:28:29 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:28:29 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:28:29 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:28:29 - ERROR - Database session factory not initialized
2025-06-18 07:28:29 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:28:29 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:28:29 - WARNING - No real reviews found using v2 detector
2025-06-18 07:28:29 - WARNING - No reviews found, skipping review badge
2025-06-18 07:28:29 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:28:29 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:28:29 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:28:29 - WARNING - No badges applied, using resized poster
2025-06-18 07:28:29 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:28:29 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:28:29 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:28:29 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:28:29 - ERROR - Database session factory not initialized
2025-06-18 07:28:29 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:28:29 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:28:29 - WARNING - No real reviews found using v2 detector
2025-06-18 07:28:29 - WARNING - No reviews found, skipping review badge
2025-06-18 07:28:29 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:28:29 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:28:29 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:28:29 - WARNING - No badges applied, using resized poster
2025-06-18 07:29:45 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:29:45 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:29:45 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:29:45 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:29:45 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:29:45 - ERROR - Database session factory not initialized
2025-06-18 07:29:45 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:29:45 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:29:45 - WARNING - No real reviews found using v2 detector
2025-06-18 07:29:45 - WARNING - No reviews found, skipping review badge
2025-06-18 07:29:45 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:29:45 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:29:45 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:29:45 - WARNING - No badges applied, using resized poster
2025-06-18 07:29:45 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:29:45 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:29:45 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:29:45 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:29:45 - ERROR - Database session factory not initialized
2025-06-18 07:29:45 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:29:45 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:29:45 - WARNING - No real reviews found using v2 detector
2025-06-18 07:29:45 - WARNING - No reviews found, skipping review badge
2025-06-18 07:29:45 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:29:45 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:29:45 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:29:45 - WARNING - No badges applied, using resized poster
2025-06-18 07:29:45 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:29:45 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:29:45 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:29:45 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:29:45 - ERROR - Database session factory not initialized
2025-06-18 07:29:45 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:29:45 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:29:45 - WARNING - No real reviews found using v2 detector
2025-06-18 07:29:45 - WARNING - No reviews found, skipping review badge
2025-06-18 07:29:45 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:29:45 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:29:45 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:29:45 - WARNING - No badges applied, using resized poster
2025-06-18 07:29:46 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:29:46 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:29:46 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:29:46 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:29:46 - ERROR - Database session factory not initialized
2025-06-18 07:29:46 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:29:46 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:29:46 - WARNING - No real reviews found using v2 detector
2025-06-18 07:29:46 - WARNING - No reviews found, skipping review badge
2025-06-18 07:29:46 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:29:46 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:29:46 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:29:46 - WARNING - No badges applied, using resized poster
2025-06-18 07:29:46 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:29:46 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:29:46 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:29:46 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:29:46 - ERROR - Database session factory not initialized
2025-06-18 07:29:46 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:29:46 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:29:46 - WARNING - No real reviews found using v2 detector
2025-06-18 07:29:46 - WARNING - No reviews found, skipping review badge
2025-06-18 07:29:46 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:29:46 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:29:46 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:29:46 - WARNING - No badges applied, using resized poster
2025-06-18 07:32:04 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:32:04 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:32:04 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:32:04 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:32:04 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:32:04 - ERROR - Database session factory not initialized
2025-06-18 07:32:04 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:32:04 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:32:04 - WARNING - No real reviews found using v2 detector
2025-06-18 07:32:04 - WARNING - No reviews found, skipping review badge
2025-06-18 07:32:04 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:32:04 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:32:04 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:32:04 - WARNING - No badges applied, using resized poster
2025-06-18 07:32:04 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:32:04 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:32:04 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:32:04 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:32:05 - ERROR - Database session factory not initialized
2025-06-18 07:32:05 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:32:05 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:32:05 - WARNING - No real reviews found using v2 detector
2025-06-18 07:32:05 - WARNING - No reviews found, skipping review badge
2025-06-18 07:32:05 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:32:05 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:32:05 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:32:05 - WARNING - No badges applied, using resized poster
2025-06-18 07:32:05 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:32:05 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:32:05 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:32:05 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:32:05 - ERROR - Database session factory not initialized
2025-06-18 07:32:05 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:32:05 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:32:05 - WARNING - No real reviews found using v2 detector
2025-06-18 07:32:05 - WARNING - No reviews found, skipping review badge
2025-06-18 07:32:05 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:32:05 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:32:05 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:32:05 - WARNING - No badges applied, using resized poster
2025-06-18 07:32:05 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:32:05 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:32:05 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:32:05 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:32:05 - ERROR - Database session factory not initialized
2025-06-18 07:32:05 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:32:05 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:32:05 - WARNING - No real reviews found using v2 detector
2025-06-18 07:32:05 - WARNING - No reviews found, skipping review badge
2025-06-18 07:32:05 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:32:05 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:32:05 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:32:05 - WARNING - No badges applied, using resized poster
2025-06-18 07:32:05 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:32:05 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:32:05 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:32:05 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:32:05 - ERROR - Database session factory not initialized
2025-06-18 07:32:05 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:32:05 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:32:05 - WARNING - No real reviews found using v2 detector
2025-06-18 07:32:05 - WARNING - No reviews found, skipping review badge
2025-06-18 07:32:05 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:32:05 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:32:05 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:32:05 - WARNING - No badges applied, using resized poster
2025-06-18 07:33:16 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:33:16 - ERROR - Error loading audio badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:33:16 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:33:16 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:33:16 - WARNING - No audio codec detected, skipping audio badge
2025-06-18 07:33:16 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:33:16 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:33:16 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:33:16 - ERROR - Database session factory not initialized
2025-06-18 07:33:16 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:33:16 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:33:16 - WARNING - No real reviews found using v2 detector
2025-06-18 07:33:16 - WARNING - No reviews found, skipping review badge
2025-06-18 07:33:16 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:33:16 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:33:16 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:33:16 - WARNING - No badges applied, using resized poster
2025-06-18 07:33:16 - ERROR - Error loading audio badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:33:16 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:33:16 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:33:16 - WARNING - No audio codec detected, skipping audio badge
2025-06-18 07:33:16 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:33:16 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:33:16 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:33:16 - ERROR - Database session factory not initialized
2025-06-18 07:33:16 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:33:16 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:33:16 - WARNING - No real reviews found using v2 detector
2025-06-18 07:33:16 - WARNING - No reviews found, skipping review badge
2025-06-18 07:33:16 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:33:16 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:33:16 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:33:16 - WARNING - No badges applied, using resized poster
2025-06-18 07:33:16 - ERROR - Error loading audio badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:33:16 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:33:16 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:33:16 - WARNING - No audio codec detected, skipping audio badge
2025-06-18 07:33:17 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:33:17 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:33:17 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:33:17 - ERROR - Database session factory not initialized
2025-06-18 07:33:17 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:33:17 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:33:17 - WARNING - No real reviews found using v2 detector
2025-06-18 07:33:17 - WARNING - No reviews found, skipping review badge
2025-06-18 07:33:17 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:33:17 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:33:17 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:33:17 - WARNING - No badges applied, using resized poster
2025-06-18 07:33:17 - ERROR - Error loading audio badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:33:17 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:33:17 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:33:17 - WARNING - No audio codec detected, skipping audio badge
2025-06-18 07:33:17 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:33:17 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:33:17 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:33:17 - ERROR - Database session factory not initialized
2025-06-18 07:33:17 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:33:17 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:33:17 - WARNING - No real reviews found using v2 detector
2025-06-18 07:33:17 - WARNING - No reviews found, skipping review badge
2025-06-18 07:33:17 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:33:17 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:33:17 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:33:17 - WARNING - No badges applied, using resized poster
2025-06-18 07:33:17 - ERROR - Error loading audio badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:33:17 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:33:17 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:33:17 - WARNING - No audio codec detected, skipping audio badge
2025-06-18 07:33:17 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:33:17 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:33:17 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:33:17 - ERROR - Database session factory not initialized
2025-06-18 07:33:17 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:33:17 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:33:17 - WARNING - No real reviews found using v2 detector
2025-06-18 07:33:17 - WARNING - No reviews found, skipping review badge
2025-06-18 07:33:17 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:33:17 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:33:17 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:33:17 - WARNING - No badges applied, using resized poster
2025-06-18 07:34:22 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:34:22 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:34:22 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:34:22 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:34:22 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:34:22 - ERROR - Database session factory not initialized
2025-06-18 07:34:22 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:34:22 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:34:22 - WARNING - No real reviews found using v2 detector
2025-06-18 07:34:22 - WARNING - No reviews found, skipping review badge
2025-06-18 07:34:22 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:34:22 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:34:22 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:34:22 - WARNING - No badges applied, using resized poster
2025-06-18 07:34:23 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:34:23 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:34:23 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:34:23 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:34:23 - ERROR - Database session factory not initialized
2025-06-18 07:34:23 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:34:23 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:34:23 - WARNING - No real reviews found using v2 detector
2025-06-18 07:34:23 - WARNING - No reviews found, skipping review badge
2025-06-18 07:34:23 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:34:23 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:34:23 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:34:23 - WARNING - No badges applied, using resized poster
2025-06-18 07:34:23 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:34:23 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:34:23 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:34:23 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:34:23 - ERROR - Database session factory not initialized
2025-06-18 07:34:23 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:34:23 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:34:23 - WARNING - No real reviews found using v2 detector
2025-06-18 07:34:23 - WARNING - No reviews found, skipping review badge
2025-06-18 07:34:23 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:34:23 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:34:23 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:34:23 - WARNING - No badges applied, using resized poster
2025-06-18 07:34:23 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:34:23 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:34:23 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:34:23 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:34:23 - ERROR - Database session factory not initialized
2025-06-18 07:34:23 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:34:23 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:34:23 - WARNING - No real reviews found using v2 detector
2025-06-18 07:34:23 - WARNING - No reviews found, skipping review badge
2025-06-18 07:34:23 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:34:23 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:34:23 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:34:23 - WARNING - No badges applied, using resized poster
2025-06-18 07:34:23 - ERROR - Error loading resolution badge settings: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 750, in call_soon
    self._check_closed()
  File "C:\Program Files\Python310\lib\asyncio\base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\programming\aphrodite\aphrodite-v2\api\app\services\badge_processing\database_service.py", line 69, in get_badge_settings
    result = await db.execute(stmt)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2180, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2047, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1143, in _connection_for_bind
    conn = bind.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3268, in connect
    return self._connection_cls(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 145, in __init__
    self._dbapi_connection = engine.raw_connection()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\base.py", line 3292, in raw_connection
    return self.pool.connect()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 452, in connect
    return _ConnectionFairy._checkout(self)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1368, in _checkout
    with util.safe_reraise():
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\pool\base.py", line 1306, in _checkout
    result = pool._dialect._do_ping_w_event(
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\engine\default.py", line 709, in _do_ping_w_event
    return self.do_ping(dbapi_connection)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1137, in do_ping
    dbapi_connection.ping()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 829, in ping
    self._handle_exception(error)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 810, in _handle_exception
    raise error
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 827, in ping
    _ = self.await_(self._async_ping())
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 125, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 185, in greenlet_spawn
    value = await result
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 836, in _async_ping
    await tr.start()
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "E:\programming\aphrodite\aphrodite-v2\api\venv\lib\site-packages\asyncpg\connection.py", line 350, in execute
    result = await self._protocol.query(query, timeout)
  File "asyncpg\protocol\protocol.pyx", line 374, in query
  File "asyncpg\protocol\protocol.pyx", line 367, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\protocol\coreproto.pyx", line 1094, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\protocol\protocol.pyx", line 966, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 361, in write
    self._loop_writing(data=bytes(data))
  File "C:\Program Files\Python310\lib\asyncio\proactor_events.py", line 397, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
AttributeError: 'NoneType' object has no attribute 'send'
2025-06-18 07:34:23 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:34:23 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:34:23 - WARNING - No resolution detected, skipping resolution badge
2025-06-18 07:34:23 - ERROR - Database session factory not initialized
2025-06-18 07:34:23 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:34:23 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:34:23 - WARNING - No real reviews found using v2 detector
2025-06-18 07:34:23 - WARNING - No reviews found, skipping review badge
2025-06-18 07:34:23 - ERROR - Error getting media item 01433be8d82b46d07a1d599bca7f8c3e: Event loop is closed
2025-06-18 07:34:23 - WARNING - Could not retrieve media item for ID: 01433be8d82b46d07a1d599bca7f8c3e
2025-06-18 07:34:23 - WARNING - No awards detected, skipping awards badge
2025-06-18 07:34:23 - WARNING - No badges applied, using resized poster
2025-06-25 08:21:20 - ERROR - Could not load badge settings from PostgreSQL database: No module named 'app'
2025-06-25 08:21:20 - ERROR - Could not load review badge settings from PostgreSQL database: No module named 'app'
